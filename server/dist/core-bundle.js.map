{"version":3,"sources":["./node_modules/axios/index.js","./node_modules/axios/lib/adapters/http.js","./node_modules/axios/lib/adapters/xhr.js","./node_modules/axios/lib/axios.js","./node_modules/axios/lib/cancel/Cancel.js","./node_modules/axios/lib/cancel/CancelToken.js","./node_modules/axios/lib/cancel/isCancel.js","./node_modules/axios/lib/core/Axios.js","./node_modules/axios/lib/core/InterceptorManager.js","./node_modules/axios/lib/core/buildFullPath.js","./node_modules/axios/lib/core/createError.js","./node_modules/axios/lib/core/dispatchRequest.js","./node_modules/axios/lib/core/enhanceError.js","./node_modules/axios/lib/core/mergeConfig.js","./node_modules/axios/lib/core/settle.js","./node_modules/axios/lib/core/transformData.js","./node_modules/axios/lib/defaults.js","./node_modules/axios/lib/helpers/bind.js","./node_modules/axios/lib/helpers/buildURL.js","./node_modules/axios/lib/helpers/combineURLs.js","./node_modules/axios/lib/helpers/cookies.js","./node_modules/axios/lib/helpers/isAbsoluteURL.js","./node_modules/axios/lib/helpers/isAxiosError.js","./node_modules/axios/lib/helpers/isURLSameOrigin.js","./node_modules/axios/lib/helpers/normalizeHeaderName.js","./node_modules/axios/lib/helpers/parseHeaders.js","./node_modules/axios/lib/helpers/spread.js","./node_modules/axios/lib/utils.js","./node_modules/debug/node_modules/ms/index.js","./node_modules/debug/src/browser.js","./node_modules/debug/src/common.js","./node_modules/debug/src/index.js","./node_modules/debug/src/node.js","./node_modules/follow-redirects/debug.js","./node_modules/follow-redirects/index.js","./node_modules/has-flag/index.js","./node_modules/loglevel/lib/loglevel.js","./node_modules/supports-color/index.js","./dev/ArrayHook.tsx","./dev/Call.tsx","./dev/DateHook.tsx","./dev/Enum.tsx","./dev/Equals.tsx","./dev/Facility.tsx","./dev/GymClock.tsx","./dev/LiveChannel.tsx","./dev/LiveCommand.tsx","./dev/LiveDocumentCentral.tsx","./dev/LiveWorkout.tsx","./dev/LocalStore.tsx","./dev/Logger.tsx","./dev/LoggerClientWrap.tsx","./dev/PeerFactory.tsx","./dev/PeerInterfaces.tsx","./dev/PeerLink.tsx","./dev/PeerRtc.tsx","./dev/PeerWeb.tsx","./dev/Person.tsx","./dev/Queue.tsx","./dev/RunnableClock.tsx","./dev/Signal.tsx","./dev/StreamableTypes.tsx","./dev/UserFacilities.tsx","external \"assert\"","external \"http\"","external \"https\"","external \"os\"","external \"stream\"","external \"tty\"","external \"url\"","external \"util\"","external \"zlib\"","webpack/bootstrap","./dev/EntryPoints.tsx"],"names":[],"mappings":";;;;;;;;;AAAA,4FAAuC,C;;;;;;;;;;;ACA1B;;AAEb,YAAY,mBAAO,CAAC,qDAAY;AAChC,aAAa,mBAAO,CAAC,iEAAkB;AACvC,oBAAoB,mBAAO,CAAC,6EAAuB;AACnD,eAAe,mBAAO,CAAC,2EAAuB;AAC9C,WAAW,mBAAO,CAAC,kBAAM;AACzB,YAAY,mBAAO,CAAC,oBAAO;AAC3B,iBAAiB,4FAAgC;AACjD,kBAAkB,6FAAiC;AACnD,UAAU,mBAAO,CAAC,gBAAK;AACvB,WAAW,mBAAO,CAAC,kBAAM;AACzB,UAAU,mBAAO,CAAC,+DAAsB;AACxC,kBAAkB,mBAAO,CAAC,yEAAqB;AAC/C,mBAAmB,mBAAO,CAAC,2EAAsB;;AAEjD;;AAEA;AACA;AACA,WAAW,uBAAuB;AAClC,WAAW,iBAAiB;AAC5B,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,mDAAmD;AAClE;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,GAAG;AACH;;;;;;;;;;;;AC9Sa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;AAChC,aAAa,mBAAO,CAAC,iEAAkB;AACvC,cAAc,mBAAO,CAAC,yEAAsB;AAC5C,eAAe,mBAAO,CAAC,2EAAuB;AAC9C,oBAAoB,mBAAO,CAAC,6EAAuB;AACnD,mBAAmB,mBAAO,CAAC,mFAA2B;AACtD,sBAAsB,mBAAO,CAAC,yFAA8B;AAC5D,kBAAkB,mBAAO,CAAC,yEAAqB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;AClLa;;AAEb,YAAY,mBAAO,CAAC,kDAAS;AAC7B,WAAW,mBAAO,CAAC,gEAAgB;AACnC,YAAY,mBAAO,CAAC,4DAAc;AAClC,kBAAkB,mBAAO,CAAC,wEAAoB;AAC9C,eAAe,mBAAO,CAAC,wDAAY;;AAEnC;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAO,CAAC,kEAAiB;AACxC,oBAAoB,mBAAO,CAAC,4EAAsB;AAClD,iBAAiB,mBAAO,CAAC,sEAAmB;;AAE5C;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,oEAAkB;;AAEzC;AACA,qBAAqB,mBAAO,CAAC,gFAAwB;;AAErD;;AAEA;AACA,sBAAsB;;;;;;;;;;;;ACvDT;;AAEb;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AClBa;;AAEb,aAAa,mBAAO,CAAC,2DAAU;;AAE/B;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACxDa;;AAEb;AACA;AACA;;;;;;;;;;;;ACJa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;AAChC,eAAe,mBAAO,CAAC,yEAAqB;AAC5C,yBAAyB,mBAAO,CAAC,iFAAsB;AACvD,sBAAsB,mBAAO,CAAC,2EAAmB;AACjD,kBAAkB,mBAAO,CAAC,mEAAe;;AAEzC;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA,yBAAyB;AACzB,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;;;;;;;;;;;;AC9Fa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;;AAEhC;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;;;;;ACnDa;;AAEb,oBAAoB,mBAAO,CAAC,mFAA0B;AACtD,kBAAkB,mBAAO,CAAC,+EAAwB;;AAElD;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBa;;AAEb,mBAAmB,mBAAO,CAAC,qEAAgB;;AAE3C;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjBa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;AAChC,oBAAoB,mBAAO,CAAC,uEAAiB;AAC7C,eAAe,mBAAO,CAAC,uEAAoB;AAC3C,eAAe,mBAAO,CAAC,yDAAa;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B;AAC/B,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;;;;;;;;;;;AC9Ea;;AAEb;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzCa;;AAEb,YAAY,mBAAO,CAAC,mDAAU;;AAE9B;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,2BAA2B;AAC3B,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;;;;;;;;;;;ACtFa;;AAEb,kBAAkB,mBAAO,CAAC,mEAAe;;AAEzC;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxBa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;;AAEhC;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,MAAM;AACjB,WAAW,eAAe;AAC1B,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;ACnBa;;AAEb,YAAY,mBAAO,CAAC,kDAAS;AAC7B,0BAA0B,mBAAO,CAAC,8FAA+B;;AAEjE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,gEAAgB;AACtC,GAAG;AACH;AACA,cAAc,mBAAO,CAAC,kEAAiB;AACvC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY;AACnB;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;ACjGa;;AAEb;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACVa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;ACrEa;;AAEb;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACba;;AAEb,YAAY,mBAAO,CAAC,qDAAY;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0CAA0C;AAC1C,SAAS;;AAET;AACA,4DAA4D,wBAAwB;AACpF;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,kCAAkC;AAClC,+BAA+B,aAAa,EAAE;AAC9C;AACA;AACA,KAAK;AACL;;;;;;;;;;;;ACpDa;;AAEb;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACba;;AAEb;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;;;;;;;;;;;ACVa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;ACnEa;;AAEb,YAAY,mBAAO,CAAC,mDAAU;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACXa;;AAEb,YAAY,mBAAO,CAAC,qDAAY;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,eAAe;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;ACpDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1Ba;;AAEb,WAAW,mBAAO,CAAC,gEAAgB;;AAEnC;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS,GAAG,SAAS;AAC5C,2BAA2B;AAC3B;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,4BAA4B;AAC5B,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC9VA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACjKA;;AAEA;AACA;AACA;;AAEA,kBAAkB;AAClB,YAAY;AACZ,YAAY;AACZ,iBAAiB;AACjB,eAAe;AACf,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;;AAEvD;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,oDAAU;;AAEnC,OAAO,WAAW;;AAElB;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;;;;;;;;;;;AC3QA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAO,CAAC,yDAAI;AACpC;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,cAAc;AAC1B;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA6C,SAAS;AACtD;AACA;AACA;AACA;;AAEA,6CAA6C,SAAS;AACtD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;;;;;;;;ACpQA;AACA;AACA;AACA;;AAEA;AACA,CAAC,+FAAwC;AACzC,CAAC;AACD,CAAC,yFAAqC;AACtC;;;;;;;;;;;ACTA;AACA;AACA;;AAEA,YAAY,mBAAO,CAAC,gBAAK;AACzB,aAAa,mBAAO,CAAC,kBAAM;;AAE3B;AACA;AACA;;AAEA,YAAY;AACZ,WAAW;AACX,kBAAkB;AAClB,YAAY;AACZ,YAAY;AACZ,iBAAiB;AACjB,eAAe;AACf,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA,cAAc;;AAEd;AACA;AACA;AACA,uBAAuB,mBAAO,CAAC,8DAAgB;;AAE/C;AACA,EAAE,cAAc;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA,CAAC,IAAI;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,2BAA2B;;AAEnC;AACA;AACA,iDAAiD,EAAE;AACnD,sBAAsB,WAAW,IAAI,KAAK;;AAE1C;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,oDAAU;;AAEnC,OAAO,WAAW;;AAElB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACtQA;;AAEA;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,gDAAO;AAC7B;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;;;;;;;;;;;ACbA,UAAU,mBAAO,CAAC,gBAAK;AACvB;AACA,WAAW,mBAAO,CAAC,kBAAM;AACzB,YAAY,mBAAO,CAAC,oBAAO;AAC3B,eAAe,oDAA0B;AACzC,aAAa,mBAAO,CAAC,sBAAQ;AAC7B,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iCAAiC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,sBAAsB,uCAAuC,EAAE;AAC/D,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,uEAAuE;AACvF,YAAY,mEAAmE;AAC/E,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,2BAA2B;AAClD,mBAAmB;;;;;;;;;;;;AC5gBN;;AAEb;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAA0C;AAClD,QAAQ,oCAAO,UAAU;AAAA;AAAA;AAAA;AAAA,kGAAC;AAC1B,KAAK,MAAM,EAIN;AACL,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,qEAAqE;AACrE,WAAW;AACX;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,eAAe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;ACjRY;AACb,WAAW,mBAAO,CAAC,cAAI;AACvB,YAAY,mBAAO,CAAC,gBAAK;AACzB,gBAAgB,mBAAO,CAAC,kDAAU;;AAElC,OAAO,IAAI;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,+BAA+B,KAAK;AACxE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA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","file":"./core-bundle.js","sourcesContent":["module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildFullPath = require('../core/buildFullPath');\nvar buildURL = require('./../helpers/buildURL');\nvar http = require('http');\nvar https = require('https');\nvar httpFollow = require('follow-redirects').http;\nvar httpsFollow = require('follow-redirects').https;\nvar url = require('url');\nvar zlib = require('zlib');\nvar pkg = require('./../../package.json');\nvar createError = require('../core/createError');\nvar enhanceError = require('../core/enhanceError');\n\nvar isHttps = /https:?/;\n\n/**\n *\n * @param {http.ClientRequestArgs} options\n * @param {AxiosProxyConfig} proxy\n * @param {string} location\n */\nfunction setProxy(options, proxy, location) {\n  options.hostname = proxy.host;\n  options.host = proxy.host;\n  options.port = proxy.port;\n  options.path = location;\n\n  // Basic proxy authorization\n  if (proxy.auth) {\n    var base64 = Buffer.from(proxy.auth.username + ':' + proxy.auth.password, 'utf8').toString('base64');\n    options.headers['Proxy-Authorization'] = 'Basic ' + base64;\n  }\n\n  // If a proxy is used, any redirects must also pass through the proxy\n  options.beforeRedirect = function beforeRedirect(redirection) {\n    redirection.headers.host = redirection.host;\n    setProxy(redirection, proxy, redirection.href);\n  };\n}\n\n/*eslint consistent-return:0*/\nmodule.exports = function httpAdapter(config) {\n  return new Promise(function dispatchHttpRequest(resolvePromise, rejectPromise) {\n    var resolve = function resolve(value) {\n      resolvePromise(value);\n    };\n    var reject = function reject(value) {\n      rejectPromise(value);\n    };\n    var data = config.data;\n    var headers = config.headers;\n\n    // Set User-Agent (required by some servers)\n    // Only set header if it hasn't been set in config\n    // See https://github.com/axios/axios/issues/69\n    if (!headers['User-Agent'] && !headers['user-agent']) {\n      headers['User-Agent'] = 'axios/' + pkg.version;\n    }\n\n    if (data && !utils.isStream(data)) {\n      if (Buffer.isBuffer(data)) {\n        // Nothing to do...\n      } else if (utils.isArrayBuffer(data)) {\n        data = Buffer.from(new Uint8Array(data));\n      } else if (utils.isString(data)) {\n        data = Buffer.from(data, 'utf-8');\n      } else {\n        return reject(createError(\n          'Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream',\n          config\n        ));\n      }\n\n      // Add Content-Length header if data exists\n      headers['Content-Length'] = data.length;\n    }\n\n    // HTTP basic authentication\n    var auth = undefined;\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      auth = username + ':' + password;\n    }\n\n    // Parse url\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    var parsed = url.parse(fullPath);\n    var protocol = parsed.protocol || 'http:';\n\n    if (!auth && parsed.auth) {\n      var urlAuth = parsed.auth.split(':');\n      var urlUsername = urlAuth[0] || '';\n      var urlPassword = urlAuth[1] || '';\n      auth = urlUsername + ':' + urlPassword;\n    }\n\n    if (auth) {\n      delete headers.Authorization;\n    }\n\n    var isHttpsRequest = isHttps.test(protocol);\n    var agent = isHttpsRequest ? config.httpsAgent : config.httpAgent;\n\n    var options = {\n      path: buildURL(parsed.path, config.params, config.paramsSerializer).replace(/^\\?/, ''),\n      method: config.method.toUpperCase(),\n      headers: headers,\n      agent: agent,\n      agents: { http: config.httpAgent, https: config.httpsAgent },\n      auth: auth\n    };\n\n    if (config.socketPath) {\n      options.socketPath = config.socketPath;\n    } else {\n      options.hostname = parsed.hostname;\n      options.port = parsed.port;\n    }\n\n    var proxy = config.proxy;\n    if (!proxy && proxy !== false) {\n      var proxyEnv = protocol.slice(0, -1) + '_proxy';\n      var proxyUrl = process.env[proxyEnv] || process.env[proxyEnv.toUpperCase()];\n      if (proxyUrl) {\n        var parsedProxyUrl = url.parse(proxyUrl);\n        var noProxyEnv = process.env.no_proxy || process.env.NO_PROXY;\n        var shouldProxy = true;\n\n        if (noProxyEnv) {\n          var noProxy = noProxyEnv.split(',').map(function trim(s) {\n            return s.trim();\n          });\n\n          shouldProxy = !noProxy.some(function proxyMatch(proxyElement) {\n            if (!proxyElement) {\n              return false;\n            }\n            if (proxyElement === '*') {\n              return true;\n            }\n            if (proxyElement[0] === '.' &&\n                parsed.hostname.substr(parsed.hostname.length - proxyElement.length) === proxyElement) {\n              return true;\n            }\n\n            return parsed.hostname === proxyElement;\n          });\n        }\n\n        if (shouldProxy) {\n          proxy = {\n            host: parsedProxyUrl.hostname,\n            port: parsedProxyUrl.port,\n            protocol: parsedProxyUrl.protocol\n          };\n\n          if (parsedProxyUrl.auth) {\n            var proxyUrlAuth = parsedProxyUrl.auth.split(':');\n            proxy.auth = {\n              username: proxyUrlAuth[0],\n              password: proxyUrlAuth[1]\n            };\n          }\n        }\n      }\n    }\n\n    if (proxy) {\n      options.headers.host = parsed.hostname + (parsed.port ? ':' + parsed.port : '');\n      setProxy(options, proxy, protocol + '//' + parsed.hostname + (parsed.port ? ':' + parsed.port : '') + options.path);\n    }\n\n    var transport;\n    var isHttpsProxy = isHttpsRequest && (proxy ? isHttps.test(proxy.protocol) : true);\n    if (config.transport) {\n      transport = config.transport;\n    } else if (config.maxRedirects === 0) {\n      transport = isHttpsProxy ? https : http;\n    } else {\n      if (config.maxRedirects) {\n        options.maxRedirects = config.maxRedirects;\n      }\n      transport = isHttpsProxy ? httpsFollow : httpFollow;\n    }\n\n    if (config.maxBodyLength > -1) {\n      options.maxBodyLength = config.maxBodyLength;\n    }\n\n    // Create the request\n    var req = transport.request(options, function handleResponse(res) {\n      if (req.aborted) return;\n\n      // uncompress the response body transparently if required\n      var stream = res;\n\n      // return the last request in case of redirects\n      var lastRequest = res.req || req;\n\n\n      // if no content, is HEAD request or decompress disabled we should not decompress\n      if (res.statusCode !== 204 && lastRequest.method !== 'HEAD' && config.decompress !== false) {\n        switch (res.headers['content-encoding']) {\n        /*eslint default-case:0*/\n        case 'gzip':\n        case 'compress':\n        case 'deflate':\n        // add the unzipper to the body stream processing pipeline\n          stream = stream.pipe(zlib.createUnzip());\n\n          // remove the content-encoding in order to not confuse downstream operations\n          delete res.headers['content-encoding'];\n          break;\n        }\n      }\n\n      var response = {\n        status: res.statusCode,\n        statusText: res.statusMessage,\n        headers: res.headers,\n        config: config,\n        request: lastRequest\n      };\n\n      if (config.responseType === 'stream') {\n        response.data = stream;\n        settle(resolve, reject, response);\n      } else {\n        var responseBuffer = [];\n        stream.on('data', function handleStreamData(chunk) {\n          responseBuffer.push(chunk);\n\n          // make sure the content length is not over the maxContentLength if specified\n          if (config.maxContentLength > -1 && Buffer.concat(responseBuffer).length > config.maxContentLength) {\n            stream.destroy();\n            reject(createError('maxContentLength size of ' + config.maxContentLength + ' exceeded',\n              config, null, lastRequest));\n          }\n        });\n\n        stream.on('error', function handleStreamError(err) {\n          if (req.aborted) return;\n          reject(enhanceError(err, config, null, lastRequest));\n        });\n\n        stream.on('end', function handleStreamEnd() {\n          var responseData = Buffer.concat(responseBuffer);\n          if (config.responseType !== 'arraybuffer') {\n            responseData = responseData.toString(config.responseEncoding);\n            if (!config.responseEncoding || config.responseEncoding === 'utf8') {\n              responseData = utils.stripBOM(responseData);\n            }\n          }\n\n          response.data = responseData;\n          settle(resolve, reject, response);\n        });\n      }\n    });\n\n    // Handle errors\n    req.on('error', function handleRequestError(err) {\n      if (req.aborted && err.code !== 'ERR_FR_TOO_MANY_REDIRECTS') return;\n      reject(enhanceError(err, config, null, req));\n    });\n\n    // Handle request timeout\n    if (config.timeout) {\n      // Sometime, the response will be very slow, and does not respond, the connect event will be block by event loop system.\n      // And timer callback will be fired, and abort() will be invoked before connection, then get \"socket hang up\" and code ECONNRESET.\n      // At this time, if we have a large number of request, nodejs will hang up some socket on background. and the number will up and up.\n      // And then these socket which be hang up will devoring CPU little by little.\n      // ClientRequest.setTimeout will be fired on the specify milliseconds, and can make sure that abort() will be fired after connect.\n      req.setTimeout(config.timeout, function handleRequestTimeout() {\n        req.abort();\n        reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED', req));\n      });\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (req.aborted) return;\n\n        req.abort();\n        reject(cancel);\n      });\n    }\n\n    // Send the request\n    if (utils.isStream(data)) {\n      data.on('error', function handleStreamError(err) {\n        reject(enhanceError(err, config, null, req));\n      }).pipe(req);\n    } else {\n      req.end(data);\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","var debug;\n\nmodule.exports = function () {\n  if (!debug) {\n    try {\n      /* eslint global-require: off */\n      debug = require(\"debug\")(\"follow-redirects\");\n    }\n    catch (error) {\n      debug = function () { /* */ };\n    }\n  }\n  debug.apply(null, arguments);\n};\n","var url = require(\"url\");\nvar URL = url.URL;\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Writable = require(\"stream\").Writable;\nvar assert = require(\"assert\");\nvar debug = require(\"./debug\");\n\n// Create handlers that pass events from native requests\nvar eventHandlers = Object.create(null);\n[\"abort\", \"aborted\", \"connect\", \"error\", \"socket\", \"timeout\"].forEach(function (event) {\n  eventHandlers[event] = function (arg1, arg2, arg3) {\n    this._redirectable.emit(event, arg1, arg2, arg3);\n  };\n});\n\n// Error types with codes\nvar RedirectionError = createErrorType(\n  \"ERR_FR_REDIRECTION_FAILURE\",\n  \"\"\n);\nvar TooManyRedirectsError = createErrorType(\n  \"ERR_FR_TOO_MANY_REDIRECTS\",\n  \"Maximum number of redirects exceeded\"\n);\nvar MaxBodyLengthExceededError = createErrorType(\n  \"ERR_FR_MAX_BODY_LENGTH_EXCEEDED\",\n  \"Request body larger than maxBodyLength limit\"\n);\nvar WriteAfterEndError = createErrorType(\n  \"ERR_STREAM_WRITE_AFTER_END\",\n  \"write after end\"\n);\n\n// An HTTP(S) request that can be redirected\nfunction RedirectableRequest(options, responseCallback) {\n  // Initialize the request\n  Writable.call(this);\n  this._sanitizeOptions(options);\n  this._options = options;\n  this._ended = false;\n  this._ending = false;\n  this._redirectCount = 0;\n  this._redirects = [];\n  this._requestBodyLength = 0;\n  this._requestBodyBuffers = [];\n\n  // Attach a callback if passed\n  if (responseCallback) {\n    this.on(\"response\", responseCallback);\n  }\n\n  // React to responses of native requests\n  var self = this;\n  this._onNativeResponse = function (response) {\n    self._processResponse(response);\n  };\n\n  // Perform the first request\n  this._performRequest();\n}\nRedirectableRequest.prototype = Object.create(Writable.prototype);\n\nRedirectableRequest.prototype.abort = function () {\n  // Abort the internal request\n  this._currentRequest.removeAllListeners();\n  this._currentRequest.on(\"error\", noop);\n  this._currentRequest.abort();\n\n  // Abort this request\n  this.emit(\"abort\");\n  this.removeAllListeners();\n};\n\n// Writes buffered data to the current native request\nRedirectableRequest.prototype.write = function (data, encoding, callback) {\n  // Writing is not allowed if end has been called\n  if (this._ending) {\n    throw new WriteAfterEndError();\n  }\n\n  // Validate input and shift parameters if necessary\n  if (!(typeof data === \"string\" || typeof data === \"object\" && (\"length\" in data))) {\n    throw new TypeError(\"data should be a string, Buffer or Uint8Array\");\n  }\n  if (typeof encoding === \"function\") {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Ignore empty buffers, since writing them doesn't invoke the callback\n  // https://github.com/nodejs/node/issues/22066\n  if (data.length === 0) {\n    if (callback) {\n      callback();\n    }\n    return;\n  }\n  // Only write when we don't exceed the maximum body length\n  if (this._requestBodyLength + data.length <= this._options.maxBodyLength) {\n    this._requestBodyLength += data.length;\n    this._requestBodyBuffers.push({ data: data, encoding: encoding });\n    this._currentRequest.write(data, encoding, callback);\n  }\n  // Error when we exceed the maximum body length\n  else {\n    this.emit(\"error\", new MaxBodyLengthExceededError());\n    this.abort();\n  }\n};\n\n// Ends the current native request\nRedirectableRequest.prototype.end = function (data, encoding, callback) {\n  // Shift parameters if necessary\n  if (typeof data === \"function\") {\n    callback = data;\n    data = encoding = null;\n  }\n  else if (typeof encoding === \"function\") {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Write data if needed and end\n  if (!data) {\n    this._ended = this._ending = true;\n    this._currentRequest.end(null, null, callback);\n  }\n  else {\n    var self = this;\n    var currentRequest = this._currentRequest;\n    this.write(data, encoding, function () {\n      self._ended = true;\n      currentRequest.end(null, null, callback);\n    });\n    this._ending = true;\n  }\n};\n\n// Sets a header value on the current native request\nRedirectableRequest.prototype.setHeader = function (name, value) {\n  this._options.headers[name] = value;\n  this._currentRequest.setHeader(name, value);\n};\n\n// Clears a header value on the current native request\nRedirectableRequest.prototype.removeHeader = function (name) {\n  delete this._options.headers[name];\n  this._currentRequest.removeHeader(name);\n};\n\n// Global timeout for all underlying requests\nRedirectableRequest.prototype.setTimeout = function (msecs, callback) {\n  var self = this;\n  if (callback) {\n    this.on(\"timeout\", callback);\n  }\n\n  // Sets up a timer to trigger a timeout event\n  function startTimer() {\n    if (self._timeout) {\n      clearTimeout(self._timeout);\n    }\n    self._timeout = setTimeout(function () {\n      self.emit(\"timeout\");\n      clearTimer();\n    }, msecs);\n  }\n\n  // Prevent a timeout from triggering\n  function clearTimer() {\n    clearTimeout(this._timeout);\n    if (callback) {\n      self.removeListener(\"timeout\", callback);\n    }\n    if (!this.socket) {\n      self._currentRequest.removeListener(\"socket\", startTimer);\n    }\n  }\n\n  // Start the timer when the socket is opened\n  if (this.socket) {\n    startTimer();\n  }\n  else {\n    this._currentRequest.once(\"socket\", startTimer);\n  }\n\n  this.once(\"response\", clearTimer);\n  this.once(\"error\", clearTimer);\n\n  return this;\n};\n\n// Proxy all other public ClientRequest methods\n[\n  \"flushHeaders\", \"getHeader\",\n  \"setNoDelay\", \"setSocketKeepAlive\",\n].forEach(function (method) {\n  RedirectableRequest.prototype[method] = function (a, b) {\n    return this._currentRequest[method](a, b);\n  };\n});\n\n// Proxy all public ClientRequest properties\n[\"aborted\", \"connection\", \"socket\"].forEach(function (property) {\n  Object.defineProperty(RedirectableRequest.prototype, property, {\n    get: function () { return this._currentRequest[property]; },\n  });\n});\n\nRedirectableRequest.prototype._sanitizeOptions = function (options) {\n  // Ensure headers are always present\n  if (!options.headers) {\n    options.headers = {};\n  }\n\n  // Since http.request treats host as an alias of hostname,\n  // but the url module interprets host as hostname plus port,\n  // eliminate the host property to avoid confusion.\n  if (options.host) {\n    // Use hostname if set, because it has precedence\n    if (!options.hostname) {\n      options.hostname = options.host;\n    }\n    delete options.host;\n  }\n\n  // Complete the URL object when necessary\n  if (!options.pathname && options.path) {\n    var searchPos = options.path.indexOf(\"?\");\n    if (searchPos < 0) {\n      options.pathname = options.path;\n    }\n    else {\n      options.pathname = options.path.substring(0, searchPos);\n      options.search = options.path.substring(searchPos);\n    }\n  }\n};\n\n\n// Executes the next native request (initial or redirect)\nRedirectableRequest.prototype._performRequest = function () {\n  // Load the native protocol\n  var protocol = this._options.protocol;\n  var nativeProtocol = this._options.nativeProtocols[protocol];\n  if (!nativeProtocol) {\n    this.emit(\"error\", new TypeError(\"Unsupported protocol \" + protocol));\n    return;\n  }\n\n  // If specified, use the agent corresponding to the protocol\n  // (HTTP and HTTPS use different types of agents)\n  if (this._options.agents) {\n    var scheme = protocol.substr(0, protocol.length - 1);\n    this._options.agent = this._options.agents[scheme];\n  }\n\n  // Create the native request\n  var request = this._currentRequest =\n        nativeProtocol.request(this._options, this._onNativeResponse);\n  this._currentUrl = url.format(this._options);\n\n  // Set up event handlers\n  request._redirectable = this;\n  for (var event in eventHandlers) {\n    /* istanbul ignore else */\n    if (event) {\n      request.on(event, eventHandlers[event]);\n    }\n  }\n\n  // End a redirected request\n  // (The first request must be ended explicitly with RedirectableRequest#end)\n  if (this._isRedirect) {\n    // Write the request entity and end.\n    var i = 0;\n    var self = this;\n    var buffers = this._requestBodyBuffers;\n    (function writeNext(error) {\n      // Only write if this request has not been redirected yet\n      /* istanbul ignore else */\n      if (request === self._currentRequest) {\n        // Report any write errors\n        /* istanbul ignore if */\n        if (error) {\n          self.emit(\"error\", error);\n        }\n        // Write the next buffer if there are still left\n        else if (i < buffers.length) {\n          var buffer = buffers[i++];\n          /* istanbul ignore else */\n          if (!request.finished) {\n            request.write(buffer.data, buffer.encoding, writeNext);\n          }\n        }\n        // End the request if `end` has been called on us\n        else if (self._ended) {\n          request.end();\n        }\n      }\n    }());\n  }\n};\n\n// Processes a response from the current native request\nRedirectableRequest.prototype._processResponse = function (response) {\n  // Store the redirected response\n  var statusCode = response.statusCode;\n  if (this._options.trackRedirects) {\n    this._redirects.push({\n      url: this._currentUrl,\n      headers: response.headers,\n      statusCode: statusCode,\n    });\n  }\n\n  // RFC7231§6.4: The 3xx (Redirection) class of status code indicates\n  // that further action needs to be taken by the user agent in order to\n  // fulfill the request. If a Location header field is provided,\n  // the user agent MAY automatically redirect its request to the URI\n  // referenced by the Location field value,\n  // even if the specific status code is not understood.\n  var location = response.headers.location;\n  if (location && this._options.followRedirects !== false &&\n      statusCode >= 300 && statusCode < 400) {\n    // Abort the current request\n    this._currentRequest.removeAllListeners();\n    this._currentRequest.on(\"error\", noop);\n    this._currentRequest.abort();\n    // Discard the remainder of the response to avoid waiting for data\n    response.destroy();\n\n    // RFC7231§6.4: A client SHOULD detect and intervene\n    // in cyclical redirections (i.e., \"infinite\" redirection loops).\n    if (++this._redirectCount > this._options.maxRedirects) {\n      this.emit(\"error\", new TooManyRedirectsError());\n      return;\n    }\n\n    // RFC7231§6.4: Automatic redirection needs to done with\n    // care for methods not known to be safe, […]\n    // RFC7231§6.4.2–3: For historical reasons, a user agent MAY change\n    // the request method from POST to GET for the subsequent request.\n    if ((statusCode === 301 || statusCode === 302) && this._options.method === \"POST\" ||\n        // RFC7231§6.4.4: The 303 (See Other) status code indicates that\n        // the server is redirecting the user agent to a different resource […]\n        // A user agent can perform a retrieval request targeting that URI\n        // (a GET or HEAD request if using HTTP) […]\n        (statusCode === 303) && !/^(?:GET|HEAD)$/.test(this._options.method)) {\n      this._options.method = \"GET\";\n      // Drop a possible entity and headers related to it\n      this._requestBodyBuffers = [];\n      removeMatchingHeaders(/^content-/i, this._options.headers);\n    }\n\n    // Drop the Host header, as the redirect might lead to a different host\n    var previousHostName = removeMatchingHeaders(/^host$/i, this._options.headers) ||\n      url.parse(this._currentUrl).hostname;\n\n    // Create the redirected request\n    var redirectUrl = url.resolve(this._currentUrl, location);\n    debug(\"redirecting to\", redirectUrl);\n    this._isRedirect = true;\n    var redirectUrlParts = url.parse(redirectUrl);\n    Object.assign(this._options, redirectUrlParts);\n\n    // Drop the Authorization header if redirecting to another host\n    if (redirectUrlParts.hostname !== previousHostName) {\n      removeMatchingHeaders(/^authorization$/i, this._options.headers);\n    }\n\n    // Evaluate the beforeRedirect callback\n    if (typeof this._options.beforeRedirect === \"function\") {\n      var responseDetails = { headers: response.headers };\n      try {\n        this._options.beforeRedirect.call(null, this._options, responseDetails);\n      }\n      catch (err) {\n        this.emit(\"error\", err);\n        return;\n      }\n      this._sanitizeOptions(this._options);\n    }\n\n    // Perform the redirected request\n    try {\n      this._performRequest();\n    }\n    catch (cause) {\n      var error = new RedirectionError(\"Redirected request failed: \" + cause.message);\n      error.cause = cause;\n      this.emit(\"error\", error);\n    }\n  }\n  else {\n    // The response is not a redirect; return it as-is\n    response.responseUrl = this._currentUrl;\n    response.redirects = this._redirects;\n    this.emit(\"response\", response);\n\n    // Clean up\n    this._requestBodyBuffers = [];\n  }\n};\n\n// Wraps the key/value object of protocols with redirect functionality\nfunction wrap(protocols) {\n  // Default settings\n  var exports = {\n    maxRedirects: 21,\n    maxBodyLength: 10 * 1024 * 1024,\n  };\n\n  // Wrap each protocol\n  var nativeProtocols = {};\n  Object.keys(protocols).forEach(function (scheme) {\n    var protocol = scheme + \":\";\n    var nativeProtocol = nativeProtocols[protocol] = protocols[scheme];\n    var wrappedProtocol = exports[scheme] = Object.create(nativeProtocol);\n\n    // Executes a request, following redirects\n    function request(input, options, callback) {\n      // Parse parameters\n      if (typeof input === \"string\") {\n        var urlStr = input;\n        try {\n          input = urlToOptions(new URL(urlStr));\n        }\n        catch (err) {\n          /* istanbul ignore next */\n          input = url.parse(urlStr);\n        }\n      }\n      else if (URL && (input instanceof URL)) {\n        input = urlToOptions(input);\n      }\n      else {\n        callback = options;\n        options = input;\n        input = { protocol: protocol };\n      }\n      if (typeof options === \"function\") {\n        callback = options;\n        options = null;\n      }\n\n      // Set defaults\n      options = Object.assign({\n        maxRedirects: exports.maxRedirects,\n        maxBodyLength: exports.maxBodyLength,\n      }, input, options);\n      options.nativeProtocols = nativeProtocols;\n\n      assert.equal(options.protocol, protocol, \"protocol mismatch\");\n      debug(\"options\", options);\n      return new RedirectableRequest(options, callback);\n    }\n\n    // Executes a GET request, following redirects\n    function get(input, options, callback) {\n      var wrappedRequest = wrappedProtocol.request(input, options, callback);\n      wrappedRequest.end();\n      return wrappedRequest;\n    }\n\n    // Expose the properties on the wrapped protocol\n    Object.defineProperties(wrappedProtocol, {\n      request: { value: request, configurable: true, enumerable: true, writable: true },\n      get: { value: get, configurable: true, enumerable: true, writable: true },\n    });\n  });\n  return exports;\n}\n\n/* istanbul ignore next */\nfunction noop() { /* empty */ }\n\n// from https://github.com/nodejs/node/blob/master/lib/internal/url.js\nfunction urlToOptions(urlObject) {\n  var options = {\n    protocol: urlObject.protocol,\n    hostname: urlObject.hostname.startsWith(\"[\") ?\n      /* istanbul ignore next */\n      urlObject.hostname.slice(1, -1) :\n      urlObject.hostname,\n    hash: urlObject.hash,\n    search: urlObject.search,\n    pathname: urlObject.pathname,\n    path: urlObject.pathname + urlObject.search,\n    href: urlObject.href,\n  };\n  if (urlObject.port !== \"\") {\n    options.port = Number(urlObject.port);\n  }\n  return options;\n}\n\nfunction removeMatchingHeaders(regex, headers) {\n  var lastValue;\n  for (var header in headers) {\n    if (regex.test(header)) {\n      lastValue = headers[header];\n      delete headers[header];\n    }\n  }\n  return lastValue;\n}\n\nfunction createErrorType(code, defaultMessage) {\n  function CustomError(message) {\n    Error.captureStackTrace(this, this.constructor);\n    this.message = message || defaultMessage;\n  }\n  CustomError.prototype = new Error();\n  CustomError.prototype.constructor = CustomError;\n  CustomError.prototype.name = \"Error [\" + code + \"]\";\n  CustomError.prototype.code = code;\n  return CustomError;\n}\n\n// Exports\nmodule.exports = wrap({ http: http, https: https });\nmodule.exports.wrap = wrap;\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet flagForceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tflagForceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tflagForceColor = 1;\n}\n\nfunction envForceColor() {\n\tif ('FORCE_COLOR' in env) {\n\t\tif (env.FORCE_COLOR === 'true') {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (env.FORCE_COLOR === 'false') {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn env.FORCE_COLOR.length === 0 ? 1 : Math.min(Number.parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, {streamIsTTY, sniffFlags = true} = {}) {\n\tconst noFlagForceColor = envForceColor();\n\tif (noFlagForceColor !== undefined) {\n\t\tflagForceColor = noFlagForceColor;\n\t}\n\n\tconst forceColor = sniffFlags ? flagForceColor : noFlagForceColor;\n\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (sniffFlags) {\n\t\tif (hasFlag('color=16m') ||\n\t\t\thasFlag('color=full') ||\n\t\t\thasFlag('color=truecolor')) {\n\t\t\treturn 3;\n\t\t}\n\n\t\tif (hasFlag('color=256')) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE', 'DRONE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = Number.parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream, options = {}) {\n\tconst level = supportsColor(stream, {\n\t\tstreamIsTTY: stream && stream.isTTY,\n\t\t...options\n\t});\n\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel({isTTY: tty.isatty(1)}),\n\tstderr: getSupportLevel({isTTY: tty.isatty(2)})\n};\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Hooks the Array class so it has an 'equals' method.\r\n\r\nexport class ArrayHook  {\r\n   constructor() {\r\n\r\n   }\r\n   private static initialised: boolean = false;\r\n\r\n   static initialise(): void {\r\n      if (ArrayHook.initialised)\r\n         return;\r\n\r\n      ArrayHook.initialised = true;\r\n\r\n      // Warn if overriding existing method\r\n      if ((Array.prototype as any).equals)\r\n         console.warn(\"Warning: possible duplicate definition of Array.prototype.equals.\");\r\n\r\n      // attach the .equals method to Array's prototype to call it on any array\r\n      (Array.prototype as any).equals = function (array) {\r\n         // if the other array is a falsy value, return\r\n         if (!array)\r\n            return false;\r\n\r\n         // compare lengths - can save a lot of time \r\n         if (this.length != array.length)\r\n            return false;\r\n\r\n         for (var i = 0, l = this.length; i < l; i++) {\r\n            // Check if we have nested arrays\r\n            if (this[i] instanceof Array && array[i] instanceof Array) {\r\n               // recurse into the nested arrays\r\n               if (!this[i].equals(array[i]))\r\n                  return false;\r\n            }\r\n            else if (this[i].equals) {\r\n               // If the objects have an equals method, use it\r\n               return (this[i].equals (array[i]));\r\n            }\r\n            else if (this[i] != array[i]) {\r\n               // Warning - two different object instances will never be equal: {x:20} != {x:20}\r\n               return false;\r\n            }\r\n         }\r\n         return true;\r\n      }\r\n      // Hide method from for-in loops\r\n      Object.defineProperty(Array.prototype, \"equals\", { enumerable: false });\r\n   }\r\n}\r\n\r\nArrayHook.initialise();","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nimport { IStreamableFor } from './Streamable';\r\nimport { StreamableTypes } from './StreamableTypes';\r\n\r\nexport enum ETransportType {\r\n   Rtc,\r\n   Web\r\n}\r\n\r\n//==============================//\r\n// CallParticipation class\r\n//==============================//\r\nexport class CallParticipation implements IStreamableFor<CallParticipation> {\r\n   \r\n   private _meetingId: string;\r\n   private _isCandidateLeader: boolean;\r\n   private _sessionSubId: string;\r\n   private _glareResolve: number;\r\n\r\n   static readonly __type = \"CallParticipation\";\r\n\r\n   /**\r\n    * Create a CallParticipation object\r\n    * @param meetingId - ID for the facility hosting the call\r\n    * @param isCandidateLeader - true if the person is a possible call leader\r\n    * @param sessionSubId - iD for the call session (in case same person joins > once from same browser)\r\n    * @param glareResolve - if provided, a number to use for the glareResolution test. By design, don't reset this \r\n    *    - same CallParticipation should keep the same glareResolve throughout its lifetime\r\n    */\r\n   constructor (\r\n      meetingId: string,\r\n      sessionSubId: string,\r\n      isCandidateLeader: boolean,\r\n      glareResolve: number= Math.random()) {\r\n\r\n      this._meetingId = meetingId;\r\n      this._isCandidateLeader = isCandidateLeader;\r\n      this._sessionSubId = sessionSubId;\r\n      if (glareResolve)\r\n         this._glareResolve = glareResolve;\r\n      else\r\n         this._glareResolve = Math.random();\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get meetingId(): string {\r\n      return this._meetingId;\r\n   }\r\n   get isCandidateLeader(): boolean {\r\n      return this._isCandidateLeader;\r\n   }\r\n   get sessionSubId(): string {\r\n      return this._sessionSubId;\r\n   }\r\n   get glareResolve(): number {\r\n      return this._glareResolve;\r\n   }\r\n   get type(): string {\r\n      return CallParticipation.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallParticipation) : boolean{\r\n\r\n      return ((this._meetingId === rhs._meetingId) &&\r\n         (this._sessionSubId === rhs._sessionSubId) &&\r\n         (this._isCandidateLeader === rhs._isCandidateLeader) &&\r\n         (this._glareResolve.toPrecision(10) === rhs._glareResolve.toPrecision(10)));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: CallParticipation.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _meetingId: this._meetingId,\r\n            _sessionSubId: this._sessionSubId,\r\n            _isCandidateLeader: this._isCandidateLeader,\r\n            _glareResolve: this._glareResolve\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive (data: any): CallParticipation{\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallParticipation.reviveDb(data.attributes);\r\n\r\n      return CallParticipation.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallParticipation {\r\n\r\n      return new CallParticipation (\r\n         data._meetingId,\r\n         data._sessionSubId,\r\n         data._isCandidateLeader,\r\n         data._glareResolve);\r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallOffer class\r\n//==============================//\r\nexport class CallOffer implements IStreamableFor<CallOffer>  {\r\n\r\n   private _from: CallParticipation;\r\n   private _to: CallParticipation;\r\n   private _offer: any;\r\n   private _transport: ETransportType;\r\n\r\n   static readonly __type = \"CallOffer\";\r\n\r\n   /**\r\n    * Create a CallOffer object\r\n    * @param from - CallParticipation\r\n    * @param to - CallParticipation\r\n    * @param offer - the WebRTC Offer \r\n    * @param transport = transport type (Web or RTC)\r\n    */\r\n   constructor(from: CallParticipation, to: CallParticipation, offer: any, transport: ETransportType) {\r\n\r\n      this._from = from;\r\n      this._to = to;\r\n      this._offer = offer;\r\n      this._transport = transport;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get from(): CallParticipation {\r\n      return this._from;\r\n   }\r\n   get to(): CallParticipation {\r\n      return this._to;\r\n   }\r\n   get offer(): any {\r\n      return this._offer;\r\n   }\r\n   get transport(): ETransportType {\r\n      return this._transport;\r\n   }\r\n   get type(): string {\r\n      return CallOffer.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallOffer): boolean {\r\n\r\n      return ((this._from.equals(rhs._from)) &&\r\n         (this._to.equals(rhs._to)) &&\r\n         (this._offer === rhs._offer) &&\r\n         (this._transport === rhs._transport));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: CallOffer.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _from: this._from,\r\n            _to: this._to,\r\n            _offer: this._offer,\r\n            _transport: this.transport\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallOffer {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallOffer.reviveDb(data.attributes);\r\n\r\n      return CallOffer.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallOffer {\r\n\r\n      return new CallOffer(\r\n         CallParticipation.revive(data._from),\r\n         CallParticipation.revive(data._to),\r\n         data._offer,\r\n         data._transport);\r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallAnswer class\r\n//==============================//\r\nexport class CallAnswer implements IStreamableFor<CallAnswer> {\r\n\r\n   private _from: CallParticipation;\r\n   private _to: CallParticipation;\r\n   private _answer: any;\r\n   private _transport: ETransportType;\r\n\r\n   static readonly __type = \"CallAnswer\";\r\n\r\n   /**\r\n    * Create a CallAnswer object\r\n    * @param from - CallParticipation\r\n    * @param to - CallParticipation\r\n    * @param answer - the WebRTC Offer \r\n    * @param transport = transport type (Web or RTC)\r\n    */\r\n   constructor(from: CallParticipation, to: CallParticipation, answer: any, transport: ETransportType) {\r\n\r\n      this._from = from;\r\n      this._to = to;\r\n      this._answer = answer;\r\n      this._transport = transport;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get from(): CallParticipation {\r\n      return this._from;\r\n   }\r\n   get to(): CallParticipation {\r\n      return this._to;\r\n   }\r\n   get answer(): any {\r\n      return this._answer;\r\n   }\r\n   get transport(): ETransportType {\r\n      return this._transport;\r\n   }\r\n   get type(): string {\r\n      return CallAnswer.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallAnswer): boolean {\r\n\r\n      return ((this._from.equals(rhs._from)) &&\r\n         (this._to.equals(rhs._to)) &&\r\n         (this._answer === rhs._answer) &&\r\n         (this._transport === rhs._transport));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: CallAnswer.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _from: this._from,\r\n            _to: this._to,\r\n            _answer: this._answer,\r\n            _transport: this._transport\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallAnswer {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallAnswer.reviveDb(data.attributes);\r\n\r\n      return CallAnswer.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallAnswer {\r\n\r\n      return new CallAnswer(\r\n         CallParticipation.revive(data._from),\r\n         CallParticipation.revive(data._to),\r\n         data._answer,\r\n         data._transport);\r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallIceCandidate class\r\n//==============================//\r\nexport class CallIceCandidate implements IStreamableFor<CallIceCandidate>  {\r\n\r\n   private _from: CallParticipation;\r\n   private _to: CallParticipation;\r\n   private _ice: any;\r\n   private _outbound: boolean;\r\n\r\n   static readonly __type = \"CallIceCandidate\";\r\n\r\n   /**\r\n    * Create a CallIceCandidate object\r\n    * @param from - CallParticipation\r\n    * @param to - CallParticipation\r\n    * @param ice - the WebRTC ice, may be null\r\n    * @param outbound - TRUE if this is from an outbound (Offer) connection\r\n    */\r\n   constructor(from: CallParticipation, to: CallParticipation, ice: any, outbound: boolean) {\r\n\r\n      this._from = from;\r\n      this._to = to;\r\n      this._ice = ice;\r\n      this._outbound = outbound;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get from(): CallParticipation {\r\n      return this._from;\r\n   }\r\n   get to(): CallParticipation {\r\n      return this._to;\r\n   }\r\n   get ice(): any {\r\n      return this._ice;\r\n   }\r\n   get outbound(): boolean {\r\n      return this._outbound;\r\n   }   \r\n   get type(): string {\r\n      return CallIceCandidate.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallIceCandidate): boolean {\r\n\r\n      return ((this._from.equals(rhs._from)) &&\r\n         (this._to.equals(rhs._to)) &&\r\n         (this._ice === rhs._ice) &&\r\n         (this._outbound === rhs._outbound));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON () : any {\r\n\r\n      return {\r\n         __type: CallIceCandidate.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _from: this._from,\r\n            _to: this._to,\r\n            _ice: this._ice,\r\n            _outbound: this._outbound\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallIceCandidate {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallIceCandidate.reviveDb(data.attributes);\r\n\r\n      return CallIceCandidate.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallIceCandidate {\r\n\r\n      return new CallIceCandidate(\r\n         CallParticipation.revive(data._from),\r\n         CallParticipation.revive(data._to),\r\n         data._ice,\r\n         data._outbound); \r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallLeaderResolve class - used to resolve who is the call leader. \r\n// Send random numbers to each other, highest wins. \r\n//==============================//\r\nexport class CallLeaderResolve implements IStreamableFor<CallLeaderResolve>  {\r\n\r\n   private _glareDate: Date; \r\n   private _glareResolve: number; \r\n\r\n   static readonly __type = \"CallLeaderResolve\";\r\n\r\n   /**\r\n    * Create a CallLeaderResolve object\r\n    * @param glareDate - if provided, date the call leader logged in. By design, don't reset this\r\n    *    - same CallParticipation should keep the same glareDate throughout its lifetime\r\n    * @param glareResolve - if provided, a number to use for the glareResolution test. By design, don't reset this\r\n    *    - same CallParticipation should keep the same glareResolve throughout its lifetime\r\n    */\r\n   constructor (glareDate: Date = new Date(), glareResolve: number = Math.random()) {\r\n\r\n      this._glareDate = glareDate;\r\n      this._glareResolve = glareResolve;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get type(): string {\r\n      return CallLeaderResolve.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallLeaderResolve) : boolean {\r\n\r\n      return (this._glareDate.getTime() === rhs._glareDate.getTime() &&\r\n         this._glareResolve.toPrecision(10) === rhs._glareResolve.toPrecision(10));\r\n   };\r\n\r\n   \r\n   /**\r\n    * test to see if this object wins the resolution\r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   isWinnerVs(rhs: CallLeaderResolve): boolean {\r\n\r\n      // Use the date first - this means first person logged in is usually the winner\r\n      // else use the random value to do a lottery, lowest wins so directionality is the same\r\n      return ((this._glareDate.getTime() < rhs._glareDate.getTime()) || \r\n         ((this._glareDate.getTime() === rhs._glareDate.getTime()) && (this._glareResolve < rhs._glareResolve)));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON () : any {\r\n\r\n      return {\r\n         __type: CallLeaderResolve.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _glareDate: this._glareDate,\r\n            _glareResolve: this._glareResolve\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallLeaderResolve {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallLeaderResolve.reviveDb(data.attributes);\r\n\r\n      return CallLeaderResolve.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallLeaderResolve {\r\n\r\n      return new CallLeaderResolve(new Date(data._glareDate), Number (data._glareResolve));\r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallKeepAlive class\r\n//==============================//\r\nexport class CallKeepAlive implements IStreamableFor<CallKeepAlive> {\r\n   private _sequenceNo: number;\r\n\r\n   static readonly __type = \"CallKeepAlive\";\r\n\r\n   /**\r\n    * Create a CallKeepAlive object\r\n    */\r\n   constructor(sequenceNo: number=0) {\r\n\r\n      this._sequenceNo = sequenceNo;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get sequenceNo(): number {\r\n      return this._sequenceNo;\r\n   }\r\n   get type(): string {\r\n      return CallKeepAlive.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallKeepAlive) : boolean {\r\n\r\n      return ((this._sequenceNo === rhs._sequenceNo));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON () : any {\r\n\r\n      return {\r\n         __type: CallKeepAlive.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _sequenceNo: this._sequenceNo,\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallKeepAlive {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallKeepAlive.reviveDb(data.attributes);\r\n\r\n      return CallKeepAlive.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallKeepAlive {\r\n\r\n      return new CallKeepAlive(data._sequenceNo);\r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallData class\r\n//==============================//\r\nexport class CallData implements IStreamableFor<CallData> {\r\n\r\n   private _from: CallParticipation;\r\n   private _to: CallParticipation;\r\n   private _data: any;\r\n\r\n   static readonly __type = \"CallData\";\r\n\r\n   /**\r\n    * Create a CallData object - used when webRTC fails & data is shipped via server\r\n    * @param from - CallParticipation\r\n    * @param to - CallParticipation\r\n    * @param data - the data payload \r\n    */\r\n   constructor(from: CallParticipation, to: CallParticipation, data: any) {\r\n\r\n      this._from = from;\r\n      this._to = to;\r\n      this._data = data;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get from(): CallParticipation {\r\n      return this._from;\r\n   }\r\n   get to(): CallParticipation {\r\n      return this._to;\r\n   }\r\n   get data(): any {\r\n      return this._data;\r\n   }\r\n   get type(): string {\r\n      return CallData.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallData): boolean {\r\n\r\n      return ((this._from.equals(rhs._from)) &&\r\n         (this._to.equals(rhs._to)) &&\r\n         (this._data === rhs._data));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: CallData.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _from: this._from,\r\n            _to: this._to,\r\n            _data: JSON.stringify(this._data)\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallData {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallData.reviveDb(data.attributes);\r\n\r\n      return CallData.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallData {\r\n\r\n      var types = new StreamableTypes();\r\n\r\n      return new CallData(\r\n         CallParticipation.revive(data._from),\r\n         CallParticipation.revive(data._to),\r\n         types.reviveFromJSON(data._data));\r\n   };\r\n}\r\n\r\n//==============================//\r\n// CallDataBatched class\r\n//==============================//\r\nexport class CallDataBatched implements IStreamableFor<CallDataBatched> {\r\n\r\n   private _from: CallParticipation;\r\n   private _to: Array<CallParticipation>;\r\n   private _data: any;\r\n\r\n   static readonly __type = \"CallDataBatched\";\r\n\r\n   /**\r\n    * Create a CallDataBatched object - used when webRTC fails & data is shipped via server\r\n    * This class is used when data is to be delivered to possibly multiple participants\r\n    * @param from - CallParticipation\r\n    * @param to - CallParticipation - for this version, its an array.\r\n    * @param data - the data payload \r\n    */\r\n   constructor(from: CallParticipation, to: Array<CallParticipation>, data: any) {\r\n\r\n      this._from = from;\r\n      this._to = to;\r\n      this._data = data;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get from(): CallParticipation {\r\n      return this._from;\r\n   }\r\n   get to(): Array<CallParticipation> {\r\n      return this._to;\r\n   }\r\n   get data(): any {\r\n      return this._data;\r\n   }\r\n   get type(): string {\r\n      return CallData.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: CallDataBatched): boolean {\r\n\r\n      return ((this._from.equals(rhs._from)) &&\r\n         ((this._to as any).equals(rhs._to)) && // Uses the equals method from ArrayHook\r\n         this.data === rhs.data); \r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: CallDataBatched.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _from: this._from,\r\n            _to: this._to,\r\n            _data: JSON.stringify(this._data)\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): CallDataBatched {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return CallDataBatched.reviveDb(data.attributes);\r\n\r\n      return CallDataBatched.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): CallDataBatched {\r\n\r\n      // revive the list of targets\r\n      let revivedParticipations = new Array<CallParticipation>(data._to ? data._to.length: 0);\r\n      for (var i = 0; data._to && i < data._to.length; i++) {\r\n         revivedParticipations[i] = CallParticipation.revive(data._to[i]);\r\n      }\r\n\r\n      var types = new StreamableTypes();\r\n\r\n      return new CallDataBatched(\r\n         CallParticipation.revive(data._from),\r\n         revivedParticipations,\r\n         types.reviveFromJSON(data._data));\r\n   };\r\n}","/*! Copyright TXPCo, 2020, 2021 */\r\nexport class DateHook {\r\n   private static weekdays: Array<string>;\r\n   constructor() {\r\n   }\r\n\r\n   private static initialised: boolean = false;\r\n\r\n   static initialise(): void {\r\n      if (DateHook.initialised)\r\n         return;\r\n\r\n      DateHook.initialised = true;\r\n\r\n      //Create an array containing each day, starting with Sunday.\r\n      DateHook.weekdays = new Array<string>(\r\n         \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\r\n      );\r\n\r\n      // Warn if overriding existing method\r\n      if ((Date.prototype as any).getWeekDay)\r\n         console.warn(\"Warning: possible duplicate definition of Date.prototype.getWeekDay.\");\r\n\r\n      // attach the .getWeekDay method to Date's prototype to call it on any Date\r\n      (Date.prototype as any).getWeekDay = function () {\r\n\r\n         //Use the getDay() method to get the day.\r\n         var day = this.getDay();\r\n         // Return the element that corresponds to that index.\r\n         return DateHook.weekdays[day];\r\n      };\r\n   }\r\n}\r\n\r\nDateHook.initialise();\r\n\r\n","/*jslint white: false, indent: 3, maxerr: 1000 */\r\n/*global exports*/\r\n/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nexport enum EThreeStateSwitchEnum { 'On', 'Off', 'Indeterminate' };\r\nexport enum EThreeStateRagEnum { 'Red', 'Amber', 'Green' };\r\nexport enum EFourStateRagEnum { 'Red', 'Amber', 'Green', 'Indeterminate' };\r\n\r\n\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nexport function isEqual(value: any, other: any): boolean {\r\n\r\n   // Get the value type\r\n   var type = Object.prototype.toString.call(value);\r\n\r\n   // If the two objects are not the same type, return false\r\n   if (type !== Object.prototype.toString.call(other))\r\n      return false;\r\n\r\n   // If items are not an object or array, return false\r\n   if (['[object Array]', '[object Object]'].indexOf(type) < 0)\r\n      return false;\r\n\r\n   // Compare the length of the length of the two items\r\n   var valueLen = type === '[object Array]' ? value.length : Object.keys(value).length;\r\n   var otherLen = type === '[object Array]' ? other.length : Object.keys(other).length;\r\n   if (valueLen !== otherLen)\r\n      return false;\r\n\r\n   // Compare two items\r\n   var compare = function (item1, item2) {\r\n\r\n      // Get the object type\r\n      var itemType = Object.prototype.toString.call(item1);\r\n\r\n      // If an object or array, compare recursively\r\n      if (['[object Array]', '[object Object]'].indexOf(itemType) >= 0) {\r\n         if (!isEqual(item1, item2))\r\n            return false;\r\n      }\r\n\r\n      // Otherwise, do a simple comparison\r\n      else {\r\n\r\n         // If the two items are not the same type, return false\r\n         if (itemType !== Object.prototype.toString.call(item2))\r\n            return false;\r\n\r\n         // Else if it's a function, convert to a string and compare\r\n         // Otherwise, just compare\r\n         if (itemType === '[object Function]') {\r\n            if (item1.toString() !== item2.toString())\r\n               return false;\r\n         } else {\r\n            if (item1 !== item2)\r\n               return false;\r\n         }\r\n\r\n      }\r\n   };\r\n\r\n   // Compare properties\r\n   if (type === '[object Array]') {\r\n      for (var i = 0; i < valueLen; i++) {\r\n         if (compare(value[i], other[i]) === false) return false;\r\n      }\r\n   } else {\r\n      for (var key in value) {\r\n         if (value.hasOwnProperty(key)) {\r\n            if (compare(value[key], other[key]) === false) return false;\r\n         }\r\n      }\r\n   }\r\n\r\n   // If nothing failed, return true\r\n   return true;\r\n};\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nimport { IStreamableFor } from './Streamable';\r\n\r\nexport class Facility implements IStreamableFor<Facility>  {\r\n   private _id: any;\r\n   private _externalId: string;\r\n   private _name: string;\r\n   private _thumbnailUrl: string;\r\n   private _homepageUrl: string;\r\n\r\n   static readonly __type: string = \"Facility\";\r\n\r\n   /**\r\n    * Create a Person object\r\n    * @param _id - Mongo-DB assigned ID\r\n    * @param externalId - ID assigned by external system (like facebook)\r\n    * @param name - plain text user name\r\n    * @param thumbnailUrl - URL to thumbnail image\r\n    * @param lastAuthCode - provided by underlying identity system when user logs in\r\n    */\r\n   constructor(_id: any, externalId: string, name: string, thumbnailUrl: string, homepageUrl: string) {\r\n      this._id = _id;\r\n      this._externalId = externalId;\r\n      this._name = name;\r\n      this._thumbnailUrl = thumbnailUrl;\r\n      this._homepageUrl = homepageUrl;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get id(): any {\r\n      return this._id;\r\n   }\r\n   get externalId(): string {\r\n      return this._externalId;\r\n   }\r\n   get name(): string {\r\n      return this._name;\r\n   }\r\n   get thumbnailUrl(): string {\r\n      return this._thumbnailUrl;\r\n   }\r\n   get homepageUrl(): string {\r\n      return this._homepageUrl;\r\n   }\r\n   get type(): string {\r\n      return Facility.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: Facility): boolean {\r\n\r\n      return ((this._id === rhs._id) &&\r\n         (this._externalId === rhs._externalId) &&\r\n         (this._name === rhs._name) &&\r\n         (this._thumbnailUrl === rhs._thumbnailUrl) &&\r\n         (this._homepageUrl === rhs._homepageUrl));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: Facility.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _id: this._id,\r\n            _externalId: this._externalId,\r\n            _name: this._name,\r\n            _thumbnailUrl: this._thumbnailUrl,\r\n            _homepageUrl: this._homepageUrl\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): Facility {\r\n\r\n      // revice data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return Facility.reviveDb(data.attributes);\r\n      else\r\n         return Facility.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): Facility {\r\n\r\n      return new Facility(data._id,\r\n         data._externalId,\r\n         data._name,\r\n         data._thumbnailUrl,\r\n         data._homepageUrl);\r\n   };\r\n};\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// GymClock spec is a 'templae' for a clock - how log, wether to play music, and which music. \r\n// GymClockAction is a way to send the start, pause, stop list via Rpc\r\n// GymClockState is a class to represent the state of a running clock - is is started, stopped, paused etc, and if running, for how long. \r\n// GymClock is a running clock - created from a spec, then can start, stop, pause etc. \r\n\r\nimport { IStreamableFor } from './Streamable';\r\n\r\nexport enum EGymClockDuration { 'Five', 'Ten', 'Fifteen', 'Twenty' };\r\nexport enum EGymClockMusic { 'Uptempo', 'Midtempo', 'None' };\r\nexport enum EGymClockState { 'Stopped', 'CountingDown', 'Running', 'Paused' };\r\n\r\nconst countDownSeconds: number = 15;\r\n\r\n// Keep this function  declation up here in case an extra Enum is added above & this needs to change\r\nfunction calculateCountToSeconds (durationEnum) {\r\n   switch (durationEnum) {\r\n      case EGymClockDuration.Five:\r\n         return (countDownSeconds + 5 * 60);\r\n\r\n      default:\r\n      case EGymClockDuration.Ten:\r\n         return (countDownSeconds + 10 * 60);\r\n\r\n      case EGymClockDuration.Fifteen:\r\n         return (countDownSeconds + 15 * 60);\r\n\r\n      case EGymClockDuration.Twenty:\r\n         return (countDownSeconds + 20 * 60);\r\n\r\n   }\r\n};\r\n\r\n//==============================//\r\n// GymClockSpec class\r\n//==============================//\r\nexport class GymClockSpec implements IStreamableFor<GymClockSpec> {\r\n\r\n   private _durationEnum: EGymClockDuration;\r\n   private _musicEnum: EGymClockMusic;\r\n   private _musicUrl: string;\r\n\r\n   static readonly __type = \"GymClockSpec\";\r\n\r\n  /**\r\n   * Create a GymClockSpec object\r\n   * @param durationEnum - one of the enumeration objects (10, 15, 20, ...)\r\n   * @param musicEnum - one of the enumeration objects (Uptempo, Midtempo, none, ...)\r\n   */\r\n   constructor(durationEnum: EGymClockDuration = EGymClockDuration.Ten,\r\n      musicEnum: EGymClockMusic = EGymClockMusic.None) {\r\n\r\n      this._durationEnum = durationEnum;\r\n      this._musicEnum = musicEnum;\r\n      this._musicUrl = GymClockSpec.selectMusic(this._durationEnum, this._musicEnum);\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get durationEnum(): EGymClockDuration {\r\n      return this._durationEnum;\r\n   }\r\n   get musicEnum(): EGymClockMusic {\r\n      return this._musicEnum;\r\n   }\r\n   get musicUrl(): string {\r\n      return this._musicUrl;\r\n   }\r\n   get type(): string {\r\n      return GymClockSpec.__type;\r\n   }\r\n\r\n  /**\r\n   * test for equality - checks all fields are the same. \r\n   * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n   * @param rhs - the object to compare this one to.  \r\n   */\r\n   equals (rhs: GymClockSpec) : boolean {\r\n\r\n      return (this._durationEnum === rhs._durationEnum\r\n         && this._musicEnum === rhs._musicEnum\r\n         && this._musicUrl === rhs._musicUrl);\r\n   };\r\n\r\n   /**\r\n * Method that serializes to JSON \r\n */\r\n   toJSON () : any {\r\n\r\n      return {\r\n         __type: GymClockSpec.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _durationEnum: this._durationEnum,\r\n            _musicEnum: this._musicEnum,\r\n            _musicUrl: this._musicUrl\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): GymClockSpec {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return GymClockSpec.reviveDb(data.attributes);\r\n\r\n      return GymClockSpec.reviveDb(data);\r\n   }\r\n\r\n   static selectMusic(durationEnum: EGymClockDuration, musicEnum: EGymClockMusic): string {\r\n\r\n      var url: string;\r\n\r\n      if (musicEnum == EGymClockMusic.None) {\r\n         return null;\r\n      }\r\n      else {\r\n         if (musicEnum == EGymClockMusic.Uptempo) {\r\n            switch (durationEnum) {\r\n               case EGymClockDuration.Five:\r\n                  return '130-bpm-workout-V2 trimmed.mp3';\r\n\r\n               default:\r\n               case EGymClockDuration.Ten:\r\n                  return '10-Minute-Timer.mp3';\r\n\r\n               case EGymClockDuration.Fifteen:\r\n                  return '15-Minute-Timer.mp3';\r\n\r\n               case EGymClockDuration.Twenty:\r\n                  return '20-Minute-Timer.mp3';\r\n            }\r\n         }\r\n         else {\r\n            if (musicEnum == EGymClockMusic.Midtempo) {\r\n               switch (durationEnum) {\r\n                  case EGymClockDuration.Five:\r\n                     return '130-bpm-workout-V2 trimmed.mp3';\r\n\r\n                  default:\r\n                  case EGymClockDuration.Ten:\r\n                     return '130-bpm-workout-V2 trimmed.mp3';\r\n\r\n                  case EGymClockDuration.Fifteen:\r\n                     return '130-bpm-workout-V2 trimmed.mp3';\r\n\r\n                  case EGymClockDuration.Twenty:\r\n                     return '130-bpm-workout-V2 trimmed.mp3';\r\n               }\r\n            }\r\n         }\r\n      }\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): GymClockSpec {\r\n\r\n     return new GymClockSpec(data._durationEnum, data._musicEnum);\r\n   };\r\n}\r\n\r\n//==============================//\r\n// GymClockState class \r\n//==============================//\r\nexport class GymClockState implements IStreamableFor<GymClockState >  {\r\n\r\n   _stateEnum: EGymClockState;\r\n   _secondsCounted: number;\r\n\r\n   static readonly __type = \"GymClockState\";\r\n\r\n   /**\r\n    * Create a GymClockState object\r\n    */\r\n   constructor(stateEnum: EGymClockState, secondsIn: number) {\r\n\r\n      this._stateEnum = stateEnum;\r\n      this._secondsCounted = secondsIn;\r\n   }   \r\n\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get stateEnum(): EGymClockState {\r\n      return this._stateEnum;\r\n   }\r\n   get secondsCounted(): number {\r\n      return this._secondsCounted;\r\n   }\r\n   get type(): string {\r\n      return GymClockState.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: GymClockState): boolean {\r\n\r\n      return (this._stateEnum === rhs._stateEnum &&\r\n         this._secondsCounted === rhs._secondsCounted);\r\n   };\r\n\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON () : any {\r\n\r\n      return {\r\n         __type: GymClockState.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _stateEnum: this._stateEnum,\r\n            _secondsCounted: this._secondsCounted\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): GymClockState {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return GymClockState.reviveDb(data.attributes);\r\n\r\n      return GymClockState.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): GymClockState {\r\n\r\n      return new GymClockState(data._stateEnum, data._secondsCounted);\r\n   };\r\n}\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the LiveDocument architecture:\r\n// LiveChannelStub - contains a stub implementation of LiveChannel, short - circuits any streaming and just passes document & commands from publisher to subscriber in test harness.\r\n// LiveCommand - contains LiveCommandProcessor - maintains a log of commands, drives undo/redo, and manages publish/scrscribe connection to channels\r\n// LiveDocumentCentral - contains classes that aggregate creation of live documents. \r\n// LiveInterfaces - defines abstract interfaces for Document, Selection, Command, ...\r\n// LiveWorkout - contains a concrete implementation of a LiveDocument for the live workout app. \r\n// Conceptually, this architecture needs be thought of as:\r\n//    - Document, which is Streamable and can be sent to remote parties\r\n//    - a set of Commands, each of which are Streamable and can be sent to remote parties. A Command contains a Selection to which it is applied. \r\n//    - Master and Remote CommandProcessor. The Master applies commands and then sends a copy to all Remote CommandProcessors.\r\n// \r\n\r\n// This app, this component \r\nimport { IStreamable } from './Streamable';\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { CallParticipation } from './Call';\r\nimport { ILiveDocument, ICommand, ILiveDocumentChannel, ILiveDocumentChannelFactory } from './LiveInterfaces';\r\n\r\n// Stubbing for testing\r\nvar docInOut: ILiveDocumentChannel | null = null;\r\n\r\n// Stubbing for testing\r\nclass LiveChannelStub implements ILiveDocumentChannel {\r\n\r\n   types: StreamableTypes = new StreamableTypes;\r\n\r\n   constructor() {\r\n   }\r\n\r\n   // Override these for data from notifications \r\n   onNewCallParticipation: ((ev: IStreamable) => any) = function (ev) { };\r\n   onCommandApply: ((ev: ICommand) => void) = function (ev) { };\r\n   onCommandReverse: (() => void) = function () { };\r\n   onDocument: ((ev: ILiveDocument) => void) = function (ev) { };\r\n\r\n   private onCommandApplyInner(command: string): void {\r\n      if (this.onCommandApply)\r\n         this.onCommandApply(this.types.reviveFromJSON (command));\r\n   }\r\n   private onCommandReverseInner(): void {\r\n      if (this.onCommandReverse)\r\n         this.onCommandReverse();\r\n   }\r\n   private onDocumentInner(document: string): void {\r\n      if (this.onDocument)\r\n         this.onDocument(this.types.reviveFromJSON (document));\r\n   }\r\n\r\n   sendDocumentTo(recipient: CallParticipation, document: ILiveDocument): void {\r\n      this.onDocumentInner(JSON.stringify (document));\r\n   }\r\n   broadcastCommandApply(command: ICommand): void {\r\n      this.onCommandApplyInner(JSON.stringify(command));\r\n   }\r\n   broadcastCommandReverse(): void {\r\n      this.onCommandReverseInner();\r\n   }\r\n}\r\n\r\nexport class LiveDocumentChannelFactoryStub implements ILiveDocumentChannelFactory {\r\n\r\n   constructor() {\r\n   }\r\n\r\n   createConnectionIn(): ILiveDocumentChannel {\r\n      if (!docInOut)\r\n         docInOut = new LiveChannelStub ();\r\n      return docInOut;\r\n   }\r\n\r\n   createConnectionOut(): ILiveDocumentChannel {\r\n      if (!docInOut)\r\n         docInOut = new LiveChannelStub ();\r\n      return docInOut;\r\n   }\r\n}\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the LiveDocument architecture:\r\n// LiveChannelStub - contains a stub implementation of LiveChannel, short - circuits any streaming and just passes document & commands from publisher to subscriber in test harness.\r\n// LiveCommand - contains LiveCommandProcessor - maintains a log of commands, drives undo/redo, and manages publish/scrscribe connection to channels\r\n// LiveDocumentCentral - contains classes that aggregate creation of live documents. \r\n// LiveInterfaces - defines abstract interfaces for Document, Selection, Command, ...\r\n// LiveWorkout - contains a concrete implementation of a LiveDocument for the live workout app. \r\n// Conceptually, this architecture needs be thought of as:\r\n//    - Document, which is Streamable and can be sent to remote parties\r\n//    - a set of Commands, each of which are Streamable and can be sent to remote parties. A Command contains a Selection to which it is applied. \r\n//    - CommandProcessor. The Master applies commands and then sends a copy to all Remote CommandProcessors.\r\n// \r\n\r\n// This app, this component \r\nimport { IStreamableFor } from './Streamable';\r\nimport { ILiveDocument, ICommand, ICommandProcessor, ILiveDocumentChannel } from './LiveInterfaces';\r\n\r\nexport class LiveCommandProcessor implements ICommandProcessor {\r\n\r\n   private _document: ILiveDocument;\r\n   private _channel: ILiveDocumentChannel | undefined;\r\n   private _outbound: boolean | undefined;\r\n   private _commands: Array<ICommand>;\r\n   private _lastCommandIndex: number = -1;\r\n   private _changeListeners: Array<Function>;\r\n\r\n   constructor(document: ILiveDocument, outbound?: boolean, channel?: ILiveDocumentChannel) {\r\n      this._document = document;\r\n      this._channel = channel;\r\n      this._outbound = outbound;\r\n      this._commands = new Array<ICommand>();\r\n      this.invalidateIndex();\r\n      this._changeListeners = new Array<Function>();\r\n\r\n      if (outbound !== undefined && (!outbound && channel)) {\r\n         channel.onCommandApply = this.onCommandApply.bind(this);\r\n         channel.onCommandReverse = this.onCommandReverse.bind(this);\r\n         channel.onDocument = this.onDocument.bind(this);\r\n      }\r\n   }\r\n\r\n   addChangeListener(fn: Function): void {\r\n      this._changeListeners.push(fn);\r\n   };\r\n\r\n   adoptAndApply (command: ICommand): void {\r\n\r\n      if (!this.isValidIndex()) {\r\n         // This case is the first command since a new document\r\n         this._lastCommandIndex = 0;\r\n         this._commands.unshift (command);\r\n      } else {\r\n         // If we have undone a series of commands, need to throw away irrelevant ones & put the new command at the head\r\n         if (this._lastCommandIndex != 0) {\r\n            this._commands = this._commands.splice(this._lastCommandIndex);\r\n         }\r\n         this._commands.unshift(command);\r\n      }\r\n\r\n      // Apply the comment\r\n      command.applyTo(this._document);\r\n\r\n      // Broadcast to remote listeners\r\n      if (this._outbound !== undefined && this._channel && this._outbound)\r\n         this._channel.broadcastCommandApply(command);\r\n\r\n      // notify local listeners\r\n      if (this._changeListeners) {\r\n         for (var i = 0; i < this._changeListeners.length; i++) {\r\n            this._changeListeners[i](this._document, command);\r\n         }\r\n      }\r\n   }\r\n\r\n   canUndo(): boolean {\r\n      // can undo if we have anything in the list and we are not at the end\r\n      if (this._commands.length > 0 && this.isValidIndex() && this._lastCommandIndex < this._commands.length) {\r\n         return (this._commands[this._lastCommandIndex].canReverse());\r\n      }\r\n      else\r\n         return false;\r\n   }\r\n\r\n   canRedo(): boolean {\r\n      // can redo if we have anything in the list and we are not at the start\r\n      if (this._commands.length > 0 && this.isValidIndex() && this._lastCommandIndex > 0)\r\n         return true;\r\n      else\r\n         return false;\r\n   }\r\n\r\n   undo(): void {\r\n\r\n      if (this.canUndo()) {\r\n         // move forward one step after undoing - opposite of 'redo' \r\n         this._commands[this._lastCommandIndex].reverseFrom(this._document);\r\n         if (this._channel && this._outbound)\r\n            this._channel.broadcastCommandReverse(this._commands[this._lastCommandIndex]);\r\n         this._lastCommandIndex++;\r\n      }\r\n   }\r\n\r\n   redo(): void {\r\n      if (this.canRedo()) {\r\n         // move back one step before applying - opposite of 'undo' \r\n         this._lastCommandIndex--;\r\n         this._commands[this._lastCommandIndex].applyTo(this._document);\r\n         if (this._channel && this._outbound)\r\n            this._channel.broadcastCommandApply(this._commands[this._lastCommandIndex]);\r\n      }\r\n   }\r\n\r\n   clearCommands(): void {\r\n      this._commands = new Array<ICommand>();\r\n      this.invalidateIndex(); \r\n   }\r\n\r\n   private onCommandApply(command: ICommand): void {\r\n      this.adoptAndApply(command);\r\n   }\r\n\r\n   private onCommandReverse(command: ICommand): void {\r\n      this.undo();\r\n   }\r\n\r\n   private onDocument (document: ILiveDocument): void {\r\n      this._document.assign(document);\r\n      this.clearCommands();\r\n\r\n      // notify local listeners, command is NULL but we send the entire document\r\n      if (this._changeListeners) {\r\n         for (var i = 0; i < this._changeListeners.length; i++) {\r\n            this._changeListeners[i](this._document);\r\n         }\r\n      }\r\n   }\r\n\r\n   private invalidateIndex(): void {\r\n      this._lastCommandIndex = -1;\r\n   }\r\n   private isValidIndex(): boolean {\r\n      return (this._lastCommandIndex != -1);\r\n   }\r\n}\r\n\r\n// Streamable object that is sent to instruct an 'undo'\r\nexport class LiveUndoCommand implements IStreamableFor<LiveUndoCommand> {\r\n\r\n   private _sequenceNo: number;\r\n\r\n   static readonly __type = \"LiveUndoCommand\";\r\n\r\n   /**\r\n    * Create a LiveUndoCommand object\r\n    */\r\n   constructor(sequenceNo: number = 0) {\r\n\r\n      this._sequenceNo = sequenceNo;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get sequenceNo(): number {\r\n      return this._sequenceNo;\r\n   }\r\n   get type(): string {\r\n      return LiveUndoCommand.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: LiveUndoCommand): boolean {\r\n\r\n      return ((this._sequenceNo === rhs._sequenceNo));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): any {\r\n\r\n      return {\r\n         __type: LiveUndoCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _sequenceNo: this._sequenceNo,\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revive from \r\n    */\r\n   static revive(data: any): LiveUndoCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveUndoCommand.reviveDb(data.attributes);\r\n\r\n      return LiveUndoCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revive from \r\n   */\r\n   static reviveDb(data: any): LiveUndoCommand {\r\n\r\n      return new LiveUndoCommand(data._sequenceNo);\r\n   };\r\n}\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the LiveDocument architecture:\r\n// LiveChannelStub - contains a stub implementation of LiveChannel, short - circuits any streaming and just passes document & commands from publisher to subscriber in test harness.\r\n// LiveCommand - contains LiveCommandProcessor - maintains a log of commands, drives undo/redo, and manages publish/scrscribe connection to channels\r\n// LiveDocumentCentral - contains classes that aggregate creation of live documents. \r\n// LiveInterfaces - defines abstract interfaces for Document, Selection, Command, ...\r\n// LiveWorkout - contains a concrete implementation of a LiveDocument for the live workout app. \r\n// Conceptually, this architecture needs be thought of as:\r\n//    - Document, which is Streamable and can be sent to remote parties\r\n//    - a set of Commands, each of which are Streamable and can be sent to remote parties. A Command contains a Selection to which it is applied. \r\n//    - CommandProcessor. The Master applies commands and then sends a copy to all Remote CommandProcessors.\r\n// \r\n\r\n// This app, this component \r\nimport { IStreamable } from './Streamable';\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { CallParticipation } from './Call';\r\nimport { ILiveDocumentFactory, ILiveDocumentChannelFactory, ILiveDocument, ICommand, ICommandProcessor, ILiveDocumentChannel } from './LiveInterfaces';\r\nimport { Person } from './Person';\r\n\r\nclass LiveDocumentConnection {\r\n\r\n   _localPerson: Person;\r\n   _localCallParticipation: CallParticipation;\r\n   _document: ILiveDocument;\r\n   _commandProcessor: ICommandProcessor;\r\n   _channel: ILiveDocumentChannel;\r\n\r\n   constructor(localPerson: Person,\r\n      localCallParticipation,\r\n      outbound: boolean,\r\n      channelFactory: ILiveDocumentChannelFactory,\r\n      documentFactory: ILiveDocumentFactory) {\r\n\r\n      this._localPerson = localPerson;\r\n      this._localCallParticipation = localCallParticipation;\r\n\r\n      this._channel = outbound ? channelFactory.createConnectionOut() : channelFactory.createConnectionIn();\r\n      this._document = documentFactory.createLiveDocument(outbound, this._channel);\r\n      this._commandProcessor = this._document.createCommandProcessor();\r\n\r\n      // If we are outbound, when there is a new joiner, send them the document\r\n      if (outbound) {\r\n         var self: LiveDocumentConnection = this;\r\n         this._channel.onNewCallParticipation = function (ev: CallParticipation) {\r\n            self.channel.sendDocumentTo(ev, self._document);\r\n         };\r\n      }\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' & some 'setters' for private variables\r\n   */\r\n   get localCallParticipation(): CallParticipation {\r\n      return this._localCallParticipation;\r\n   }\r\n   get localPerson(): Person {\r\n      return this._localPerson;\r\n   }\r\n   get document(): ILiveDocument {\r\n      return this._document;\r\n   }\r\n   get channel(): ILiveDocumentChannel {\r\n      return this._channel;\r\n   }\r\n   get commandProcessor(): ICommandProcessor {\r\n      return this._commandProcessor;\r\n   }\r\n}\r\n\r\nexport class LiveDocumentMaster extends LiveDocumentConnection {\r\n\r\n   constructor(person: Person,\r\n      localCallParticipation,\r\n      channelFactory: ILiveDocumentChannelFactory,\r\n      documentFactory: ILiveDocumentFactory) {\r\n\r\n      super(person, localCallParticipation, true, channelFactory, documentFactory);\r\n   }\r\n}\r\n\r\nexport class LiveDocumentRemote extends LiveDocumentConnection {\r\n\r\n   constructor(person: Person,\r\n      localCallParticipation,\r\n      channelFactory: ILiveDocumentChannelFactory,\r\n      documentFactory: ILiveDocumentFactory) {\r\n\r\n      super(person, localCallParticipation, false, channelFactory, documentFactory);\r\n   }\r\n}\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the LiveDocument architecture:\r\n// LiveChannelStub - contains a stub implementation of LiveChannel, short - circuits any streaming and just passes document & commands from publisher to subscriber in test harness.\r\n// LiveCommand - contains LiveCommandProcessor - maintains a log of commands, drives undo/redo, and manages publish/scrscribe connection to channels\r\n// LiveDocumentCentral - contains classes that aggregate creation of live documents. \r\n// LiveInterfaces - defines abstract interfaces for Document, Selection, Command, ...\r\n// LiveWorkout - contains a concrete implementation of a LiveDocument for the live workout app. \r\n// Conceptually, this architecture needs be thought of as:\r\n//    - Document, which is Streamable and can be sent to remote parties\r\n//    - a set of Commands, each of which are Streamable and can be sent to remote parties. A Command contains a Selection to which it is applied. \r\n//    - CommandProcessor. The Master applies commands and then sends a copy to all Remote CommandProcessors.\r\n// \r\n\r\n// This app, this component \r\n\r\nimport { LoggerFactory, ELoggerType } from './Logger';\r\nimport { IStreamable } from './Streamable'\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { Person, PersonAttendance } from './Person';\r\nimport { CallParticipation } from './Call';\r\nimport { StoredWorkoutState } from './LocalStore';\r\nimport { ILiveDocument, ICommand, ISelection, ICommandProcessor, \r\n         ILiveDocumentChannel, ILiveDocumentChannelFactory, ILiveDocumentFactory} from './LiveInterfaces';\r\nimport { LiveCommandProcessor, LiveUndoCommand} from './LiveCommand';\r\nimport { PeerConnection } from './PeerConnection';\r\nimport { EGymClockDuration, EGymClockMusic, EGymClockState, GymClockSpec, GymClockState } from './GymClock';\r\n\r\nvar logger = new LoggerFactory().createLogger(ELoggerType.Client, true);\r\n\r\nexport enum EViewState { 'Whiteboard', 'CoachVideo', 'ParticipaintVideo' };\r\n\r\n////////////////////////////////////////\r\n// LiveWorkout - class to represents the entire state of a workout. \r\n// Contains the workout brief(whiteboard), results, clock spec, clock state, call state.\r\n////////////////////////////////////////\r\nexport class LiveWorkout implements ILiveDocument {\r\n\r\n   static readonly __type: string = \"LiveWorkout\";\r\n\r\n   private _whiteboardText: string;\r\n   private _resultsText: string;\r\n   private _clockSpec: GymClockSpec;\r\n   private _clockState: GymClockState;\r\n   private _attendances: Array<PersonAttendance>;\r\n   private _viewState: EViewState;\r\n   private _channel: ILiveDocumentChannel | undefined;\r\n   private _outbound: boolean | undefined;\r\n\r\n   constructor(whiteboardText: string,\r\n      resultsText: string,\r\n      clockSpec: GymClockSpec,\r\n      clockState: GymClockState,\r\n      attendances: Array<PersonAttendance>,\r\n      viewState: EViewState,\r\n      outbound?: boolean, channel?: ILiveDocumentChannel) {\r\n      this._outbound = outbound;\r\n      if (channel)\r\n         this._channel = channel;\r\n      this._whiteboardText = whiteboardText;\r\n      this._resultsText = resultsText;\r\n      this._clockSpec = clockSpec;\r\n      this._clockState = clockState;      \r\n      this._attendances = attendances.splice(0);\r\n      this._viewState = viewState;\r\n   }\r\n\r\n   createCommandProcessor(): ICommandProcessor {\r\n      return new LiveCommandProcessor(this, this._outbound, this._channel);\r\n   }\r\n\r\n   // Getter and setter for whitebard text\r\n   get whiteboardText (): string {\r\n      return this._whiteboardText;\r\n   }\r\n   set whiteboardText(whiteboardText: string) {\r\n      this._whiteboardText = whiteboardText;\r\n   }\r\n   // Getter and setter for results text\r\n   get resultsText(): string {\r\n      return this._resultsText;\r\n   }\r\n   set resultsText(resultsText: string) {\r\n      this._resultsText = resultsText;\r\n   }\r\n   // Getter and setter for clock spec\r\n   get clockSpec(): GymClockSpec {\r\n      return this._clockSpec;\r\n   }\r\n   set clockSpec(clockSpec: GymClockSpec) {\r\n      this._clockSpec = clockSpec;\r\n   }\r\n   // Getter and setter for clock state\r\n   get clockState(): GymClockState {\r\n      return this._clockState;\r\n   }\r\n   set clockState(clockState: GymClockState) {\r\n      this._clockState = clockState;\r\n   }\r\n   // Getter and setter for attendance\r\n   get attendances(): Array<PersonAttendance> {\r\n      return this._attendances;\r\n   }\r\n   addAttendance(attendance: PersonAttendance): void {\r\n      this._attendances.push(attendance);\r\n   }\r\n   removeAttendance(attendance: PersonAttendance): void {\r\n      for (var i = 0; i < this._attendances.length; i++) {\r\n         if (this._attendances[i].equals(attendance)) {\r\n            this.attendances.splice(i);\r\n            break;\r\n         }\r\n      }\r\n   }\r\n   // Getter and setter for view state\r\n   get viewState(): EViewState {\r\n      return this._viewState;\r\n   }\r\n   set viewState(viewState: EViewState) {\r\n      this._viewState = viewState;\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveWorkout.__type;\r\n   }\r\n\r\n   // test for equality\r\n   // Only tests content fields - excludes channel etc\r\n   equals (rhs: ILiveDocument) : boolean {\r\n\r\n      if (rhs.type === this.type) {\r\n         var workout: LiveWorkout = (rhs as LiveWorkout);\r\n         return (this._whiteboardText === workout._whiteboardText &&\r\n            this._resultsText === workout._resultsText &&\r\n            this._clockSpec.equals(workout._clockSpec) &&\r\n            this._clockState.equals(workout._clockState) &&\r\n            (this._attendances as any).equals(workout._attendances) &&\r\n            this._viewState === workout._viewState);\r\n      }\r\n      else\r\n         return false;\r\n   }\r\n\r\n   assign (rhs: ILiveDocument) : void {\r\n\r\n      // This is called if an entire new document gets sent e.g are just joining meeting\r\n      // or had become detached\r\n      if (rhs.type === this.type) {\r\n         var workout: LiveWorkout = (rhs as LiveWorkout);\r\n         this._whiteboardText = workout._whiteboardText;\r\n         this._resultsText = workout._resultsText;\r\n         this._clockSpec = workout._clockSpec;\r\n         this._clockState = workout._clockState;\r\n         this._attendances = workout._attendances.splice(0);\r\n         this._viewState = workout._viewState;\r\n      }\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveWorkout.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _whiteboardText: this._whiteboardText,\r\n            _resultsText: this._resultsText,\r\n            _clockSpec: this._clockSpec,\r\n            _clockState: this._clockState,\r\n            _attendances: this._attendances,\r\n            _viewState: this._viewState\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveWorkout {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveWorkout.reviveDb(data.attributes);\r\n      else\r\n         return LiveWorkout.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   * Note: this ignores the 'channel' object. It is used by the channel to resurrect an incoming document when we are synchronising state,\r\n   *  then the channel calls 'assign' on the current version to copy this state across.\r\n   */\r\n   static reviveDb(data: any): LiveWorkout {\r\n\r\n      let attendances = new Array<PersonAttendance>(data._attendances.length);\r\n      for (var i = 0; i < data._attendances.length; i++) {\r\n         attendances[i] = PersonAttendance.revive(data._attendances[i]);\r\n      }\r\n\r\n      return new LiveWorkout(data._whiteboardText,\r\n         data._resultsText,\r\n         GymClockSpec.revive(data._clockSpec),\r\n         GymClockState.revive(data._clockState),\r\n         attendances,\r\n         data._viewState);\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveWhiteboardCommand - class to represents the whiteboard within a workout. \r\n////////////////////////////////////////\r\nexport class LiveWhiteboardCommand implements ICommand {\r\n\r\n   private _selection: ISelection;\r\n   private _next: string;\r\n   private _prior: string;\r\n\r\n   static readonly __type: string = \"LiveWhiteboardCommand\";\r\n\r\n   constructor(next: string, prior: string) {\r\n      this._selection = new LiveWhiteboardSelection(); // This command always has the same selection - the entire whiteboard. \r\n      this._next = next;\r\n      this._prior = prior;                    // Caller has to make sure this === current state at time of calling.\r\n                                              // Otherwise can lead to problems when commands are copied around between sessions\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveWhiteboardCommand.__type;\r\n   }\r\n\r\n   selection(): ISelection {\r\n      return this._selection;\r\n   }\r\n\r\n   applyTo(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type === LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n\r\n         // Verify that the document has not changed since the command was created. \r\n         // In theory benigh since all commands are idempotent, but must be a logic error, so log it.\r\n         if (!(this._prior === wo.whiteboardText)) {\r\n            logger.logError(LiveWhiteboardCommand.__type, 'applyTo',\r\n               'Error, current document state != prior from command:' + this._prior, wo.whiteboardText);\r\n         }\r\n         wo.whiteboardText = this._next;\r\n\r\n         // save in local cache\r\n         new StoredWorkoutState().saveWorkout(wo.whiteboardText);\r\n      }\r\n   }\r\n\r\n   reverseFrom(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type == LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.whiteboardText = this._prior;\r\n      }\r\n   }\r\n\r\n   canReverse(): boolean {\r\n      return true;\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveWhiteboardCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _next: this._next,\r\n            _prior: this._prior\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveWhiteboardCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveWhiteboardCommand.reviveDb(data.attributes);\r\n      else\r\n         return LiveWhiteboardCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): LiveWhiteboardCommand {\r\n\r\n      return new LiveWhiteboardCommand(data._next, data._prior);\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveResultsCommand - class to represent command on the whiteboard within a workout.\r\n////////////////////////////////////////\r\nexport class LiveResultsCommand implements ICommand {\r\n\r\n   private _selection: ISelection;\r\n   private _next: string;\r\n   private _prior: string;\r\n\r\n   static readonly __type: string = \"LiveResultsCommand\";\r\n\r\n   constructor(next: string, prior: string) {\r\n      this._selection = new LiveResultsSelection(); // This command always has the same selection - the entire whiteboard. \r\n      this._next = next;\r\n      this._prior = prior;                 // Caller has to make sure this === current state at time of calling.\r\n      // Otherwise can lead to problems when commands are copied around between sessions\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveResultsCommand.__type;\r\n   }\r\n\r\n   selection(): ISelection {\r\n      return this._selection;\r\n   }\r\n\r\n   applyTo(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type === LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n\r\n         // Verify that the document has not changed since the command was created\r\n         // In theory benigh since all commands are idempotent, but must be a logic error, so log it.\r\n         if (! (this._prior === wo.resultsText)) {\r\n            logger.logError(LiveResultsCommand.__type, 'applyTo',\r\n               'Error, current document state != prior from command:' + this._prior, wo.resultsText);\r\n         }\r\n         wo.resultsText = this._next;\r\n      }\r\n   }\r\n\r\n   reverseFrom(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type == LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.resultsText = this._prior;\r\n      }\r\n   }\r\n\r\n   canReverse(): boolean {\r\n      return true;\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveResultsCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _next: this._next,\r\n            _prior: this._prior\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveResultsCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveResultsCommand.reviveDb(data.attributes);\r\n      else\r\n         return LiveResultsCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): LiveResultsCommand {\r\n\r\n      return new LiveResultsCommand(data._next, data._prior);\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveClockSpecCommand - class to represents command on the clock spec within a workout.\r\n////////////////////////////////////////\r\nexport class LiveClockSpecCommand implements ICommand {\r\n\r\n   private _selection: ISelection;\r\n   private _next: GymClockSpec;\r\n   private _prior: GymClockSpec;\r\n\r\n   static readonly __type: string = \"LiveClockSpecCommand\";\r\n\r\n   constructor(next: GymClockSpec, prior: GymClockSpec) {\r\n      this._selection = new LiveClockSpecSelection(); // This command always has the same selection - the entire whiteboard. \r\n      this._next = next;\r\n      this._prior = prior;                 // Caller has to make sure this === current state at time of calling.\r\n      // Otherwise can lead to problems when commands are copied around between sessions\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveClockSpecCommand.__type;\r\n   }\r\n\r\n   selection(): ISelection {\r\n      return this._selection;\r\n   }\r\n\r\n   applyTo(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type === LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n\r\n         // Verify that the document has not changed since the command was created\r\n         // In theory benigh since all commands are idempotent, but must be a logic error, so log it.\r\n         if (! this._prior.equals(wo.clockSpec)) {\r\n            logger.logError(LiveClockSpecCommand.__type, 'applyTo',\r\n               'Error, current document state != prior from command:' + this._prior, wo.clockSpec);\r\n         }\r\n         wo.clockSpec = this._next;\r\n      }\r\n   }\r\n\r\n   reverseFrom(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type == LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.clockSpec = this._prior;\r\n      }\r\n   }\r\n\r\n   canReverse(): boolean {\r\n      return true;\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveClockSpecCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _next: this._next,\r\n            _prior: this._prior\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveClockSpecCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveClockSpecCommand.reviveDb(data.attributes);\r\n      else\r\n         return LiveClockSpecCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): LiveClockSpecCommand {\r\n\r\n      return new LiveClockSpecCommand(GymClockSpec.revive(data._next),\r\n         GymClockSpec.revive(data._prior));\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveClockStateCommand - class to represents command on the clock state within a workout.\r\n////////////////////////////////////////\r\nexport class LiveClockStateCommand implements ICommand {\r\n\r\n   private _selection: ISelection;\r\n   private _next: GymClockState;\r\n   private _prior: GymClockState;\r\n\r\n   static readonly __type: string = \"LiveClockStateCommand\";\r\n\r\n   constructor(next: GymClockState, prior: GymClockState) {\r\n      this._selection = new LiveClockStateSelection(); // This command always has the same selection - the entire whiteboard.\r\n      this._next = next;\r\n      this._prior = prior;                 // Caller has to make sure this === current state at time of calling.\r\n      // Otherwise can lead to problems when commands are copied around between sessions\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveClockStateCommand.__type;\r\n   }\r\n\r\n   selection(): ISelection {\r\n      return this._selection;\r\n   }\r\n\r\n   applyTo(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type === LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n\r\n         // Verify that the document has not changed since the command was created\r\n         // In theory benigh since all commands are idempotent, but must be a logic error, so log it.\r\n         // Note we only compare state, since the tick count can drift between participants\r\n         if (this._prior.stateEnum !== wo.clockState.stateEnum) {\r\n            logger.logError(LiveClockStateCommand.__type, 'applyTo',\r\n               'Error, current document state != prior from command:' + this._prior.stateEnum, wo.clockState.stateEnum);\r\n         }\r\n         wo.clockState = this._next;\r\n      }\r\n   }\r\n\r\n   reverseFrom(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type == LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.clockState = this._prior;\r\n      }\r\n   }\r\n\r\n   canReverse(): boolean {\r\n      return true;\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveClockStateCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _next: this._next,\r\n            _prior: this._prior\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveClockStateCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveClockStateCommand.reviveDb(data.attributes);\r\n      else\r\n         return LiveClockStateCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): LiveClockStateCommand {\r\n\r\n      return new LiveClockStateCommand(GymClockState.revive(data._next),\r\n         GymClockState.revive(data._prior));\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveAttendanceCommand - class to represent command on the participation list within a workout.\r\n////////////////////////////////////////\r\nexport class LiveAttendanceCommand implements ICommand {\r\n\r\n   private _selection: ISelection;\r\n   private _next: PersonAttendance;\r\n   private _prior: PersonAttendance;\r\n\r\n   static readonly __type: string = \"LiveAttendanceCommand\";\r\n\r\n   constructor(next: PersonAttendance, prior: PersonAttendance) {\r\n      this._selection = new LiveAttendanceSelection(); // This command always has the same selection - the entire attendance list.\r\n      this._next = next;\r\n      this._prior = prior;                 // Caller has to make sure this === current state at time of calling.\r\n      // Otherwise can lead to problems when commands are copied around between sessions\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveAttendanceCommand.__type;\r\n   }\r\n\r\n   selection(): ISelection {\r\n      return this._selection;\r\n   }\r\n\r\n   applyTo(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type === LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.addAttendance(this._next); \r\n      }\r\n   }\r\n\r\n   reverseFrom(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type == LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.removeAttendance(this._next);\r\n      }\r\n   }\r\n\r\n   canReverse(): boolean {\r\n      return true;\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveAttendanceCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _next: this._next,\r\n            _prior: this._prior\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveAttendanceCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveAttendanceCommand.reviveDb(data.attributes);\r\n      else\r\n         return LiveAttendanceCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): LiveAttendanceCommand {\r\n\r\n      return new LiveAttendanceCommand(PersonAttendance.revive (data._next),\r\n         PersonAttendance.revive(data._prior));\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveViewStateCommand - class to represents command on the view state within a workout.\r\n////////////////////////////////////////\r\nexport class LiveViewStateCommand implements ICommand {\r\n\r\n   private _selection: ISelection;\r\n   private _next: EViewState;\r\n   private _prior: EViewState;\r\n\r\n   static readonly __type: string = \"LiveViewStateCommand\";\r\n\r\n   constructor(next: EViewState, prior: EViewState) {\r\n      this._selection = new LiveViewStateSelection(); // This command always has the same selection - the entire whiteboard.\r\n      this._next = next;\r\n      this._prior = prior;                 // Caller has to make sure this === current state at time of calling.\r\n      // Otherwise can lead to problems when commands are copied around between sessions\r\n   }\r\n\r\n   // type is read only\r\n   get type(): string {\r\n      return LiveViewStateCommand.__type;\r\n   }\r\n\r\n   selection(): ISelection {\r\n      return this._selection;\r\n   }\r\n\r\n   applyTo(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type === LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n\r\n         // Verify that the document has not changed since the command was created\r\n         // In theory benigh since all commands are idempotent, but must be a logic error, so log it.\r\n         // Note we only compare state, since the tick count can drift between participants\r\n         if (this._prior !== wo.viewState) {\r\n            logger.logError(LiveViewStateCommand.__type, 'applyTo',\r\n               'Error, current document state != prior from command:' + this._prior, wo.viewState);\r\n         }\r\n         wo.viewState = this._next;\r\n      }\r\n   }\r\n\r\n   reverseFrom(document: ILiveDocument): void {\r\n      // Since we downcast, need to check type\r\n      if (document.type == LiveWorkout.__type) {\r\n         var wo: LiveWorkout = (document as LiveWorkout);\r\n         wo.viewState = this._prior;\r\n      }\r\n   }\r\n\r\n   canReverse(): boolean {\r\n      return true;\r\n   }\r\n\r\n   /**\r\n       * Method that serializes to JSON \r\n       */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: LiveViewStateCommand.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _next: this._next,\r\n            _prior: this._prior\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): LiveViewStateCommand {\r\n\r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return LiveViewStateCommand.reviveDb(data.attributes);\r\n      else\r\n         return LiveViewStateCommand.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): LiveViewStateCommand {\r\n\r\n      return new LiveViewStateCommand (data._next,\r\n                                       data._prior);\r\n   };\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveWhiteboardSelection - Class to represent the 'selection' of the whiteboard within a Workout document.\r\n////////////////////////////////////////\r\nexport class LiveWhiteboardSelection implements ISelection {\r\n\r\n   constructor() {\r\n   }\r\n\r\n   type(): string {\r\n      return \"LiveWhiteboardSelection\";\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveResultsSelection - Class to represent the 'selection' of the results within a Workout document.\r\n////////////////////////////////////////\r\nexport class LiveResultsSelection implements ISelection {\r\n\r\n   constructor() {\r\n   }\r\n\r\n   type(): string {\r\n      return \"LiveResultsSelection\";\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveClockSpecSelection - Class to represent the 'selection' of the clock spec within a Workout document.\r\n////////////////////////////////////////\r\nexport class LiveClockSpecSelection implements ISelection {\r\n\r\n   constructor() {\r\n   }\r\n\r\n   type(): string {\r\n      return \"LiveClockSpecSelection\";\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveClockStateSelection - Class to represent the 'state' of the clock within a Workout document.\r\n////////////////////////////////////////\r\nexport class LiveClockStateSelection implements ISelection {\r\n\r\n   constructor() {\r\n   }\r\n\r\n   type(): string {\r\n      return \"LiveClockStateSelection\";\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveViewStateSelection - Class to represent the 'selection' of the view within a Workout document.\r\n////////////////////////////////////////\r\nexport class LiveViewStateSelection implements ISelection {\r\n\r\n   constructor() {\r\n   }\r\n\r\n   type(): string {\r\n      return \"LiveViewStateSelection\";\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveParticipationListSelection - Class to represent the 'state' of the partipation list within a Workout document.\r\n////////////////////////////////////////\r\nexport class LiveAttendanceSelection implements ISelection {\r\n\r\n   LiveAttendanceSelection() {\r\n   }\r\n\r\n   type(): string {\r\n      return \"LiveParticipationListSelection\";\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveWorkoutChannelPeer - Implemntation of ILiveDocumentChannel over RTC/peer architecture\r\n////////////////////////////////////////\r\nclass LiveWorkoutChannelPeer implements ILiveDocumentChannel {\r\n\r\n   _types: StreamableTypes = new StreamableTypes;\r\n   _peer: PeerConnection;\r\n   _document: LiveWorkout;\r\n\r\n   constructor(peer: PeerConnection) {\r\n      this._peer = peer;\r\n      peer.addRemoteDataListener(this.onData.bind(this));\r\n   }\r\n\r\n   // Override these for data from notifications \r\n   onNewCallParticipation: ((ev: IStreamable) => any) = function (ev) { };\r\n   onCommandApply: ((ev: ICommand) => void) = function (ev) { };\r\n   onCommandReverse: (() => void) = function () { };\r\n   onDocument: ((ev: ILiveDocument) => void) = function (ev) { };\r\n\r\n   onData(ev: IStreamable) {\r\n      if (this._peer.isEdgeOnly()) {\r\n         // Edge nodes listen for document updates\r\n         if (ev.type === LiveWorkout.__type) {\r\n            this.onDocument(ev as LiveWorkout);\r\n         }\r\n         if (ev.type === LiveWhiteboardCommand.__type) {\r\n            this.onCommandApply(ev as LiveWhiteboardCommand);\r\n         }\r\n         if (ev.type === LiveResultsCommand.__type) {\r\n            this.onCommandApply(ev as LiveResultsCommand);\r\n         }\r\n         if (ev.type === LiveClockSpecCommand.__type) {\r\n            this.onCommandApply(ev as LiveClockSpecCommand);\r\n         }\r\n         if (ev.type === LiveClockStateCommand.__type) {\r\n            this.onCommandApply(ev as LiveClockStateCommand);\r\n         }\r\n         if (ev.type === LiveAttendanceCommand.__type) {\r\n            this.onCommandApply(ev as LiveAttendanceCommand);\r\n         }\r\n         if (ev.type === LiveViewStateCommand.__type) {\r\n            this.onCommandApply(ev as LiveAttendanceCommand);\r\n         }\r\n         if (ev.type === LiveUndoCommand.__type) {\r\n            this.onCommandReverse();\r\n         }\r\n      }\r\n      else {\r\n         // Hub node listens for new participants and sends them the document when they join\r\n         if (ev.type === CallParticipation.__type) {\r\n            this.onNewCallParticipation(ev);\r\n         }\r\n      }\r\n   }\r\n\r\n   sendDocumentTo(recipient: CallParticipation, document: ILiveDocument): void {\r\n      this._peer.sendTo(recipient, document);\r\n   }\r\n   broadcastCommandApply(command: ICommand): void {\r\n      this._peer.broadcast(command);\r\n   }\r\n   broadcastCommandReverse(): void {\r\n      this._peer.broadcast(new LiveUndoCommand());\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveWorkoutChannelFactoryPeer - Creates the type of channel we need to exchange Workout Documents\r\n// pass this to ILiveDocumentMaster / Remote in LiveDocumentCentral.\r\n////////////////////////////////////////\r\nexport class LiveWorkoutChannelFactoryPeer implements ILiveDocumentChannelFactory {\r\n\r\n   _connection: PeerConnection;\r\n\r\n   constructor(connection: PeerConnection) {\r\n      this._connection = connection;\r\n   }\r\n\r\n   createConnectionIn(): ILiveDocumentChannel {\r\n      return new LiveWorkoutChannelPeer(this._connection);\r\n   }\r\n\r\n   createConnectionOut(): ILiveDocumentChannel {\r\n      return new LiveWorkoutChannelPeer(this._connection);\r\n   }\r\n}\r\n\r\n////////////////////////////////////////\r\n// LiveWorkoutFactory - Creates the Workout Documents, pass this to ILiveDocumentMaster / Remote in LiveDocumentCentral. \r\n////////////////////////////////////////\r\nexport class LiveWorkoutFactory implements ILiveDocumentFactory {\r\n\r\n   static defaultWorkoutTextMaster: string = \"No workout set. Click the button above ?.\";\r\n   static defaultWorkoutTextRemote: string = \"Waiting for Coach to join.\";\r\n   static defaultResultsTextMaster: string = \"Waiting for people to join.\";\r\n   static defaultResultsTextRemote: string = \"Waiting for people to join.\";\r\n\r\n   constructor() {\r\n   }\r\n\r\n   createLiveDocument(outbound: boolean, channel: ILiveDocumentChannel): ILiveDocument {\r\n\r\n      // Use cached copy of the workout if there is one\r\n      let storedWorkoutState = new StoredWorkoutState();\r\n      let storedWorkout = storedWorkoutState.loadWorkout();\r\n      if (storedWorkout.length === 0) {\r\n         if (outbound)\r\n            storedWorkout = LiveWorkoutFactory.defaultWorkoutTextMaster;\r\n         else\r\n            storedWorkout = LiveWorkoutFactory.defaultWorkoutTextRemote;\r\n      }\r\n\r\n      // Results text set according to if we are coach or member.\r\n      var resultsText: string = outbound ? LiveWorkoutFactory.defaultResultsTextMaster : LiveWorkoutFactory.defaultWorkoutTextRemote;\r\n\r\n      // Use cached copy of the workout clock spec if there is one\r\n      var storedClockSpec = storedWorkoutState.loadClockSpec();\r\n      var clockSpec: GymClockSpec;\r\n\r\n      if (storedClockSpec && storedClockSpec.length > 0) {\r\n\r\n         var types = new StreamableTypes();\r\n         var loadedClockSpec = types.reviveFromJSON(storedClockSpec);\r\n         clockSpec = new GymClockSpec(loadedClockSpec.durationEnum,\r\n            loadedClockSpec.musicEnum);\r\n\r\n      } else {\r\n         clockSpec = new GymClockSpec(EGymClockDuration.Ten, EGymClockMusic.None);\r\n      }\r\n\r\n      // Use cached copy of the workout clock state if there is one\r\n      var storedClockState = storedWorkoutState.loadClockState();\r\n      var clockState: GymClockState;\r\n\r\n      if (storedClockState && storedClockState.length > 0) {\r\n         var types = new StreamableTypes()\r\n         var loadedClockState = types.reviveFromJSON(storedClockState);\r\n         clockState = new GymClockState(loadedClockState.stateEnum,\r\n            loadedClockState.secondsIn);\r\n      } else\r\n         clockState = new GymClockState(EGymClockState.Stopped, 0);\r\n\r\n      return new LiveWorkout(storedWorkout,\r\n         resultsText,\r\n         clockSpec,\r\n         clockState,\r\n         new Array<PersonAttendance>(),\r\n         EViewState.Whiteboard,\r\n         outbound, channel);\r\n   }\r\n}\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\n//==============================//\r\n// LocalStore class\r\n//==============================//\r\nexport class LocalStore {  \r\n\r\n   /**\r\n    * Initialises repository \r\n    */\r\n   constructor() {\r\n   }\r\n\r\n   /**\r\n    *\r\n    * saveValue\r\n    * @param key - key to use to look up data\r\n    * @param value - value to save \r\n    */\r\n   saveValue (key: string, value: string) {\r\n      if (typeof window !== 'undefined' && window.localStorage)\r\n         window.localStorage.setItem(key, value.toString());\r\n   };\r\n   \r\n   /**\r\n    *\r\n    * loadValue \r\n    * @param key - key to use to look up data \r\n    */\r\n   loadValue(key: string) {\r\n      if (typeof window !== 'undefined' && window.localStorage)\r\n         return window.localStorage.getItem(key);\r\n      else\r\n         return null;\r\n   };\r\n   \r\n   /**\r\n    *\r\n    * clearValue \r\n    * @param key - key to use to look up data \r\n    */\r\n   clearValue (key: string) {\r\n      if (typeof window !== 'undefined' && window.localStorage)\r\n         window.localStorage.removeItem(key);\r\n   }\r\n}\r\n\r\nconst lastMeetingId = \"lastMeetingId\";\r\nconst lastNameId = \"lastName\";\r\nconst lastWorkoutId = \"lastWorkout\";\r\nconst lastClockId = \"lastClock\";\r\nconst lastClockStateId = \"lastClockState\";\r\n\r\n//==============================//\r\n// StoredMeetingState class\r\n//==============================//\r\nexport class StoredMeetingState {\r\n\r\n   private _store: LocalStore;\r\n\r\n   constructor() {\r\n      this._store = new LocalStore();\r\n   }\r\n\r\n   /**\r\n    *\r\n    * saveMeetingId\r\n    * @param meetingId - value to save\r\n    */\r\n   saveMeetingId(meetingId: string) {\r\n      this._store.saveValue(lastMeetingId, meetingId);\r\n   };\r\n\r\n   /**\r\n    *\r\n    * loadMeetingId\r\n    */\r\n   loadMeetingId() : string {\r\n      var ret = this._store.loadValue(lastMeetingId);\r\n      if (!ret)\r\n         ret = \"\";\r\n      return ret;\r\n   };\r\n\r\n   /**\r\n    *\r\n    * saveName\r\n    * @param meetingId - value to save\r\n    */\r\n   saveName(meetingId: string) {\r\n      this._store.saveValue(lastNameId, meetingId);\r\n   };\r\n\r\n   /**\r\n    *\r\n    * loadName\r\n    */\r\n   loadName(): string {\r\n      var ret = this._store.loadValue(lastNameId);\r\n      if (!ret)\r\n         ret = \"\";\r\n      return ret;\r\n   };\r\n}\r\n\r\n//==============================//\r\n// StoredWorkoutState class\r\n//==============================//\r\nexport class StoredWorkoutState {\r\n\r\n   private _store: LocalStore;\r\n\r\n   constructor() {\r\n      this._store = new LocalStore();\r\n   }\r\n\r\n   /**\r\n    *\r\n    * saveWorkout\r\n    * @param workout - value to save\r\n    */\r\n   saveWorkout(workout: string) {\r\n      this._store.saveValue(lastWorkoutId, workout);\r\n   };\r\n\r\n   /**\r\n    *\r\n    * loadWorkout\r\n    */\r\n   loadWorkout(): string {\r\n      var ret = this._store.loadValue(lastWorkoutId);\r\n      if (!ret)\r\n         ret = \"\";\r\n      return ret;\r\n   };\r\n\r\n   /**\r\n    *\r\n    * saveClockSpec\r\n    * @param clock - value to save\r\n    */\r\n   saveClockSpec(clock: string) {\r\n      this._store.saveValue(lastClockId, clock);\r\n   };\r\n\r\n   /**\r\n    *\r\n    * loadClockSpec\r\n    */\r\n   loadClockSpec(): string {\r\n      var ret = this._store.loadValue(lastClockId);\r\n      if (!ret)\r\n         ret = \"\";\r\n      return ret;\r\n   };\r\n\r\n   /**\r\n    *\r\n    * saveClockState\r\n    * @param clock - value to save\r\n    */\r\n   saveClockState(clock: string) {\r\n      this._store.saveValue(lastClockStateId, clock);\r\n   };\r\n\r\n   /**\r\n    *\r\n    * loadClockState\r\n    */\r\n   loadClockState(): string {\r\n      var ret = this._store.loadValue(lastClockStateId);\r\n      if (!ret)\r\n         ret = \"\";\r\n      return ret;\r\n   };\r\n}","/*jslint white: false, indent: 3, maxerr: 1000 */\r\n/*global exports*/\r\n/*! Copyright TXPCo, 2020, 2021 */\r\n\r\n// External components\r\nimport axios from 'axios';\r\n\r\n//import { ServerLoggerWrap } from './LoggerServerWrap';\r\nimport { ClientLoggerWrap } from './LoggerClientWrap';\r\n\r\nexport enum ELoggerType {\r\n   Server,\r\n   Client\r\n}\r\n\r\nexport interface ILogger {\r\n   logError (component: string,\r\n      method: string,\r\n      message: string,\r\n      data: any\r\n   ) : void;\r\n\r\n   logInfo (component: string,\r\n      method: string,\r\n      message: string,\r\n      data: any\r\n   ) : void;\r\n}\r\n\r\nexport class LoggerFactory {\r\n   constructor() {\r\n   }\r\n\r\n   createLogger(loggerType: ELoggerType, shipToSever: boolean): ILogger {\r\n      switch (loggerType) {\r\n         case ELoggerType.Server:\r\n            return new ClientLogger(shipToSever);\r\n\r\n         case ELoggerType.Client:\r\n         default:\r\n            return new ClientLogger(shipToSever);\r\n      }\r\n      \r\n   }\r\n}\r\n\r\n/*\r\nclass ServerLogger implements ILogger {\r\n\r\n   private logger: any;\r\n\r\n   constructor() {\r\n\r\n      // instantiate a new Winston Logger with the settings defined above\r\n      this.logger = new ServerLoggerWrap();\r\n   }\r\n\r\n   logError(component: string,\r\n      method: string,\r\n      message: string,\r\n      data: any\r\n   ) : void {\r\n      this.logger.logError (\r\n         component,\r\n         method,\r\n         message,\r\n         data ? JSON.stringify (data, null, 2) : \"\"\r\n      );\r\n   }\r\n\r\n   logInfo(component: string,\r\n      method: string,\r\n      message: string,\r\n      data: any\r\n   ) : void {\r\n      this.logger.logInfo (\r\n         component,\r\n         method,\r\n         message,\r\n         data ? JSON.stringify(data, null, 2) : \"\"\r\n      );\r\n   }\r\n}\r\n*/\r\n\r\nclass ClientLogger implements ILogger {\r\n\r\n   private logger: any;\r\n   private shipToSever: boolean;\r\n\r\n   constructor(shipToSever: boolean) {\r\n\r\n      // instantiate a new Winston Logger with the settings defined above\r\n      this.logger = new ClientLoggerWrap();\r\n      this.shipToSever = shipToSever;\r\n   }\r\n\r\n   logError(component: string,\r\n      method: string,\r\n      message: string,\r\n      data: any\r\n   ): void {\r\n      this.logger.logError(\r\n         component,\r\n         method,\r\n         message,\r\n         data ? JSON.stringify(data, null, 2) : \"\"\r\n      );\r\n\r\n      // test we are in the browser before trying to log to server\r\n      if (typeof window !== 'undefined' && window.localStorage) {\r\n         if (this.shipToSever) {\r\n            const msg = component + \".\" + method + \": \" + message + (data ? JSON.stringify(data, null, 2) : \"\");\r\n            axios.post('/api/error', { params: { message: msg } });\r\n         }\r\n      }\r\n   }\r\n\r\n   logInfo(component: string,\r\n      method: string,\r\n      message: string,\r\n      data: any\r\n   ): void {\r\n      this.logger.logInfo(\r\n         component,\r\n         method,\r\n         message,\r\n         data ? JSON.stringify(data, null, 2) : \"\"\r\n      );\r\n   }\r\n}\r\n\r\nvar LoggerEntryPoints = {\r\n   LoggerFactory: LoggerFactory,\r\n   ELoggerType: ELoggerType\r\n};\r\n\r\n\r\n\r\n\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\n// external components\r\nimport axios from 'axios';\r\nvar logging = require('loglevel');\r\n\r\nlogging.setLevel(\"info\");\r\n\r\nexport class ClientLoggerWrap {\r\n\r\n   private logger: any;\r\n\r\n   constructor () {\r\n\r\n      // instantiate a new Winston Logger with the settings defined above\r\n      this.logger = logging;\r\n   }\r\n\r\n   logError(fromClass: string, fromMethod: string, info: string, objAsJSON: string): void {\r\n      let date = new Date();\r\n      let timeString = date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds() + ':' + date.getMilliseconds();\r\n\r\n      const msg = ' ' + fromClass + \".\" + fromMethod + \": \" + info + (objAsJSON ? objAsJSON : \"\") + ' at:' + timeString;\r\n      this.logger.error('Error:' + msg);\r\n\r\n      axios.post('/api/error', { params: { message: encodeURIComponent(msg) } })\r\n         .then((response) => {\r\n         });\r\n   }\r\n\r\n   logInfo(fromClass: string, fromMethod: string, info: string, objAsJSON: string): void {\r\n      let date = new Date();\r\n      let timeString = date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds() + ':' + date.getMilliseconds();\r\n      this.logger.info('Info: ' + fromClass + \".\" + fromMethod + \": \" + info + (objAsJSON ? objAsJSON : \"\") + ' at:' + timeString);\r\n   }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the Peer architecture:\r\n// PeerConnection : overall orchestration & interface to the UI.\r\n// PeerFactory - creates Rtc or Web versions as necessary to meet a request for a PeerCaller or PeerSender. \r\n// PeerInterfaces - defines abstract interfaces for PeerCaller, PeerSender, PeerSignalsender, PeerSignalReciever etc \r\n// PeerLink - contains a connection, plus logic to bridge the send/receieve differences, and depends only on abstract classes. \r\n// PeerRtc - contains concrete implementations of PeerCaller and PeerSender, send and recieve data via WebRTC\r\n// PeerSignaller - contains an implementation of the PeerSignalSender & PeerSignalReciever interfaces.\r\n// PeerWeb  - contains concrete implementations of PeerCaller and PeerSender, sends and recoeved data via the node.js server\r\n\r\n// RTC References:\r\n// https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Signaling_and_video_calling\r\n// https://medium.com/xamarin-webrtc/webrtc-signaling-server-dc6e38aaefba \r\n// https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Perfect_negotiation\r\n\r\n// External libraries\r\nimport axios from 'axios';\r\n\r\n// This app, this library\r\nimport { Person } from './Person';\r\nimport { LoggerFactory, ELoggerType } from './Logger';\r\nimport { IStreamable } from './Streamable';\r\nimport { ETransportType, CallParticipation } from './Call';\r\nimport { EPeerConnectionType, IPeerSignalSender, IPeerCaller, IPeerReciever, PeerNameCache, IPeerSignalReciever } from './PeerInterfaces';\r\nimport { PeerCallerRtc, PeerRecieverRtc } from './PeerRtc';\r\nimport { PeerCallerWeb, PeerRecieverWeb } from './PeerWeb';\r\n\r\nvar logger = new LoggerFactory().createLogger(ELoggerType.Client, true);\r\n\r\nexport class PeerFactory {\r\n   constructor() {\r\n   }\r\n\r\n   createCallerConnection(connectionType: EPeerConnectionType,\r\n      transport: ETransportType,\r\n      localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender,\r\n      signalReciever: IPeerSignalReciever): IPeerCaller {\r\n\r\n      switch (transport) {\r\n         case ETransportType.Rtc:\r\n         default:\r\n            return new PeerCallerRtc(localCallParticipation,\r\n               remoteCallParticipation,\r\n               person,\r\n               nameCache,\r\n               signaller);\r\n         case ETransportType.Web:\r\n            return new PeerCallerWeb(localCallParticipation,\r\n               remoteCallParticipation,\r\n               person,\r\n               nameCache,\r\n               signaller);\r\n      }\r\n   }\r\n\r\n   createRecieverConnection(connectionType: EPeerConnectionType,\r\n      transport: ETransportType,\r\n      localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender,\r\n      signalReciever: IPeerSignalReciever): IPeerReciever {\r\n\r\n      switch (transport) {\r\n         case ETransportType.Rtc:\r\n         default:\r\n            return new PeerRecieverRtc(localCallParticipation,\r\n               remoteCallParticipation,\r\n               person,\r\n               nameCache,\r\n               signaller);\r\n         case ETransportType.Web:\r\n            return new PeerRecieverWeb(localCallParticipation,\r\n               remoteCallParticipation,\r\n               person,\r\n               nameCache,\r\n               signaller);\r\n      }\r\n   }\r\n}\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the Peer architecture:\r\n// PeerConnection : overall orchestration & interface to the UI.\r\n// PeerFactory - creates Rtc or Web versions as necessary to meet a request for a PeerCaller or PeerSender. \r\n// PeerInterfaces - defines abstract interfaces for PeerCaller, PeerSender, PeerSignalsender, PeerSignalReciever etc \r\n// PeerLink - contains a connection, plus logic to bridge the send/receieve differences, and depends only on abstract classes. \r\n// PeerRtc - contains concrete implementations of PeerCaller and PeerSender, send and recieve data via WebRTC\r\n// PeerSignaller - contains an implementation of the PeerSignalSender & PeerSignalReciever interfaces.\r\n// PeerWeb  - contains concrete implementations of PeerCaller and PeerSender, sends and recoeved data via the node.js server\r\n\r\n// This app, this library\r\nimport { Person } from './Person';\r\nimport { CallOffer, CallAnswer, CallIceCandidate, CallParticipation, CallData } from './Call';\r\nimport { IStreamable } from './Streamable'\r\n\r\nexport enum EPeerConnectionType {\r\n   Caller,\r\n   Reciever\r\n}\r\n\r\nexport interface IPeer {\r\n   /**\r\n   * set of 'getters' & some 'setters' for private variables\r\n   */\r\n   localCallParticipation(): CallParticipation;\r\n   remoteCallParticipation(): CallParticipation;\r\n   localPerson(): Person;\r\n   remotePerson(): Person | undefined;\r\n   isConnected(): boolean;\r\n   remotePersonIs(name: string): boolean;\r\n   send(data: IStreamable): void;\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void;\r\n   handleRemoteData(data: CallData);\r\n   onRemoteData(data: IStreamable): void;\r\n   onRemoteFail(): void;\r\n   close(): void;\r\n}\r\n\r\nexport interface IPeerCaller extends IPeer  {\r\n\r\n   placeCall(): void;\r\n\r\n   handleAnswer(answer: CallAnswer): void;\r\n}\r\n\r\nexport interface IPeerReciever extends IPeer {\r\n\r\n   answerCall(remoteOffer: CallOffer) : void;\r\n}\r\n\r\nexport interface IPeerSignalSender {\r\n\r\n   sendOffer(offer: CallOffer): Promise<string> ;\r\n   sendAnswer(answer: CallAnswer): Promise<string>;\r\n   sendIceCandidate(iceCandidate: CallIceCandidate): Promise<string>;\r\n   sendData(callData: IStreamable): Promise<string>;\r\n}\r\n\r\nexport interface IPeerSignalReciever {\r\n   connect(participation: CallParticipation): void;\r\n   onRemoteData(data: IStreamable): void;\r\n   isConnected(): boolean;\r\n}\r\n\r\n// Helper class - take a name like 'Jon' and if the name is not unique for the session,\r\n// tries variants like 'Jon:1', 'Jon:2' and so on until a unique one (for this session) is found.\r\n// This is to distinguish the same person joining mutliple times (multiple devices or serial log ins such as browser refresh)\r\nexport class PeerNameCache {\r\n   // member variables\r\n   private nameMap: Map<string, boolean>;\r\n\r\n   constructor() {\r\n      this.nameMap = new Map<string, boolean>();\r\n   }\r\n\r\n   addReturnUnique(name: string): string {\r\n      if (!this.nameMap.has(name)) {\r\n         this.nameMap.set(name, true);\r\n         return name;\r\n      }\r\n\r\n      var index: number = 1;\r\n      while (true) {\r\n         var newName = name + ':' + index.toString();\r\n         if (!this.nameMap.has(newName)) {\r\n            this.nameMap.set(newName, true);\r\n            return newName;\r\n         }\r\n         index++;\r\n      }\r\n   }\r\n}","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the Peer architecture:\r\n// PeerConnection : overall orchestration & interface to the UI.\r\n// PeerFactory - creates Rtc or Web versions as necessary to meet a request for a PeerCaller or PeerSender. \r\n// PeerInterfaces - defines abstract interfaces for PeerCaller, PeerSender, PeerSignalsender, PeerSignalReciever etc \r\n// PeerLink - contains a connection, plus logic to bridge the send/receieve differences, and depends only on abstract classes. \r\n// PeerRtc - contains concrete implementations of PeerCaller and PeerSender, send and recieve data via WebRTC\r\n// PeerSignaller - contains an implementation of the PeerSignalSender & PeerSignalReciever interfaces.\r\n// PeerWeb  - contains concrete implementations of PeerCaller and PeerSender, sends and recoeved data via the node.js server\r\n\r\n// This app, this library\r\nimport { Person } from './Person';\r\nimport { ETransportType, CallParticipation, CallOffer, CallAnswer, CallIceCandidate, CallData } from './Call';\r\nimport { IStreamable } from './Streamable';\r\nimport { ILogger, LoggerFactory, ELoggerType } from './Logger';\r\nimport { EPeerConnectionType, IPeerCaller, IPeerReciever,  PeerNameCache, IPeerSignalSender, IPeerSignalReciever } from './PeerInterfaces';\r\nimport { PeerFactory } from './PeerFactory';\r\n\r\nfunction uuidPart(): string {\r\n   return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1).toUpperCase();\r\n};\r\n\r\nfunction uuid(): string {\r\n   return (uuidPart() + uuidPart() + \"-\" + uuidPart() + \"-\" + uuidPart() + \"-\" + uuidPart() + \"-\" + uuidPart() + uuidPart() + uuidPart());\r\n}\r\n\r\nvar logger: ILogger = new LoggerFactory().createLogger (ELoggerType.Client, true);\r\n\r\nexport class PeerLink {\r\n   // member variables\r\n   private _outbound: boolean;\r\n   private _transport: ETransportType;\r\n   private _localCallParticipation: CallParticipation;\r\n   private _remoteCallParticipation: CallParticipation;\r\n   private _person: Person;\r\n   private _peerCaller: IPeerCaller | undefined;\r\n   private _peerReciever: IPeerReciever | undefined;\r\n   private static className: string = 'PeerLink';\r\n\r\n   // Override these to get data notification from the link\r\n   onRemoteData: ((this: PeerLink, ev: IStreamable) => any) = function (ev) { };\r\n   onRemoteFail: ((this: PeerLink, link: PeerLink) => void) = function (ev) { };\r\n\r\n   constructor(outbound: boolean,\r\n      transport: ETransportType,\r\n      localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signalSender: IPeerSignalSender,\r\n      signalReciever: IPeerSignalReciever) {\r\n\r\n      this._outbound = outbound;\r\n      this._localCallParticipation = localCallParticipation;\r\n      this._remoteCallParticipation = remoteCallParticipation;\r\n      this._person = person;\r\n      this._transport = transport;\r\n\r\n      let factory = new PeerFactory();\r\n      if (outbound) {\r\n\r\n         this._peerCaller = factory.createCallerConnection(EPeerConnectionType.Caller,\r\n            transport,\r\n            localCallParticipation,\r\n            remoteCallParticipation,\r\n            person,\r\n            nameCache,\r\n            signalSender,\r\n            signalReciever);\r\n\r\n         this._peerCaller.onRemoteData = this.onRemoteDataInner.bind(this);\r\n         this._peerCaller.onRemoteFail = this.onRemoteFailInner.bind(this);\r\n         this._peerReciever = undefined;\r\n\r\n      } else {\r\n\r\n         this._peerReciever = factory.createRecieverConnection(EPeerConnectionType.Reciever,\r\n            transport,\r\n            localCallParticipation,\r\n            remoteCallParticipation,\r\n            person,\r\n            nameCache,\r\n            signalSender,\r\n            signalReciever);\r\n\r\n         this._peerReciever.onRemoteData = this.onRemoteDataInner.bind(this);\r\n         this._peerReciever.onRemoteFail = this.onRemoteFailInner.bind(this);\r\n         this._peerCaller = undefined;\r\n      }\r\n   }\r\n\r\n   get remoteCallParticipation(): CallParticipation {\r\n      return this._remoteCallParticipation;\r\n   }\r\n\r\n   get localCallParticipation(): CallParticipation {\r\n      return this._localCallParticipation;\r\n   }\r\n\r\n   get person (): Person {\r\n      return this._person;\r\n   }\r\n\r\n   get isOutbound(): boolean {\r\n      return this._outbound;\r\n   }\r\n\r\n   get transport(): ETransportType {\r\n      return this._transport;\r\n   }\r\n\r\n   placeCall(): void {\r\n      if (this._outbound && this._peerCaller)\r\n         this._peerCaller.placeCall();\r\n      else\r\n         logger.logError(PeerLink.className, 'placeCall', \"Recieved placeCall but do not have caller:\", null);\r\n   }\r\n\r\n   answerCall(offer: CallOffer): void {\r\n      if (!this._outbound && this._peerReciever)\r\n         this._peerReciever.answerCall(offer);\r\n      else\r\n         logger.logError(PeerLink.className, 'answerCall', \"Recieved offer but do not have reciever:\", offer);\r\n   }\r\n\r\n   handleAnswer(answer: CallAnswer): void {\r\n      if (this._outbound && this._peerCaller)\r\n         this._peerCaller.handleAnswer(answer);\r\n      else\r\n         logger.logError(PeerLink.className, 'handleAnswer', \"Recieved answer but do not have caller:\", answer);\r\n   }\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void {\r\n      // Ice candidate messages can be sent while we are still resolving glare - e.g. we are calling each other, and we killed our side while we have\r\n      // incoming messages still pending\r\n      // So fail silently if we get unexpected Ice candidate messages \r\n      if (this._outbound) {\r\n         if (this._peerCaller)\r\n            this._peerCaller.handleIceCandidate(ice);\r\n         // else silent fail\r\n      } else {\r\n         if (this._peerReciever)\r\n            this._peerReciever.handleIceCandidate(ice);\r\n         // else silent fail\r\n      }\r\n   }\r\n\r\n   handleRemoteData (data: CallData): void {\r\n      if (this._outbound) {\r\n         if (this._peerCaller)\r\n            this._peerCaller.handleRemoteData(data);\r\n         // else silent fail\r\n      } else {\r\n         if (this._peerReciever)\r\n            this._peerReciever.handleRemoteData(data);\r\n         // else silent fail\r\n      }\r\n   }\r\n\r\n   send(obj) : void {\r\n      if (this._outbound && this._peerCaller)\r\n         this._peerCaller.send(obj);\r\n      if (!this._outbound && this._peerReciever)\r\n         this._peerReciever.send(obj);\r\n   }\r\n\r\n   isConnectedToLeader(): boolean {\r\n      if (!this._outbound && this._peerReciever && this._peerReciever.remotePerson()\r\n         && this._peerReciever.remoteCallParticipation().isCandidateLeader\r\n         && this._peerReciever.isConnected()) {\r\n         return true;\r\n      }\r\n      if (this._outbound && this._peerCaller && this._peerCaller.remotePerson()\r\n         && this._peerCaller.remoteCallParticipation().isCandidateLeader\r\n         && this._peerCaller.isConnected()) {\r\n         return true;\r\n      }\r\n\r\n      return false;\r\n   }\r\n\r\n   isConnectedToPerson (name: string): boolean {\r\n      if (!this._outbound && this._peerReciever \r\n         && this._peerReciever.remotePersonIs(name) \r\n         && this._peerReciever.isConnected()) {\r\n         return true;\r\n      }\r\n      if (this._outbound && this._peerCaller \r\n         && this._peerCaller.remotePersonIs(name)\r\n         && this._peerCaller.isConnected()) {\r\n         return true;\r\n      }\r\n\r\n      return false;\r\n   }\r\n\r\n   private onRemoteDataInner(ev: IStreamable): void {\r\n      if (this.onRemoteData)\r\n         this.onRemoteData(ev);\r\n   }\r\n\r\n   private onRemoteFailInner(): void {\r\n      if (this.onRemoteFail)\r\n         this.onRemoteFail(this);\r\n   }\r\n}\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the Peer architecture:\r\n// PeerConnection : overall orchestration & interface to the UI.\r\n// PeerFactory - creates Rtc or Web versions as necessary to meet a request for a PeerCaller or PeerSender. \r\n// PeerInterfaces - defines abstract interfaces for PeerCaller, PeerSender, PeerSignalsender, PeerSignalReciever etc \r\n// PeerLink - contains a connection, plus logic to bridge the send/receieve differences, and depends only on abstract classes. \r\n// PeerRtc - contains concrete implementations of PeerCaller and PeerSender, send and recieve data via WebRTC\r\n// PeerSignaller - contains an implementation of the PeerSignalSender & PeerSignalReciever interfaces.\r\n// PeerWeb  - contains concrete implementations of PeerCaller and PeerSender, sends and recoeved data via the node.js server\r\n\r\n// RTC References:\r\n// https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Signaling_and_video_calling\r\n// https://medium.com/xamarin-webrtc/webrtc-signaling-server-dc6e38aaefba \r\n// https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Perfect_negotiation\r\n\r\n// External libraries\r\nimport axios from 'axios';\r\n\r\n// This app, this library\r\nimport { Person } from './Person';\r\nimport { Queue } from './Queue';\r\nimport { LoggerFactory, ELoggerType } from './Logger';\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { IStreamable } from './Streamable';\r\nimport { ETransportType, CallParticipation, CallOffer, CallAnswer, CallIceCandidate, CallData } from './Call';\r\nimport { EPeerConnectionType, IPeerSignalSender, IPeerCaller, IPeerReciever, PeerNameCache, IPeerSignalReciever } from './PeerInterfaces'\r\n\r\nvar logger = new LoggerFactory().createLogger(ELoggerType.Client, true);\r\n\r\nexport enum ERtcConfigurationType {\r\n   StunOnly,\r\n   TurnOnly,\r\n   StunThenTurn,\r\n   Nothing // this is used to force fallback to web for testing\r\n}\r\n\r\n// Set this to control connection scope\r\nconst rtcConfigType = ERtcConfigurationType.StunThenTurn;\r\n\r\nexport class RtcConfigFactory {\r\n   constructor() {\r\n   }\r\n\r\n   createConfig(configType: ERtcConfigurationType): RTCConfiguration {\r\n\r\n      switch (configType) {\r\n         case ERtcConfigurationType.Nothing:\r\n            let noConfiguration = {\r\n               iceServers: []\r\n            };\r\n            return noConfiguration;\r\n\r\n         case ERtcConfigurationType.StunOnly:\r\n            let stunConfiguration = {\r\n               iceServers: [{\r\n                  \"urls\": \"stun:stun.l.google.com:19302\"\r\n               },\r\n               {\r\n                  \"urls\": \"stun:stun1.l.google.com:19302\"\r\n               }]\r\n            };\r\n            return stunConfiguration;\r\n\r\n         case ERtcConfigurationType.TurnOnly:\r\n            let turnConfiguration = {\r\n               iceServers: [{\r\n                  \"urls\": \"turn:ec2-18-216-213-192.us-east-2.compute.amazonaws.com:3480\",\r\n                  username: 'ubuntu',\r\n                  credential: '1wtutona'\r\n               }\r\n               ]\r\n            };\r\n            return turnConfiguration;\r\n\r\n         case ERtcConfigurationType.StunThenTurn:\r\n         default:\r\n            let defaultConfiguration = {\r\n               iceServers: [{\r\n                  \"urls\": \"stun:stun.l.google.com:19302\"\r\n               },\r\n               {\r\n                  \"urls\": \"stun:stun1.l.google.com:19302\"\r\n               } /* 2021/3/5 - this leads to log timeouts ... ,\r\n               {\r\n                  \"urls\": \"turn:ec2-18-216-213-192.us-east-2.compute.amazonaws.com:3480\",\r\n                  username: 'ubuntu',\r\n                  credential: '1wtutona'\r\n               }*/\r\n               ] \r\n            };\r\n            return defaultConfiguration;\r\n      }\r\n   }\r\n}\r\n\r\nexport class PeerCallerRtc implements IPeerCaller {\r\n   // member variables\r\n   private peerHelp: RtcPeerHelper;\r\n\r\n   constructor(localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender) {\r\n\r\n      this.peerHelp = new RtcPeerHelper(localCallParticipation,\r\n         remoteCallParticipation,\r\n         person, nameCache, signaller);\r\n\r\n      // Hook to pass any data up the chain\r\n      this.peerHelp.onRemoteData = this.onRemoteDataInner.bind(this);\r\n      this.peerHelp.onRemoteFail = this.onRemoteFailInner.bind(this);\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   localCallParticipation(): CallParticipation {\r\n      return this.peerHelp.localCallParticipation;\r\n   }\r\n   remoteCallParticipation(): CallParticipation {\r\n      return this.peerHelp.remoteCallParticipation;\r\n   }\r\n   localPerson(): Person {\r\n      return this.peerHelp.localPerson;\r\n   }\r\n   remotePerson(): Person | undefined {\r\n      return this.peerHelp.remotePerson;\r\n   }\r\n   remotePersonIs(name: string): boolean {\r\n      if (this.peerHelp.remotePerson) {\r\n         return (this.peerHelp.remotePerson.name === name);\r\n      } else {\r\n         return false;\r\n      }\r\n   }\r\n   isConnected(): boolean {\r\n      return this.peerHelp.isChannelConnected;\r\n   }\r\n\r\n   // Override this for data from notifications \r\n   onRemoteData: ((ev: IStreamable) => void) = function (ev) { };\r\n   onRemoteFail: (() => void) = function () { };\r\n\r\n   placeCall(): void {\r\n\r\n      this.peerHelp.createConnection(EPeerConnectionType.Caller, \"Caller\");\r\n   }\r\n\r\n   handleAnswer(answer: CallAnswer): void {\r\n      this.peerHelp.handleAnswer(answer);\r\n   }\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void {\r\n      this.peerHelp.handleIceCandidate(ice);\r\n   }\r\n\r\n   handleRemoteData(data: CallData) : void {\r\n      // No-op - we dont expect to recieve data from fallback channel\r\n      // TODO - make an assert() fail??\r\n   }\r\n\r\n   send(obj: IStreamable): void {\r\n      this.peerHelp.send(obj);\r\n   }\r\n\r\n   close(): void {\r\n      this.peerHelp.close();\r\n   }\r\n\r\n   private onRemoteDataInner(ev: IStreamable): void {\r\n\r\n      if (this.onRemoteData) {\r\n         this.onRemoteData(ev);\r\n      }\r\n   }\r\n   private onRemoteFailInner(): void {\r\n\r\n      if (this.onRemoteFail) {\r\n         this.onRemoteFail();\r\n      }\r\n   }\r\n}\r\n\r\nexport class PeerRecieverRtc implements IPeerReciever {\r\n   // member variables\r\n   private peerHelp: RtcPeerHelper;\r\n\r\n   constructor(localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender) {\r\n\r\n      this.peerHelp = new RtcPeerHelper(localCallParticipation,\r\n         remoteCallParticipation,\r\n         person, nameCache,\r\n         signaller);\r\n\r\n      // Hook to pass any data up the chain\r\n      this.peerHelp.onRemoteData = this.onRemoteDataInner.bind(this);\r\n      this.peerHelp.onRemoteFail = this.onRemoteFailInner.bind(this);\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   localCallParticipation(): CallParticipation {\r\n      return this.peerHelp.localCallParticipation;\r\n   }\r\n   remoteCallParticipation(): CallParticipation {\r\n      return this.peerHelp.remoteCallParticipation;\r\n   }\r\n   localPerson(): Person {\r\n      return this.peerHelp.localPerson;\r\n   }\r\n   remotePerson(): Person | undefined {\r\n      return this.peerHelp.remotePerson;\r\n   }\r\n   remotePersonIs(name: string): boolean {\r\n      if (this.peerHelp.remotePerson) {\r\n         return (this.peerHelp.remotePerson.name === name);\r\n      } else {\r\n         return false;\r\n      }\r\n   }\r\n   isConnected(): boolean {\r\n      return this.peerHelp.isChannelConnected;\r\n   }\r\n\r\n   // Override these for data from notifications \r\n   onRemoteData: ((ev: IStreamable) => void) = function (ev) { };\r\n   onRemoteFail: (() => void) = function () { };\r\n\r\n   answerCall(offer: CallOffer): void {\r\n\r\n      this.peerHelp.createConnection(EPeerConnectionType.Reciever, \"Reciever\");\r\n\r\n      this.peerHelp.answerCall(offer);\r\n   }\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void {\r\n      this.peerHelp.handleIceCandidate(ice);\r\n   }\r\n\r\n   handleRemoteData(data: CallData): void {\r\n      // No-op - we dont expect to recieve data from fallback channel\r\n      // TODO - make an assert() fail??\r\n   }\r\n\r\n   send(obj: IStreamable): void {\r\n      this.peerHelp.send(obj);\r\n   }\r\n\r\n   close(): void {\r\n      this.peerHelp.close();\r\n   }\r\n\r\n   private onRemoteDataInner(ev: IStreamable): void {\r\n\r\n      if (this.onRemoteData) {\r\n         this.onRemoteData(ev);\r\n      }\r\n   }\r\n\r\n   private onRemoteFailInner(): void {\r\n\r\n      if (this.onRemoteFail) {\r\n         this.onRemoteFail();\r\n      }\r\n   }\r\n}\r\n\r\nclass RtcPeerHelper {\r\n\r\n   // member variables\r\n   private _localCallParticipation: CallParticipation;\r\n   private _remoteCallParticipation: CallParticipation;\r\n   private _localPerson: Person;\r\n   private _remotePerson: Person | undefined;\r\n   private _isChannelConnected: boolean;\r\n   private _isIceConnected: boolean;\r\n   private _nameCache: PeerNameCache;\r\n   private _signaller: IPeerSignalSender;\r\n   private _types: StreamableTypes;\r\n   private static className: string = 'RtcPeerHelper';\r\n\r\n   private _connection: RTCPeerConnection;\r\n   private _sendChannel: RTCDataChannel;\r\n   private _recieveChannel: RTCDataChannel;\r\n   private _sendQueue: Queue<IStreamable>;\r\n   private _iceQueue: Queue<any>;\r\n\r\n   constructor(localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender\r\n   ) {\r\n      this._localCallParticipation = localCallParticipation;\r\n      this._remoteCallParticipation = remoteCallParticipation;\r\n      this._localPerson = person;\r\n      this._nameCache = nameCache;\r\n      this._signaller = signaller;\r\n      this._types = new StreamableTypes();\r\n\r\n      this._isChannelConnected = false;\r\n      this._isIceConnected = false;\r\n      this._sendChannel = undefined;\r\n      this._recieveChannel = undefined;\r\n      this._sendQueue = new Queue<IStreamable>();\r\n      this._connection = undefined;\r\n      this._iceQueue = new Queue<CallIceCandidate>();\r\n   }\r\n\r\n   // Override these for notifications \r\n   onRemoteData: ((ev: IStreamable) => void) = function (ev) { };\r\n   onRemoteFail: (() => void) = function () { };\r\n\r\n   /**\r\n   * set of 'getters' & some 'setters' for private variables\r\n   */\r\n   get localCallParticipation(): CallParticipation {\r\n      return this._localCallParticipation;\r\n   }\r\n   get remoteCallParticipation(): CallParticipation {\r\n      return this._remoteCallParticipation;\r\n   }\r\n   get localPerson(): Person {\r\n      return this._localPerson;\r\n   }\r\n   get remotePerson(): Person | undefined {\r\n      return this._remotePerson;\r\n   }\r\n   get isChannelConnected(): boolean {\r\n      return this._isChannelConnected;\r\n   }\r\n   get isIceConnected(): boolean {\r\n      return this._isIceConnected;\r\n   }\r\n\r\n   // Connection handling\r\n   //////////\r\n   createConnection(type: EPeerConnectionType, channelName: string) : void {\r\n      let factory = new RtcConfigFactory();\r\n      let configuration = factory.createConfig(rtcConfigType);\r\n\r\n      this._connection = new RTCPeerConnection(configuration);\r\n      this._connection.onicecandidate = (ice) => {\r\n         this.onIceCandidate(ice.candidate, this.remoteCallParticipation);\r\n      };\r\n\r\n      if (type === EPeerConnectionType.Caller) {\r\n         this._connection.onnegotiationneeded = (ev) => { this.onNegotiationNeededCaller.bind(this)(ev); };\r\n      } else {\r\n         this._connection.onnegotiationneeded = (ev) => { this.onNegotiationNeededReciever.bind(this)(ev); };\r\n      }\r\n\r\n      this._connection.ondatachannel = (ev) => { this.onRecieveDataChannel.bind(this)(ev.channel) };\r\n      this._connection.oniceconnectionstatechange = (ev) => { this.onIceConnectionStateChange.bind(this) (ev, this._connection); };\r\n      this._connection.onconnectionstatechange = (ev) => { this.onConnectionStateChange.bind(this) (ev, this._connection); };\r\n      this._connection.onicecandidateerror = (ev) => { this.onIceCandidateError.bind(this)(ev); };\r\n\r\n      this.createSendChannel(this._connection, channelName);\r\n   }\r\n\r\n   private onIceCandidate(candidate, to: CallParticipation) : void {\r\n\r\n      // Send our call ICE candidate in\r\n      var callIceCandidate = new CallIceCandidate(this.localCallParticipation, to, candidate, true);\r\n      this._signaller.sendIceCandidate(callIceCandidate);\r\n   }\r\n\r\n   private onNegotiationNeededCaller (ev: Event) : void {\r\n      var self = this;\r\n\r\n      logger.logInfo(RtcPeerHelper.className, 'onNegotiationNeededCaller', 'Event:', ev);\r\n\r\n      // ICE enumeration does not start until we create a local description, so call createOffer() to kick this off\r\n      this._connection.createOffer({ iceRestart: true })\r\n         .then(offer => self._connection.setLocalDescription(offer))\r\n         .then(() => {\r\n            // Send our call offer data in\r\n            logger.logInfo(RtcPeerHelper.className, 'onNegotiationNeededCaller', 'Posting offer', null);\r\n            var callOffer = new CallOffer(self.localCallParticipation, self.remoteCallParticipation, self._connection.localDescription, ETransportType.Rtc);\r\n            self._signaller.sendOffer(callOffer);\r\n         })\r\n   };\r\n\r\n   private onNegotiationNeededReciever (ev: Event) {\r\n\r\n      logger.logInfo(RtcPeerHelper.className, 'onNegotiationNeededReciever', 'Event:', ev);\r\n   };\r\n\r\n   private onConnectionStateChange(ev: Event, pc: RTCPeerConnection): void {\r\n\r\n      logger.logInfo(RtcPeerHelper.className, 'onConnectionStateChange', 'State:', pc.connectionState);\r\n\r\n      switch (pc.connectionState) {\r\n         case \"connected\":\r\n            break;\r\n         case \"disconnected\":\r\n            break;\r\n         case \"failed\":\r\n            // The connection has been closed or failed\r\n            this._isChannelConnected = false;\r\n            if (this.onRemoteFail)\r\n               this.onRemoteFail();\r\n            break;\r\n         case \"closed\":\r\n            // The connection has been closed or failed\r\n            this._isChannelConnected = false;\r\n            break;\r\n      }\r\n   }\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void {\r\n      // ICE candidates can arrive before call offer/answer\r\n      // If we have not yet set remoteDescription, queue the iceCandidate for later\r\n      if (!this._connection\r\n         || !this._connection.remoteDescription\r\n         || !this._connection.remoteDescription.type) {\r\n         this._iceQueue.enqueue(ice);\r\n         return;\r\n      }\r\n\r\n      if (ice.ice) {\r\n         if (!this.isIceConnected) { // dont add another candidate if we are connected\r\n            this._connection.addIceCandidate(new RTCIceCandidate(ice.ice))\r\n               .catch(e => {\r\n                  // TODO - analyse error paths\r\n                  logger.logError(RtcPeerHelper.className, 'handleIceCandidate', \"error:\", e);\r\n               });\r\n         }\r\n      } /* Debugging ICE - does setting a null candidate from the remote interfere with the local?? \r\n       * else {\r\n         this.recieveConnection.addIceCandidate(null)\r\n            .catch(e => {\r\n               // TODO - analyse error paths\r\n               logger.logError('RtcReciever', 'handleIceCandidate', \"error on null ICE candidate:\", e);\r\n            });\r\n      } */\r\n   }\r\n\r\n   handleAnswer(answer: CallAnswer): void {\r\n      var self = this;\r\n\r\n      if (!this._isIceConnected) {\r\n         this._connection.setRemoteDescription(new RTCSessionDescription(answer.answer))\r\n            .then(() => {\r\n               logger.logInfo(RtcPeerHelper.className, 'handleAnswer', 'succeeded', null);\r\n\r\n               // Dequeue any iceCandidates that were enqueued while we had not set remoteDescription\r\n               while (!self._iceQueue.isEmpty()) {\r\n                  self.handleIceCandidate.bind(self)(self._iceQueue.dequeue());\r\n               }\r\n            })\r\n            .catch(e => {\r\n\r\n               logger.logError(RtcPeerHelper.className, 'handleAnswer', 'error:', e);\r\n            });\r\n      }\r\n   }\r\n\r\n   answerCall(remoteOffer: CallOffer): void {\r\n\r\n      let self = this;\r\n\r\n      this._connection.setRemoteDescription(new RTCSessionDescription(remoteOffer.offer))\r\n         .then(() => self._connection.createAnswer({ iceRestart: true }))\r\n         .then((answer) => self._connection.setLocalDescription(answer))\r\n         .then(() => {\r\n            logger.logInfo(RtcPeerHelper.className, 'answerCall', 'Posting answer', null);\r\n            // Send our call answer data in\r\n            var callAnswer = new CallAnswer(self.localCallParticipation, remoteOffer.from, self._connection.localDescription, ETransportType.Rtc);\r\n            this._signaller.sendAnswer(callAnswer)\r\n               .then((response) => {\r\n                  // Dequeue any iceCandidates that were enqueued while we had not set remoteDescription\r\n                  while (!self._iceQueue.isEmpty()) {\r\n                     self.handleIceCandidate.bind(self)(self._iceQueue.dequeue())\r\n                  }\r\n               })\r\n         });\r\n   }\r\n\r\n   close(): void {\r\n      this._connection.close();\r\n   }\r\n\r\n   // Send channel handling\r\n   //////////\r\n   private createSendChannel(connection: RTCPeerConnection, name: string): void {\r\n\r\n      if (this._sendChannel) {\r\n         this._sendChannel.close();\r\n      }\r\n\r\n      this._sendChannel = connection.createDataChannel(name);\r\n\r\n      this._sendChannel.onopen = (ev) => { this.onSendChannelOpen(ev, this._sendChannel); };\r\n      this._sendChannel.onerror = this.onSendChannelError.bind(this);\r\n      this._sendChannel.onmessage = this.onSendChannelMessage.bind(this);\r\n      this._sendChannel.onclose = this.onSendChannelClose.bind(this);\r\n   }\r\n\r\n   send(obj: IStreamable) : void {\r\n      if (this._sendChannel && this._sendChannel.readyState === 'open') {\r\n         // Dequeue any messages that were enqueued while we were not ready\r\n         while (!this._sendQueue.isEmpty()) {\r\n            this._sendChannel.send(JSON.stringify(this._sendQueue.dequeue()));\r\n         }\r\n         this._sendChannel.send(JSON.stringify(obj));\r\n      } else {\r\n         this._sendQueue.enqueue(obj);\r\n      }\r\n   }\r\n\r\n   private onSendChannelOpen(ev: Event, dc: RTCDataChannel) : void {\r\n\r\n      this._isChannelConnected = true;\r\n\r\n      try {\r\n         // By convention, new joiners broadcast a 'Person' object to peers\r\n         dc.send(JSON.stringify(this.localPerson));\r\n      }\r\n      catch (e) {\r\n         logger.logError(RtcPeerHelper.className, 'onSendChannelOpen', \"error:\", e);\r\n      }\r\n   }\r\n\r\n   private onSendChannelMessage(msg) {\r\n      logger.logInfo(RtcPeerHelper.className, 'onSendChannelMessage', \"message:\", msg.data);\r\n   }\r\n\r\n   private onSendChannelError(ev: Event) {\r\n      let ev2: any = ev;\r\n      logger.logError(RtcPeerHelper.className, 'onSendChannelError', \"error:\", ev2.error);\r\n   }\r\n\r\n   private onSendChannelClose(ev: Event) {\r\n      logger.logInfo(RtcPeerHelper.className, 'onSendChannelClose', \"event:\", ev);\r\n   }\r\n\r\n   // ICE handling\r\n   //////////\r\n   private onIceConnectionStateChange(ev: Event, pc: RTCPeerConnection) : void {\r\n      var state = pc.iceConnectionState;\r\n      logger.logInfo(RtcPeerHelper.className, 'onIceConnectionStateChange', \"state:\", state);\r\n\r\n      if (state === \"connected\") {\r\n         this._isIceConnected = true;\r\n      }\r\n      if (state === \"failed\") {\r\n         this._isIceConnected = false;\r\n         // TODO restartIce here\r\n      }\r\n   }\r\n\r\n   private onIceCandidateError(ev: Event) : void {\r\n      var ev2: any = ev;\r\n      if (ev2.errorCode === 701) {\r\n         logger.logError(RtcPeerHelper.className, 'onIceCandidateError', ev2.url + ' ', ev2.errorText);\r\n      } else {\r\n         logger.logInfo(RtcPeerHelper.className, 'onIceCandidateError', 'event:', ev);\r\n      }\r\n   }\r\n\r\n   // Recieve channel handling\r\n   //////////\r\n   private onRecieveDataChannel(channel: RTCDataChannel) {\r\n      logger.logInfo(RtcPeerHelper.className, 'onRecieveDataChannel', '', null);\r\n\r\n      if (this._recieveChannel) {\r\n         this._recieveChannel.close();\r\n      }\r\n\r\n      this._recieveChannel = channel;\r\n      this._recieveChannel.onmessage = (ev) => { this.onRecieveChannelMessage(ev) };\r\n      this._recieveChannel.onopen = (ev) => { this.onRecieveChannelOpen(ev, this._recieveChannel) };\r\n      this._recieveChannel.onclose = this.onRecieveChannelClose.bind(this);\r\n      this._recieveChannel.onerror = this.onRecieveChannelError.bind(this);\r\n   }\r\n\r\n   private onRecieveChannelOpen(ev: Event, dc: RTCDataChannel) : void {\r\n      logger.logInfo(RtcPeerHelper.className, 'onRecieveChannelOpen', '', null);\r\n   }\r\n\r\n   private onRecieveChannelError(ev: Event): void {\r\n      var ev2: any = ev;\r\n      logger.logError(RtcPeerHelper.className, 'onRecieveChannelError', \"error:\", ev2.error);\r\n   }\r\n\r\n   private onRecieveChannelClose(ev: Event) : void {\r\n      logger.logInfo(RtcPeerHelper.className, 'onRecieveChannelClose', '', null);\r\n   }\r\n\r\n   private onRecieveChannelMessage(ev: Event) {\r\n      // Too noisy to keep this on \r\n      // logger.logInfo('RtcCaller', 'onrecievechannelmessage', \"message:\", msg.data);\r\n\r\n      var ev2: any = ev;\r\n\r\n      var remoteCallData = this._types.reviveFromJSON(ev2.data);\r\n\r\n      // Store the person we are talking to - allows tracking in the UI later\r\n      if (remoteCallData.type === Person.__type) {\r\n         var person: Person = remoteCallData;\r\n\r\n         // Store a unique derivation of name in case a person join multiple times\r\n         this._remotePerson = new Person(person.id,\r\n            person.externalId,\r\n            this._nameCache.addReturnUnique(person.name),\r\n            person.email,\r\n            person.thumbnailUrl,\r\n            person.lastAuthCode);\r\n\r\n         // New document listeners expect a 'CallParticipation'\r\n         if (this.onRemoteData) {\r\n            this.onRemoteData(this._remoteCallParticipation);\r\n         }\r\n         // Some document listeners expect a 'Person'\r\n         if (this.onRemoteData) {\r\n            this.onRemoteData(this._remotePerson);\r\n         }\r\n      } else {\r\n\r\n         if (this.onRemoteData) {\r\n            this.onRemoteData(remoteCallData);\r\n         }\r\n      }\r\n   }\r\n}","/*! Copyright TXPCo, 2020, 2021 */\r\n// Modules in the Peer architecture:\r\n// PeerConnection : overall orchestration & interface to the UI.\r\n// PeerFactory - creates Rtc or Web versions as necessary to meet a request for a PeerCaller or PeerSender. \r\n// PeerInterfaces - defines abstract interfaces for PeerCaller, PeerSender, PeerSignalsender, PeerSignalReciever etc \r\n// PeerLink - contains a connection, plus logic to bridge the send/receieve differences, and depends only on abstract classes. \r\n// PeerRtc - contains concrete implementations of PeerCaller and PeerSender, send and recieve data via WebRTC\r\n// PeerSignaller - contains an implementation of the PeerSignalSender & PeerSignalReciever interfaces.\r\n// PeerWeb  - contains concrete implementations of PeerCaller and PeerSender, sends and recoeved data via the node.js server\r\n\r\n// RTC References:\r\n// https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Signaling_and_video_calling\r\n// https://medium.com/xamarin-webrtc/webrtc-signaling-server-dc6e38aaefba \r\n// https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Perfect_negotiation\r\n\r\n// External libraries\r\nimport axios from 'axios';\r\n\r\n// This app, this library\r\nimport { Person } from './Person';\r\nimport { Queue } from './Queue';\r\nimport { LoggerFactory, ELoggerType } from './Logger';\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { IStreamable } from './Streamable';\r\nimport { ETransportType, CallParticipation, CallOffer, CallAnswer, CallIceCandidate, CallData, CallDataBatched } from './Call';\r\nimport { EPeerConnectionType, IPeerSignalSender, IPeerCaller, IPeerReciever, PeerNameCache } from './PeerInterfaces'\r\n\r\nvar logger = new LoggerFactory().createLogger(ELoggerType.Client, true);\r\n\r\n\r\nexport class PeerCallerWeb implements IPeerCaller {\r\n   // member variables\r\n   private peerHelp: WebPeerHelper;\r\n\r\n   constructor(localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender) {\r\n\r\n      this.peerHelp = new WebPeerHelper(localCallParticipation,\r\n         remoteCallParticipation,\r\n         person, nameCache, signaller);\r\n\r\n      // Hook to pass any data up the chain\r\n      this.peerHelp.onRemoteData = this.onRemoteDataInner.bind(this);\r\n      this.peerHelp.onRemoteFail = this.onRemoteFailInner.bind(this);\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   localCallParticipation(): CallParticipation {\r\n      return this.peerHelp.localCallParticipation;\r\n   }\r\n   remoteCallParticipation(): CallParticipation {\r\n      return this.peerHelp.remoteCallParticipation;\r\n   }\r\n   localPerson(): Person {\r\n      return this.peerHelp.localPerson;\r\n   }\r\n   remotePerson(): Person | undefined {\r\n      return this.peerHelp.remotePerson;\r\n   }\r\n   remotePersonIs(name: string): boolean {\r\n      if (this.peerHelp.remotePerson) {\r\n         return (this.peerHelp.remotePerson.name === name);\r\n      } else {\r\n         return false;\r\n      }\r\n   }\r\n   isConnected(): boolean {\r\n      return this.peerHelp.isChannelConnected;\r\n   }\r\n\r\n   // Override this for data from notifications \r\n   onRemoteData: ((ev: IStreamable) => void) = function (ev) { };\r\n   onRemoteFail: (() => void) = function () { };\r\n\r\n   placeCall(): void {\r\n      this.peerHelp.placeCall();\r\n   }\r\n\r\n   handleAnswer(answer: CallAnswer): void {\r\n      this.peerHelp.handleAnswer(answer);\r\n   }\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void {\r\n      // No-op for web connection\r\n   }\r\n\r\n   handleRemoteData(data: CallData): void {\r\n      this.peerHelp.handleRemoteData(data);\r\n   }\r\n\r\n   send(obj: IStreamable): void {\r\n      this.peerHelp.send(obj);\r\n   }\r\n\r\n   close(): void {\r\n      this.peerHelp.close();\r\n   }\r\n\r\n   private onRemoteDataInner(ev: IStreamable): void {\r\n\r\n      if (this.onRemoteData) {\r\n         this.onRemoteData(ev);\r\n      }\r\n   }\r\n   private onRemoteFailInner(): void {\r\n\r\n      if (this.onRemoteFail) {\r\n         this.onRemoteFail();\r\n      }\r\n   }\r\n}\r\n\r\nexport class PeerRecieverWeb implements IPeerReciever {\r\n   // member variables\r\n   private peerHelp: WebPeerHelper;\r\n\r\n   constructor(localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender) {\r\n\r\n      this.peerHelp = new WebPeerHelper(localCallParticipation,\r\n         remoteCallParticipation,\r\n         person, nameCache,\r\n         signaller);\r\n\r\n      // Hook to pass any data up the chain\r\n      this.peerHelp.onRemoteData = this.onRemoteDataInner.bind(this);\r\n      this.peerHelp.onRemoteFail = this.onRemoteFailInner.bind(this);\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   localCallParticipation(): CallParticipation {\r\n      return this.peerHelp.localCallParticipation;\r\n   }\r\n   remoteCallParticipation(): CallParticipation {\r\n      return this.peerHelp.remoteCallParticipation;\r\n   }\r\n   localPerson(): Person {\r\n      return this.peerHelp.localPerson;\r\n   }\r\n   remotePerson(): Person | undefined {\r\n      return this.peerHelp.remotePerson;\r\n   }\r\n   remotePersonIs(name: string): boolean {\r\n      if (this.peerHelp.remotePerson) {\r\n         return (this.peerHelp.remotePerson.name === name);\r\n      } else {\r\n         return false;\r\n      }\r\n   }\r\n   isConnected(): boolean {\r\n      return this.peerHelp.isChannelConnected;\r\n   }\r\n\r\n   // Override these for data from notifications \r\n   onRemoteData: ((ev: IStreamable) => void) = function (ev) { };\r\n   onRemoteFail: (() => void) = function () { };\r\n\r\n   answerCall(offer: CallOffer): void {\r\n\r\n      this.peerHelp.answerCall(offer);\r\n   }\r\n\r\n   handleIceCandidate(ice: CallIceCandidate): void {\r\n      // No-op for web connection\r\n   }\r\n\r\n   handleRemoteData(data: CallData): void {\r\n      this.peerHelp.handleRemoteData(data);\r\n   }\r\n\r\n   send(obj: IStreamable): void {\r\n      this.peerHelp.send(obj);\r\n   }\r\n\r\n   close(): void {\r\n      this.peerHelp.close();\r\n   }\r\n\r\n   private onRemoteDataInner(ev: IStreamable): void {\r\n\r\n      if (this.onRemoteData) {\r\n         this.onRemoteData(ev);\r\n      }\r\n   }\r\n\r\n   private onRemoteFailInner(): void {\r\n\r\n      if (this.onRemoteFail) {\r\n         this.onRemoteFail();\r\n      }\r\n   }\r\n}\r\n\r\nexport class WebPeerHelper {\r\n\r\n   // member variables\r\n   private _localCallParticipation: CallParticipation;\r\n   private _remoteCallParticipation: CallParticipation;\r\n   private _localPerson: Person;\r\n   private _remotePerson: Person | undefined;\r\n   private _isChannelConnected: boolean;\r\n   private _nameCache: PeerNameCache;\r\n   private _signaller: IPeerSignalSender;\r\n   private _types: StreamableTypes;\r\n   private _timeoutId: any;\r\n   private static className: string = 'WebPeerHelper';\r\n\r\n   private static _sendQueue: Queue<IStreamable> = new Queue<IStreamable> ();\r\n   private static _dataForBatch: IStreamable = undefined;\r\n   private static _recipents: Array<CallParticipation> = new Array<CallParticipation>();\r\n   private static _sender: CallParticipation = undefined;\r\n   private static _timeOutInterval: number = 30 * 1000;\r\n\r\n   constructor(localCallParticipation: CallParticipation,\r\n      remoteCallParticipation: CallParticipation,\r\n      person: Person,\r\n      nameCache: PeerNameCache,\r\n      signaller: IPeerSignalSender\r\n   ) {\r\n      this._localCallParticipation = localCallParticipation;\r\n      this._remoteCallParticipation = remoteCallParticipation;\r\n      this._localPerson = person;\r\n      this._nameCache = nameCache;\r\n      this._signaller = signaller;\r\n      this._types = new StreamableTypes();\r\n\r\n      this._isChannelConnected = false;\r\n   }\r\n\r\n   // Override these for notifications \r\n   onRemoteData: ((ev: IStreamable) => void) = function (ev) { };\r\n   onRemoteFail: (() => void) = function () { };\r\n\r\n   /**\r\n   * set of 'getters' & some 'setters' for private variables\r\n   */\r\n   get localCallParticipation(): CallParticipation {\r\n      return this._localCallParticipation;\r\n   }\r\n   get remoteCallParticipation(): CallParticipation {\r\n      return this._remoteCallParticipation;\r\n   }\r\n   get localPerson(): Person {\r\n      return this._localPerson;\r\n   }\r\n   get remotePerson(): Person | undefined {\r\n      return this._remotePerson;\r\n   }\r\n   get isChannelConnected(): boolean {\r\n      return this._isChannelConnected;\r\n   }\r\n\r\n   // Connection handling\r\n   //////////\r\n\r\n   placeCall(): void {\r\n      let offer = new CallOffer(this._localCallParticipation, this._remoteCallParticipation, \"Web\", ETransportType.Web);\r\n      this._timeoutId = setTimeout(this.onTimeout.bind(this), WebPeerHelper._timeOutInterval);\r\n      this._signaller.sendOffer(offer);\r\n   }\r\n\r\n   handleAnswer(answer: CallAnswer): void {\r\n\r\n      this._isChannelConnected = true;\r\n      if (this._timeoutId) {\r\n         clearTimeout(this._timeoutId);\r\n         this._timeoutId = null;\r\n      }\r\n\r\n      // Send the local person to start the application handshake\r\n      this.send(this._localPerson);\r\n      WebPeerHelper.drainSendQueue(this._signaller);\r\n   }\r\n\r\n   answerCall(remoteOffer: CallOffer): void {\r\n      let answer = new CallAnswer (this._localCallParticipation, this._remoteCallParticipation, \"Web\", ETransportType.Web);\r\n      this._signaller.sendAnswer(answer);\r\n\r\n      this._isChannelConnected = true;\r\n      if (this._timeoutId) {\r\n         clearTimeout(this._timeoutId);\r\n         this._timeoutId = null;\r\n      }\r\n\r\n      // Send the local person to start the application handshake\r\n      this.send(this._localPerson);\r\n      WebPeerHelper.drainSendQueue(this._signaller);\r\n   }\r\n\r\n   close(): void {\r\n\r\n      if (this._timeoutId) {\r\n         clearTimeout(this._timeoutId);\r\n         this._timeoutId = null;\r\n      }\r\n\r\n      // TODO - work out close down logic - should we notify other party?\r\n   }\r\n\r\n   send(obj: IStreamable) : void {\r\n\r\n      if (!WebPeerHelper._dataForBatch) {\r\n         // first call - just save the item and pass back control\r\n         WebPeerHelper._dataForBatch = obj;\r\n         WebPeerHelper._sender = this._localCallParticipation;\r\n         WebPeerHelper._recipents.push(this._remoteCallParticipation);\r\n\r\n         return;\r\n      } else {\r\n         if (obj === WebPeerHelper._dataForBatch && this._localCallParticipation === WebPeerHelper._sender) {\r\n            // This case is a repeated re-send of the same item to different recipieents -> save the recipients\r\n            WebPeerHelper._recipents.push(this._remoteCallParticipation);\r\n         }\r\n         else {\r\n            // This case we have a new item being sent - flush the queue and restart\r\n            WebPeerHelper.drainSendQueue(this._signaller);\r\n\r\n            // Then save the new item and pass back control\r\n            WebPeerHelper._dataForBatch = obj;\r\n            WebPeerHelper._sender = this._localCallParticipation;\r\n            WebPeerHelper._recipents.push(this._remoteCallParticipation);\r\n         }\r\n         WebPeerHelper._dataForBatch = obj;\r\n      }\r\n   }\r\n\r\n\r\n   handleRemoteData(data: CallData): void {\r\n      this.onRecieveMessage (data);\r\n   }\r\n\r\n   static drainSendQueue(signaller: IPeerSignalSender) {\r\n\r\n      if (WebPeerHelper._dataForBatch) {\r\n         // Take a copy of the data to send as the send is anychronous & if new items come in we need to correctly accumulate them\r\n         let callData = new CallDataBatched(WebPeerHelper._sender, WebPeerHelper._recipents.map((x) => x), WebPeerHelper._dataForBatch);\r\n\r\n         // Reset accumulated data\r\n         WebPeerHelper._dataForBatch = undefined;\r\n         WebPeerHelper._sender = undefined;\r\n         WebPeerHelper._recipents = new Array<CallParticipation>();\r\n\r\n         // Send our data.\r\n         // we put it on a queue first as new data can arrive and get re-queued while we are sending to the server\r\n         WebPeerHelper._sendQueue.enqueue(callData);\r\n      }\r\n\r\n      while (!WebPeerHelper._sendQueue.isEmpty()) {\r\n         signaller.sendData(WebPeerHelper._sendQueue.dequeue());\r\n      }\r\n   }\r\n\r\n   private onTimeout(): void {\r\n      if (this._timeoutId) {\r\n         clearTimeout(this._timeoutId);\r\n         this._timeoutId = null;\r\n      }\r\n      if (this.onRemoteFail)\r\n         this.onRemoteFail();\r\n   }\r\n\r\n   private onRecieveMessage(data: CallData) {\r\n \r\n      var remoteCallData = data.data;\r\n\r\n      // Store the person we are talking to - allows tracking in the UI later\r\n      if (remoteCallData.type === Person.__type) {\r\n         var person: Person = remoteCallData as any;\r\n\r\n         // Store a unique derivation of name in case a person join multiple times\r\n         this._remotePerson = new Person(person.id,\r\n            person.externalId,\r\n            this._nameCache.addReturnUnique(person.name),\r\n            person.email,\r\n            person.thumbnailUrl,\r\n            person.lastAuthCode);\r\n\r\n         // New document listeners expect a 'CallParticipation'\r\n         if (this.onRemoteData) {\r\n            this.onRemoteData(this._remoteCallParticipation);\r\n         }\r\n         // Some document listeners expect a 'Person'\r\n         if (this.onRemoteData) {\r\n            this.onRemoteData(this._remotePerson);\r\n         }\r\n      } else {\r\n\r\n         if (this.onRemoteData) {\r\n            this.onRemoteData(remoteCallData);\r\n         }\r\n      }\r\n   }\r\n}","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nimport { IStreamableFor } from './Streamable';\r\n\r\nexport class Person implements IStreamableFor<Person> {\r\n   private _id: any; \r\n   private _externalId : string;\r\n   private _name: string;\r\n   private _email: string;\r\n   private _thumbnailUrl: string;\r\n   private _lastAuthCode: string;\r\n\r\n   static readonly __type: string = \"Person\";\r\n\r\n/**\r\n * Create a Person object\r\n * @param _id - Mongo-DB assigned ID\r\n * @param externalId - ID assigned by external system (like facebook)\r\n * @param name - plain text user name\r\n * @param email - user email\r\n * @param thumbnailUrl - URL to thumbnail image\r\n * @param lastAuthCode - provided by underlying identity system when user logs in\r\n */\r\n   constructor(_id: any, externalId: string, name: string, email: string, thumbnailUrl: string, lastAuthCode:string) {\r\n      this._id = _id;\r\n      this._externalId = externalId;\r\n      this._name = name;\r\n      this._email = email;\r\n      this._thumbnailUrl = thumbnailUrl;\r\n      this._lastAuthCode = lastAuthCode;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get id(): any {\r\n      return this._id;\r\n   }\r\n   get externalId(): string {\r\n      return this._externalId;\r\n   }\r\n   get name(): string {\r\n      return this._name;\r\n   }\r\n   get email(): string {\r\n      return this._email;\r\n   }\r\n   get thumbnailUrl(): string {\r\n      return this._thumbnailUrl;\r\n   }\r\n   get lastAuthCode(): string {\r\n      return this._lastAuthCode;\r\n   }\r\n   get type(): string {\r\n      return Person.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n    equals (rhs: Person) : boolean {\r\n\r\n      return ((this._id === rhs._id) &&\r\n         (this._externalId === rhs._externalId) &&\r\n         (this._name === rhs._name) &&\r\n         (this._email === rhs._email) &&\r\n         (this._thumbnailUrl === rhs._thumbnailUrl) &&\r\n         (this._lastAuthCode === rhs._lastAuthCode));\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: Person.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _id: this._id,\r\n            _externalId: this._externalId,\r\n            _name: this._name,\r\n            _email: this._email,\r\n            _thumbnailUrl: this._thumbnailUrl,\r\n            _lastAuthCode: this._lastAuthCode\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): Person {\r\n\r\n      // revice data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return Person.reviveDb(data.attributes);\r\n      else\r\n         return Person.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any) : Person {\r\n\r\n      return new Person (data._id,\r\n         data._externalId,\r\n         data._name,\r\n         data._email,\r\n         data._thumbnailUrl,\r\n         data._lastAuthCode);\r\n   };\r\n};\r\n\r\nexport class PersonAttendance implements IStreamableFor<PersonAttendance> {\r\n   private _id: any;\r\n   private _person: Person;\r\n   private _when: Date;\r\n\r\n   static readonly __type: string = \"PersonAttendance\";\r\n\r\n   /**\r\n    * Create a Attendance object\r\n    * @param _id - Mongo-DB assigned ID, can be null\r\n    * @param person - the Person that attended\r\n    * @param when - date they attended ob\r\n    */\r\n   constructor(_id: any, person: Person, when: Date) {\r\n      this._id = _id;\r\n      this._person = person;\r\n      this._when = when;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get id(): any {\r\n      return this._id;\r\n   }\r\n   get person(): Person {\r\n      return this._person;\r\n   }\r\n   get when(): Date {\r\n      return this._when;\r\n   }  \r\n   get type(): string {\r\n      return Person.__type;\r\n   }\r\n\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: PersonAttendance): boolean {\r\n\r\n      return ((this._id === rhs._id) &&\r\n         (this._person.equals (rhs._person)) &&\r\n         (this._when.getTime() === rhs._when.getTime()) );\r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): Object {\r\n\r\n      return {\r\n         __type: PersonAttendance.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _id: this._id,\r\n            _person: this._person,\r\n            _when: this._when\r\n         }\r\n      };\r\n   };\r\n\r\n   /**\r\n    * Method that can deserialize JSON into an instance \r\n    * @param data - the JSON data to revove from \r\n    */\r\n   static revive(data: any): PersonAttendance {\r\n\r\n      // revice data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return PersonAttendance.reviveDb(data.attributes);\r\n      else\r\n         return PersonAttendance.reviveDb(data);\r\n   };\r\n\r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): PersonAttendance {\r\n\r\n      return new PersonAttendance (data._id,\r\n         Person.revive (data._person),\r\n         new Date (data._when));\r\n   };\r\n};\r\n\r\n","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\n\r\n//==============================//\r\n// Queue class\r\n//==============================//\r\n\r\nexport class Queue<T> {\r\n\r\n      // initialise the queue and offset\r\n   queue: Array<T>;\r\n   offset: number; \r\n\r\n   /**\r\n    * Creates a Queue\r\n    */\r\n   constructor() {\r\n      this.offset = 0\r\n      this.queue = new Array<T>();\r\n   }\r\n\r\n   // Returns the length of the queue.\r\n   getLength () : number {\r\n      return (this.queue.length - this.offset);\r\n   }\r\n\r\n   // Returns true if the queue is empty, and false otherwise.\r\n   isEmpty () : boolean {\r\n      return (this.queue.length == 0);\r\n   }\r\n\r\n   /* Enqueues the specified item. The parameter is:\r\n    *\r\n    * item - the item to enqueue\r\n    */\r\n   enqueue (item: T) {\r\n      this.queue.push(item);\r\n   }\r\n\r\n   /* Dequeues an item and returns it. If the queue is empty, the value\r\n    * 'undefined' is returned.\r\n    */\r\n   dequeue (): T | undefined {\r\n\r\n      // if the queue is empty, return immediately\r\n      if (this.queue.length == 0) return undefined;\r\n\r\n      // store the item at the front of the queue\r\n      let item = this.queue[this.offset];\r\n\r\n      // increment the offset and remove the free space if necessary\r\n      if (++(this.offset) * 2 >= this.queue.length) {\r\n         this.queue = this.queue.slice(this.offset);\r\n         this.offset = 0;\r\n      }\r\n\r\n      // return the dequeued item\r\n      return item;\r\n\r\n   }\r\n\r\n   /* Returns the item at the front of the queue (without dequeuing it). If the\r\n    * queue is empty then undefined is returned.\r\n    */\r\n   peek(): T | undefined {\r\n      return (this.queue.length > 0 ? this.queue[this.offset] : undefined);\r\n   }\r\n}\r\n\r\n// Convencience classes for calls from plain javascript\r\nexport class QueueString extends Queue<string> {\r\n   constructor() {\r\n      super();\r\n   }\r\n}\r\n\r\nexport class QueueNumber extends Queue<number> {\r\n   constructor() {\r\n      super();\r\n   }\r\n}\r\n\r\nexport class QueueAny extends Queue<any> {\r\n   constructor() {\r\n      super();\r\n   }\r\n}","// GymClock spec is a 'templae' for a clock - how log, wether to play music, and which music.\r\n// GymClockAction is a way to send the start, pause, stop list via Rpc\r\n// GymClockState is a class to represent the state of a running clock - is is started, stopped, paused etc, and if running, for how long. \r\n// RunnableClock is a running clock - created from a spec, then can start, stop, pause etc.\r\n\r\nimport { EGymClockDuration, EGymClockMusic, EGymClockState, GymClockSpec, GymClockState } from './GymClock';\r\n\r\nconst countDownSeconds : number = 15;\r\n\r\n// Keep this function need declation in case an extra Enum is added above & this needs to change\r\nfunction calculateCountToSeconds (durationEnum) {\r\n   switch (durationEnum) {\r\n      case EGymClockDuration.Five:\r\n         return (countDownSeconds + 5 * 60);\r\n\r\n      default:\r\n      case EGymClockDuration.Ten:\r\n         return (countDownSeconds + 10 * 60);\r\n\r\n      case EGymClockDuration.Fifteen:\r\n         return (countDownSeconds + 15 * 60);\r\n\r\n      case EGymClockDuration.Twenty:\r\n         return (countDownSeconds + 20 * 60);\r\n\r\n   }\r\n};\r\n\r\n//==============================//\r\n// RunnableClock class\r\n//==============================//\r\nexport class RunnableClock  {\r\n   private _clockSpec: GymClockSpec; \r\n   private _clockState: EGymClockState;\r\n   private _secondsCounted: number;\r\n   private _startTime: Date;\r\n   private _targetRunInSeconds: number;\r\n   private _audio: HTMLAudioElement;\r\n   private _intervalId: any;\r\n   private _callbackFn: Function;\r\n   private _userAllowsAudio: boolean;\r\n\r\n   /**\r\n    * Create a RunnableClock object\r\n    */\r\n   constructor (clockSpec) {\r\n      this._clockSpec = clockSpec;\r\n      this._clockState = EGymClockState.Stopped;\r\n      this._secondsCounted = 0;\r\n      this._startTime = new Date();\r\n      this._targetRunInSeconds = 0;\r\n      this._intervalId = null;\r\n      this._callbackFn = null;\r\n      this._userAllowsAudio = false;\r\n\r\n      if (this._clockSpec.musicUrl) {\r\n         this._audio = new Audio();\r\n         this._audio.src = this._clockSpec.musicUrl;\r\n         this._audio.loop = true;\r\n      } else\r\n         this._audio = null;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get clockSpec(): GymClockSpec {\r\n      return this._clockSpec;\r\n   }\r\n   get stateEnum(): EGymClockState {\r\n      return this._clockState;\r\n   }\r\n   get secondsCounted(): number {\r\n      return this._secondsCounted;\r\n   }\r\n   /**\r\n    * test for equality - checks all fields are the same. \r\n    * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n    * @param rhs - the object to compare this one to.  \r\n    */\r\n   equals(rhs: RunnableClock): boolean {\r\n\r\n      return (this._clockSpec.equals(rhs._clockSpec)\r\n         && this._clockState == rhs._clockState\r\n         && this._secondsCounted === rhs._secondsCounted\r\n         && this._startTime.getTime() === rhs._startTime.getTime()\r\n         && this._targetRunInSeconds === rhs._targetRunInSeconds\r\n         && this._userAllowsAudio === rhs._userAllowsAudio);\r\n   };\r\n\r\n   start(callbackFn: Function, userAllowsAudio: boolean, secondsPlayed? : number): void {\r\n\r\n      this._userAllowsAudio = userAllowsAudio;\r\n\r\n      if (secondsPlayed)\r\n         this._secondsCounted = secondsPlayed;\r\n\r\n      if (this._secondsCounted >= countDownSeconds)\r\n         this._clockState = EGymClockState.Running;\r\n      else\r\n         this._clockState = EGymClockState.CountingDown;\r\n\r\n      this._targetRunInSeconds = calculateCountToSeconds(this._clockSpec.durationEnum);\r\n      if (this._intervalId) {\r\n         clearInterval(this._intervalId);\r\n         this._intervalId = null;\r\n      }\r\n\r\n      this._intervalId = setInterval(this.onClockInterval.bind(this), 200);\r\n\r\n      // Set effective start time by working out the duration of any ticks already counted\r\n      this._startTime.setTime(new Date().getTime() - this._secondsCounted * 1000);\r\n\r\n      this._callbackFn = callbackFn;\r\n\r\n      if (this._audio && this._userAllowsAudio) {\r\n         this._audio.currentTime = this._secondsCounted;\r\n         this._audio.play();\r\n      }\r\n\r\n      // call first tick to start the visible clock\r\n      this.onClockInterval();\r\n   };\r\n\r\n   stop () : void {\r\n      if (this._intervalId) {\r\n         clearInterval(this._intervalId);\r\n         this._intervalId = null;\r\n      }\r\n      this._clockState = EGymClockState.Stopped;\r\n      this._secondsCounted = 0;\r\n      this._targetRunInSeconds = calculateCountToSeconds(this._clockSpec.durationEnum);\r\n\r\n      if (this._audio && this._userAllowsAudio)\r\n         this._audio.pause();\r\n\r\n      if (this._callbackFn)\r\n         this._callbackFn(0, 0);\r\n   };\r\n\r\n   pause () : void {\r\n      if (this._intervalId) {\r\n         clearInterval(this._intervalId);\r\n         this._intervalId = null;\r\n      }\r\n      if (this._audio && this._userAllowsAudio)\r\n         this._audio.pause();\r\n\r\n      this._clockState = EGymClockState.Paused;\r\n   };\r\n\r\n   mute(): void {\r\n      // Return if there is no state change\r\n      if (!this._userAllowsAudio)\r\n         return;\r\n\r\n      if (this._audio && this.isRunning())\r\n         this._audio.muted = true;\r\n\r\n      this._userAllowsAudio = false;\r\n   }\r\n\r\n   unMute(): void {\r\n\r\n      // Return if there is no state change\r\n      if (this._userAllowsAudio)\r\n         return;\r\n\r\n      if (this._audio && this.isRunning()) {\r\n         this._audio.muted = false;\r\n         this._audio.currentTime = this._secondsCounted;\r\n         this._audio.play();\r\n      }\r\n\r\n      this._userAllowsAudio = true;\r\n   }\r\n\r\n   onClockInterval () : void {\r\n\r\n      var now, mm, ss, seconds;\r\n\r\n      now = new Date();\r\n      seconds = (now.getTime() - this._startTime.getTime()) / 1000;\r\n      this._secondsCounted = seconds;\r\n\r\n      if (this._clockState === EGymClockState.CountingDown\r\n         && seconds < countDownSeconds) {\r\n\r\n         mm = Math.floor((countDownSeconds - seconds) / 60);\r\n         ss = Math.floor(countDownSeconds - (mm * 60) - seconds);\r\n      } else {\r\n         if (this._clockState === EGymClockState.CountingDown) {\r\n            this._clockState = EGymClockState.Running;\r\n         } \r\n\r\n         // Switch from floor to Ceil to compensate for passing zero in common across count down then count up\r\n         mm = Math.floor((seconds - countDownSeconds) / 60);\r\n         ss = Math.ceil(seconds - countDownSeconds - Math.floor(mm * 60)); \r\n         if (seconds >= this._targetRunInSeconds) {\r\n            mm = (this._targetRunInSeconds - countDownSeconds) / 60;\r\n            ss = 0;\r\n            this.stop();\r\n         }\r\n      }\r\n      if (this._callbackFn)\r\n         this._callbackFn(mm, ss);\r\n   };\r\n\r\n   isRunning () : boolean {\r\n\r\n      return (this._clockState === EGymClockState.CountingDown)\r\n         || (this._clockState === EGymClockState.Running);\r\n   };\r\n\r\n   canPause () : boolean {\r\n\r\n      return (this._clockState === EGymClockState.CountingDown)\r\n         || (this._clockState === EGymClockState.Running);\r\n   };\r\n\r\n   canStop (): boolean {\r\n\r\n      return (this._clockState === EGymClockState.Paused)\r\n         || (this._clockState === EGymClockState.CountingDown)\r\n         || (this._clockState === EGymClockState.Running);\r\n   };\r\n\r\n   canStart () : boolean {\r\n\r\n      return (this._clockState === EGymClockState.Paused)\r\n         || (this._clockState === EGymClockState.Stopped);\r\n   };\r\n\r\n   saveToState(): GymClockState {\r\n\r\n      return new GymClockState(this._clockState, this._secondsCounted);\r\n   };\r\n\r\n   loadFromState(state: GymClockState, callbackFn: Function) {\r\n\r\n      switch (state.stateEnum) {\r\n         case EGymClockState.Stopped:\r\n            if (this.canStop())\r\n               this.stop();\r\n            break;\r\n         case EGymClockState.CountingDown:\r\n         case EGymClockState.Running:\r\n            if (this.canStart())\r\n               this.start(callbackFn, this._userAllowsAudio, state.secondsCounted);\r\n            break;\r\n         case EGymClockState.Paused:\r\n            if (this.canPause())\r\n               this.pause();\r\n            break;\r\n      }\r\n   };\r\n}","/*jslint white: false, indent: 3, maxerr: 1000 */\r\n/*global Enum*/\r\n/*global exports*/\r\n/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nimport { CallParticipation, CallOffer, CallAnswer, CallIceCandidate, CallLeaderResolve, CallKeepAlive , CallData} from './Call';\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { IStreamableFor } from './Streamable';\r\n\r\n//==============================//\r\n// SignalMessage class\r\n//==============================//\r\nexport class SignalMessage implements IStreamableFor<SignalMessage>  {\r\n\r\n   private _id: any;\r\n   private _meetingId : string;\r\n   private _sessionSubId: string;\r\n   private _sequenceNo: number;\r\n   private _data: any;\r\n\r\n   static readonly __type = \"SignalMessage\";\r\n\r\n  /**\r\n   * Create a SignalMessage object \r\n   * @param _id - Mongo-DB assigned ID\r\n   * @param meetingId - ID for the meetingl*\r\n   * @param sessionSubId - iD for the call session (in case same person joins > once from same browser)\r\n   * @param sequenceNo - message sequence number, climbs nomintonicaly up from 0\r\n   * @param data - data as an object. This is transformed to and from JSON for transport, must be registered with Type infrastructure\r\n   */\r\n   constructor(_id, _meetingId, sessionSubId, sequenceNo, data) {\r\n\r\n      this._id = _id;\r\n      this._meetingId = _meetingId;\r\n      this._sessionSubId = sessionSubId;\r\n      this._sequenceNo = sequenceNo;\r\n      this._data = data;\r\n   }\r\n   \r\n   /**\r\n* set of 'getters' for private variables\r\n*/\r\n   get id(): any {\r\n      return this._id;\r\n   }\r\n   get meetingId(): string {\r\n      return this._meetingId;\r\n   }\r\n   get sessionSubId(): string {\r\n      return this._sessionSubId;\r\n   }\r\n   get sequenceNo(): number {\r\n      return this._sequenceNo;\r\n   }\r\n   get data(): any {\r\n      return this._data;\r\n   }\r\n   get type(): string {\r\n      return SignalMessage.__type;\r\n   }\r\n\r\n  /**\r\n   * test for equality - checks all fields are the same. \r\n   * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n   * @param rhs - the object to compare this one to.  \r\n   */\r\n   equals(rhs: SignalMessage) : boolean {\r\n\r\n      return (this._id === rhs._id &&\r\n         (this._meetingId === rhs._meetingId) &&\r\n         (this._sessionSubId === rhs._sessionSubId) &&\r\n         (this._sequenceNo === rhs._sequenceNo) &&\r\n         this._data.equals (rhs._data)); \r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON () : any {\r\n\r\n      return {\r\n         __type: SignalMessage.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _id: this._id,\r\n            _meetingId: this._meetingId,\r\n            _sessionSubId: this._sessionSubId,\r\n            _sequenceNo: this._sequenceNo,\r\n            _data: JSON.stringify (this._data)\r\n         }\r\n      };\r\n   };\r\n\r\n  /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static revive(data: any): SignalMessage {\r\n      \r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return SignalMessage.reviveDb(data.attributes);\r\n      else\r\n         return SignalMessage.reviveDb(data);\r\n   };\r\n   \r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): SignalMessage {\r\n\r\n      var types = new StreamableTypes();\r\n\r\n      return new SignalMessage(data._id,\r\n                               data._meetingId,\r\n                               data._sessionSubId,\r\n                               data._sequenceNo,\r\n                               types.reviveFromJSON(data._data));\r\n   };\r\n\r\n   /**\r\n    * Used to change the payload to JSON before storage\r\n    * @param signalMessageIn - the object to transform\r\n    */\r\n   static toStored(signalMessageIn: SignalMessage): SignalMessage {\r\n      return new SignalMessage(signalMessageIn._id,\r\n         signalMessageIn._meetingId,\r\n         signalMessageIn._sessionSubId,\r\n         signalMessageIn._sequenceNo,\r\n         JSON.stringify(signalMessageIn._data));\r\n   }\r\n\r\n   /**\r\n    * Used to change the payload to JSON after storage\r\n    * @param signalMessageIn - the object to transform\r\n    */\r\n   static fromStored(signalMessageIn: SignalMessage): SignalMessage {\r\n      var types = new StreamableTypes();\r\n\r\n      return new SignalMessage(signalMessageIn._id,\r\n         signalMessageIn._meetingId,\r\n         signalMessageIn._sessionSubId,\r\n         signalMessageIn._sequenceNo,\r\n         types.reviveFromJSON(signalMessageIn._data));\r\n   }\r\n}\r\n","\r\n/*! Copyright TXPCo, 2020, 2021 */\r\nimport { Person, PersonAttendance } from './Person';\r\nimport { Facility } from './Facility';\r\nimport { CallParticipation, CallOffer, CallAnswer, CallIceCandidate, CallLeaderResolve, CallKeepAlive, CallData, CallDataBatched } from './Call'\r\nimport { SignalMessage } from './Signal';\r\nimport { UserFacilities } from './UserFacilities';\r\nimport { GymClockSpec, GymClockState } from './GymClock';\r\nimport { LiveWorkout, LiveWhiteboardCommand, LiveResultsCommand, LiveClockSpecCommand, LiveClockStateCommand, LiveAttendanceCommand, LiveViewStateCommand} from './LiveWorkout';\r\nimport { LiveUndoCommand } from './LiveCommand';\r\n\r\n//==============================//\r\n// StreamableTypes class\r\n//==============================//\r\nexport class StreamableTypes {\r\n\r\n   private _types: any;\r\n\r\n   /**\r\n    * Creates a StreamableTypes for use in streaming objects to and from JSON\r\n    */\r\n   constructor() {\r\n\r\n      // Registry of types\r\n      this._types = {};\r\n      this._types.Person = Person;\r\n      this._types.PersonAttendance = PersonAttendance;\r\n      this._types.Facility = Facility;\r\n      this._types.CallParticipation = CallParticipation;\r\n      this._types.CallOffer = CallOffer,\r\n      this._types.CallAnswer = CallAnswer;\r\n      this._types.CallIceCandidate = CallIceCandidate;\r\n      this._types.CallLeaderResolve = CallLeaderResolve;\r\n      this._types.CallKeepAlive = CallKeepAlive;\r\n      this._types.CallData = CallData;\r\n      this._types.CallDataBatched = CallDataBatched;\r\n      this._types.SignalMessage = SignalMessage;\r\n      this._types.UserFacilities = UserFacilities;\r\n      this._types.GymClockSpec = GymClockSpec;\r\n      this._types.GymClockState = GymClockState;\r\n      this._types.LiveWorkout = LiveWorkout;\r\n      this._types.LiveWhiteboardCommand = LiveWhiteboardCommand;\r\n      this._types.LiveResultsCommand = LiveResultsCommand;\r\n      this._types.LiveClockSpecCommand = LiveClockSpecCommand;\r\n      this._types.LiveClockStateCommand = LiveClockStateCommand;\r\n      this._types.LiveUndoCommand = LiveUndoCommand;\r\n      this._types.LiveAttendanceCommand = LiveAttendanceCommand;\r\n      this._types.LiveViewStateCommand = LiveViewStateCommand;\r\n\r\n   }\r\n\r\n   isObjectKey(key: string): boolean {\r\n      let keyNum = Number(key);\r\n      return key === '' || (!isNaN(keyNum - 0));\r\n   };\r\n\r\n   /**\r\n     * Looks up a type name in JSON and returns a constructed object if there is a match\r\n     * @param jsonString - the test to parse for a class \r\n     */\r\n   reviveFromJSON(jsonString: string) : any {\r\n\r\n      var registry = this;\r\n\r\n      return JSON.parse(jsonString, function (key, value) {\r\n         if (registry.isObjectKey(key) && value.hasOwnProperty('__type'))\r\n            return registry._types[value.__type].revive(value);\r\n         else\r\n            return this[key];\r\n      });\r\n   };\r\n}\r\n\r\n\r\n\r\n","/*jslint white: false, indent: 3, maxerr: 1000 */\r\n/*global Enum*/\r\n/*global exports*/\r\n/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nimport { IStreamableFor } from './Streamable';\r\n\r\nimport { Person } from './Person';\r\nimport { Facility } from './Facility';\r\nimport { isEqual } from './Equals';\r\n\r\n//==============================//\r\n// UserFacilities class\r\n//==============================//\r\nexport class UserFacilities implements IStreamableFor<UserFacilities> {\r\n\r\n   private _sessionId: string;\r\n   private _person: Person;\r\n   private _currentFacility: Facility;\r\n   private _zoomSignature: string;\r\n   private _facilities: Array<Facility>;\r\n\r\n   static readonly __type = \"UserFacilities\";\r\n\r\n  /**\r\n   * Create a HomePageData object \r\n   * @param sessionId - session ID - is sent back to the client, allows client to restart interrupted comms as long as within TTL\r\n   * @param person - object for current user\r\n   * @param currentFacility - the current facility where the user is logged in\r\n   * @param zoomSignature - signature to use to start Zoom\r\n   * @param facilities - array of all facilities where the user has a role\r\n   *\r\n   */\r\n   constructor(sessionId, person, currentFacility, zoomSignature, facilities: Array<Facility> = new Array<Facility>()) {\r\n\r\n      this._sessionId = sessionId;\r\n      this._person = person;\r\n      this._currentFacility = currentFacility;\r\n      this._zoomSignature = zoomSignature;\r\n      this._facilities = facilities;\r\n   }\r\n\r\n   /**\r\n   * set of 'getters' for private variables\r\n   */\r\n   get sessionId(): any {\r\n      return this._sessionId;\r\n   }\r\n   get person(): Person {\r\n      return this._person;\r\n   }\r\n   get currentFacility(): Facility {\r\n      return this._currentFacility;\r\n   }\r\n   get facilities(): Array<Facility> {\r\n      return this._facilities;\r\n   }\r\n   get zoomSignature(): string {\r\n      return this._zoomSignature;\r\n   }\r\n   get type(): string {\r\n      return UserFacilities.__type;\r\n   }\r\n\r\n  /**\r\n   * test for equality - checks all fields are the same. \r\n   * Uses field values, not identity bcs if objects are streamed to/from JSON, field identities will be different. \r\n   * @param rhs - the object to compare this one to.  \r\n   */\r\n   equals(rhs: UserFacilities): boolean {\r\n\r\n      return (this._sessionId === rhs._sessionId &&\r\n         this._person.equals(rhs._person) &&\r\n         this._currentFacility.equals(rhs._currentFacility) &&\r\n         this._zoomSignature === rhs._zoomSignature &&\r\n         isEqual(this._facilities, rhs._facilities)); \r\n   };\r\n\r\n   /**\r\n    * Method that serializes to JSON \r\n    */\r\n   toJSON(): any {\r\n\r\n      let facilities = new Array<Object> (this._facilities.length);\r\n      for (var i = 0; i < this._facilities.length; i++) {\r\n         facilities[i] = this._facilities[i].toJSON();\r\n      }\r\n\r\n      return {\r\n         __type: UserFacilities.__type,\r\n         // write out as id and attributes per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n         attributes: {\r\n            _sessionId: this._sessionId,\r\n            _person: this._person.toJSON(),\r\n            _currentFacility: this._currentFacility.toJSON(),\r\n            _zoomSignature: this._zoomSignature,\r\n            _facilities: facilities\r\n         }\r\n      };\r\n   };\r\n\r\n  /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static revive(data: any): UserFacilities {\r\n      \r\n      // revive data from 'attributes' per JSON API spec http://jsonapi.org/format/#document-resource-object-attributes\r\n      if (data.attributes)\r\n         return UserFacilities.reviveDb(data.attributes);\r\n      else\r\n         return UserFacilities.reviveDb(data);\r\n   };\r\n   \r\n   /**\r\n   * Method that can deserialize JSON into an instance \r\n   * @param data - the JSON data to revove from \r\n   */\r\n   static reviveDb(data: any): UserFacilities {\r\n\r\n      let facilities = new Array<Facility>();\r\n\r\n      if (data._facilities) {\r\n         facilities.length = data._facilities.length;\r\n         for (var i = 0; i < data._facilities.length; i++) {\r\n            facilities[i] = Facility.revive(data._facilities[i]);\r\n         }\r\n      }\r\n\r\n      return new UserFacilities(data._sessionId,\r\n         Person.revive(data._person),\r\n         data._currentFacility ? Facility.revive(data._currentFacility)\r\n            : new Facility(null, \"\", 'Unknown', 'building-black128x128.png', \"(No homepage)\"),\r\n         data._zoomSignature,\r\n         facilities);\r\n   }\r\n}\r\n\r\n","module.exports = require(\"assert\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"os\");;","module.exports = require(\"stream\");;","module.exports = require(\"tty\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","module.exports = require(\"zlib\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*! Copyright TXPCo, 2020, 2021 */\r\n\r\nimport { LoggerFactory, ELoggerType } from './Logger';\r\nimport { ArrayHook } from './ArrayHook';\r\nimport { Person, PersonAttendance } from './Person';\r\nimport { Facility } from './Facility';\r\nimport { StreamableTypes } from './StreamableTypes';\r\nimport { DateHook } from './DateHook'\r\nimport { Queue, QueueString, QueueNumber, QueueAny } from './Queue'\r\nimport { ETransportType, CallParticipation, CallOffer, CallAnswer, CallIceCandidate, CallLeaderResolve, CallKeepAlive, CallData, CallDataBatched } from './Call'\r\nimport { SignalMessage } from './Signal';\r\nimport { UserFacilities } from './UserFacilities';\r\nimport { EGymClockDuration, EGymClockMusic, EGymClockState, GymClockSpec, GymClockState } from './GymClock'\r\nimport { EThreeStateSwitchEnum, EThreeStateRagEnum, EFourStateRagEnum } from './Enum';\r\nimport { RunnableClock } from './RunnableClock';\r\n\r\n// Peer-peer architecture\r\nimport { PeerLink } from './PeerLink';\r\nimport { EPeerConnectionType, PeerNameCache } from './PeerInterfaces';\r\nimport { PeerCallerRtc, PeerRecieverRtc } from './PeerRtc';\r\nimport { PeerCallerWeb, PeerRecieverWeb } from './PeerWeb';\r\nimport { PeerFactory } from './PeerFactory';\r\n\r\n// LiveDocument Architecture\r\nimport {\r\n   LiveWorkout, EViewState,\r\n   LiveWhiteboardCommand, LiveResultsCommand, LiveClockSpecCommand, LiveClockStateCommand, LiveAttendanceCommand, LiveViewStateCommand,\r\n   LiveWorkoutChannelFactoryPeer, LiveWorkoutFactory\r\n} from './LiveWorkout';\r\nimport { LiveCommandProcessor, LiveUndoCommand } from './LiveCommand';\r\nimport { LiveDocumentChannelFactoryStub } from './LiveChannel';\r\nimport { LiveDocumentMaster, LiveDocumentRemote } from './LiveDocumentCentral';\r\n\r\nvar EntryPoints = {\r\n   LoggerFactory: LoggerFactory,\r\n   ELoggerType: ELoggerType,\r\n   StreamableTypes: StreamableTypes,\r\n   Person: Person,\r\n   PersonAttendance: PersonAttendance,\r\n   Facility: Facility,\r\n   Queue: Queue,\r\n   QueueString: QueueString,\r\n   QueueNumber: QueueNumber,\r\n   QueueAny: QueueAny,\r\n   ETransportType: ETransportType,\r\n   CallParticipation: CallParticipation,\r\n   CallOffer: CallOffer,\r\n   CallAnswer: CallAnswer,\r\n   CallIceCandidate: CallIceCandidate,\r\n   CallLeaderResolve: CallLeaderResolve,\r\n   CallKeepAlive: CallKeepAlive,\r\n   CallData: CallData,\r\n   CallDataBatched: CallDataBatched,\r\n   SignalMessage: SignalMessage,\r\n   UserFacilities: UserFacilities,\r\n   EGymClockDuration: EGymClockDuration,\r\n   EGymClockMusic: EGymClockMusic,\r\n   EGymClockState: EGymClockState,\r\n   GymClockSpec: GymClockSpec,\r\n   GymClockState: GymClockState,\r\n   EThreeStateSwitchEnum: EThreeStateSwitchEnum,\r\n   EThreeStateRagEnum: EThreeStateRagEnum,\r\n   EFourStateRagEnum: EFourStateRagEnum,\r\n   RunnableClock: RunnableClock,\r\n\r\n   // Peer Architecture\r\n   PeerLink : PeerLink,\r\n   EPeerConnectionType: EPeerConnectionType,\r\n   PeerNameCache: PeerNameCache,\r\n   PeerCallerRtc: PeerCallerRtc,\r\n   PeerRecieverRtc: PeerRecieverRtc,\r\n   PeerCallerWeb: PeerCallerWeb,\r\n   PeerRecieverWeb: PeerRecieverWeb,\r\n   PeerFactory: PeerFactory,\r\n\r\n   // Live Document Architecture\r\n   LiveCommandProcessor: LiveCommandProcessor,\r\n   LiveUndoCommand: LiveUndoCommand,\r\n   LiveDocumentChannelFactoryStub: LiveDocumentChannelFactoryStub,\r\n   LiveWorkout: LiveWorkout,\r\n   EViewState: EViewState,\r\n   LiveWhiteboardCommand: LiveWhiteboardCommand,\r\n   LiveResultsCommand: LiveResultsCommand,\r\n   LiveClockSpecCommand: LiveClockSpecCommand,\r\n   LiveClockStateCommand: LiveClockStateCommand,\r\n   LiveAttendanceCommand: LiveAttendanceCommand,\r\n   LiveViewStateCommand: LiveViewStateCommand,\r\n   LiveDocumentMaster: LiveDocumentMaster,\r\n   LiveDocumentRemote: LiveDocumentRemote,\r\n   LiveWorkoutChannelFactoryPeer: LiveWorkoutChannelFactoryPeer,\r\n   LiveWorkoutFactory: LiveWorkoutFactory\r\n\r\n};\r\n\r\nArrayHook.initialise();\r\nDateHook.initialise();\r\n\r\nexport default EntryPoints;\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}